import{a_ as f,ay as E,bT as b,bU as k,bV as I,bW as P,bX as D,ao as F,aN as T}from"./index-B-VT6L6o.js";var L=F("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),l=L.build(),v=e=>e.ids?.positioner??`dialog:${e.id}:positioner`,y=e=>e.ids?.backdrop??`dialog:${e.id}:backdrop`,g=e=>e.ids?.content??`dialog:${e.id}:content`,C=e=>e.ids?.trigger??`dialog:${e.id}:trigger`,p=e=>e.ids?.title??`dialog:${e.id}:title`,u=e=>e.ids?.description??`dialog:${e.id}:description`,m=e=>e.ids?.closeTrigger??`dialog:${e.id}:close`,c=e=>e.getById(g(e)),h=e=>e.getById(v(e)),S=e=>e.getById(y(e)),B=e=>e.getById(C(e)),N=e=>e.getById(p(e)),w=e=>e.getById(u(e)),R=e=>e.getById(m(e));function V(e,t){const{state:n,send:s,context:o,prop:a,scope:r}=e,O=a("aria-label"),d=n.matches("open");return{open:d,setOpen(i){n.matches("open")!==i&&s({type:i?"OPEN":"CLOSE"})},getTriggerProps(){return t.button({...l.trigger.attrs,dir:a("dir"),id:C(r),"aria-haspopup":"dialog",type:"button","aria-expanded":d,"data-state":d?"open":"closed","aria-controls":g(r),onClick(i){i.defaultPrevented||s({type:"TOGGLE"})}})},getBackdropProps(){return t.element({...l.backdrop.attrs,dir:a("dir"),hidden:!d,id:y(r),"data-state":d?"open":"closed"})},getPositionerProps(){return t.element({...l.positioner.attrs,dir:a("dir"),id:v(r),style:{pointerEvents:d?void 0:"none"}})},getContentProps(){const i=o.get("rendered");return t.element({...l.content.attrs,dir:a("dir"),role:a("role"),hidden:!d,id:g(r),tabIndex:-1,"data-state":d?"open":"closed","aria-modal":!0,"aria-label":O||void 0,"aria-labelledby":O||!i.title?void 0:p(r),"aria-describedby":i.description?u(r):void 0})},getTitleProps(){return t.element({...l.title.attrs,dir:a("dir"),id:p(r)})},getDescriptionProps(){return t.element({...l.description.attrs,dir:a("dir"),id:u(r)})},getCloseTriggerProps(){return t.button({...l.closeTrigger.attrs,dir:a("dir"),id:m(r),type:"button",onClick(i){i.defaultPrevented||(i.stopPropagation(),s({type:"CLOSE"}))}})}}}var K=f({props({props:e,scope:t}){const n=e.role==="alertdialog",s=n?()=>R(t):void 0,o=typeof e.modal=="boolean"?e.modal:!0;return{role:"dialog",modal:o,trapFocus:o,preventScroll:o,closeOnInteractOutside:!n,closeOnEscape:!0,restoreFocus:!0,initialFocusEl:s,...e}},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{rendered:e(()=>({defaultValue:{title:!0,description:!0}}))}},watch({track:e,action:t,prop:n}){e([()=>n("open")],()=>{t(["toggleVisibility"])})},states:{open:{entry:["checkRenderedElements","syncZIndex"],effects:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackDismissableElement({scope:e,send:t,prop:n}){return D(()=>c(e),{defer:!0,pointerBlocking:n("modal"),exclude:[B(e)],onInteractOutside(o){n("onInteractOutside")?.(o),n("closeOnInteractOutside")||o.preventDefault()},persistentElements:n("persistentElements"),onFocusOutside:n("onFocusOutside"),onPointerDownOutside:n("onPointerDownOutside"),onEscapeKeyDown(o){n("onEscapeKeyDown")?.(o),n("closeOnEscape")||o.preventDefault()},onDismiss(){t({type:"CLOSE",src:"interact-outside"})}})},preventScroll({scope:e,prop:t}){if(t("preventScroll"))return P(e.getDoc())},trapFocus({scope:e,prop:t}){return t("trapFocus")?I(()=>c(e),{preventScroll:!0,returnFocusOnDeactivate:!!t("restoreFocus"),initialFocus:t("initialFocusEl"),setReturnFocus:s=>t("finalFocusEl")?.()??s}):void 0},hideContentBelow({scope:e,prop:t}){return t("modal")?k(()=>[c(e)],{defer:!0}):void 0}},actions:{checkRenderedElements({context:e,scope:t}){E(()=>{e.set("rendered",{title:!!N(t),description:!!w(t)})})},syncZIndex({scope:e}){E(()=>{const t=c(e);if(!t)return;const n=b(t);[h(e),S(e)].forEach(o=>{o?.style.setProperty("--z-index",n.zIndex),o?.style.setProperty("--layer-index",n.getPropertyValue("--layer-index"))})})},invokeOnClose({prop:e}){e("onOpenChange")?.({open:!1})},invokeOnOpen({prop:e}){e("onOpenChange")?.({open:!0})},toggleVisibility({prop:e,send:t,event:n}){t({type:e("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:n})}}}});T()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","defaultOpen","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);export{V as c,K as m};
