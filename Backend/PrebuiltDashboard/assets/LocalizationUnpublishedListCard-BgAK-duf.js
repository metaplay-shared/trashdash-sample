import{d as F,by as $,c as g,E as I,r as O,e as l,o as n,w as a,j as d,f as s,x,k as o,t as S,a as b,m as u,q as f,ae as w,y as C,D as M,_ as c}from"./index-jY1EWd09.js";import{M as m,a as p,b as A,c as r}from"./metaListUtils-B-xQ0HnD.js";import{_ as V}from"./LocalizationActionArchive.vue_vue_type_script_setup_true_lang-hqONebFw.js";import{_ as R}from"./LocalizationActionPublish.vue_vue_type_script_setup_true_lang-CPEIbMpg.js";import{g as T}from"./localization-TVVxfgEw.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-Bzg4Lkt_.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-CihjvaoM.js";import"./index-qe4CXcF2.js";const z={key:0,class:"tw-space-x-1"},U={key:1},P={key:0},j=1,tt=F({__name:"LocalizationUnpublishedListCard",setup(q){const y=$(),h=g(()=>y.path),{data:_}=I(T()),B=g(()=>{if(_.value!==void 0)return _.value.filter(t=>!(t.publishedAt!==null||t.unpublishedAt!==null||t.isActive))});function L(t){const e=h.value,v=e.endsWith("/")?"":"/";return e+v+t}function k(t){return t.id}const D=[new m("Build Time","buildStartedAt",p.Ascending),new m("Build Time","buildStartedAt",p.Descending),new m("Name","name",p.Ascending),new m("Name","name",p.Descending)],N=["id","name","description"],E=[new A("status",[new r("Building",t=>t.bestEffortStatus==="Building"),new r("Success",t=>t.bestEffortStatus==="Success"),new r("Failed",t=>t.bestEffortStatus==="Failed")]),new A("archived",[new r("Archived",t=>t.isArchived),new r("Not archived",t=>!t.isArchived,!0)])];return(t,e)=>{const v=O("meta-list-card");return n(),l(v,{title:"Unpublished Localizations",itemList:B.value,getItemKey:k,searchFields:N,filterSets:E,sortOptions:D,defaultSortOption:j,icon:"language","data-testid":"localization-unpublished-list-card"},{"item-card":a(({item:i})=>[d(s(x),null,{badge:a(()=>[i.isActive?(n(),l(s(c),{key:0,variant:"success"},{default:a(()=>[...e[0]||(e[0]=[o("Active",-1)])],void 0,!0),_:1})):u("",!0),i.isArchived?(n(),l(s(c),{key:1,variant:"neutral"},{default:a(()=>[...e[1]||(e[1]=[o("Archived",-1)])],void 0,!0),_:1})):u("",!0),i.bestEffortStatus==="Failed"?(n(),l(s(c),{key:2,variant:"danger"},{default:a(()=>[...e[2]||(e[2]=[o("Failed",-1)])],void 0,!0),_:1})):u("",!0)]),"top-right":a(()=>[i.bestEffortStatus!=="Building"?(n(),b("div",z,[f("span",null,[e[3]||(e[3]=o("Built ",-1)),d(s(C),{instant:s(M).fromISO(i.buildStartedAt)},null,8,["instant"])]),d(V,{localizationId:i.id,"trigger-style":"icon"},null,8,["localizationId"])])):(n(),b("div",U,[d(s(c),{variant:"primary"},{default:a(()=>[...e[4]||(e[4]=[o("Building...",-1)])],void 0,!0),_:1})]))]),"bottom-left":a(()=>[f("div",null,S(i.description||"No description available"),1)]),"bottom-right":a(()=>[i.bestEffortStatus!=="Building"?(n(),b("span",P,[f("div",null,[d(s(w),{to:`localizations/diff?newRoot=${i.id}`,"disabled-tooltip":i.bestEffortStatus==="Failed"?"Unable to diff because this localization failed to build.":void 0,"data-testid":"diff-localization"},{default:a(()=>[...e[5]||(e[5]=[o("Diff to active",-1)])],void 0,!0),_:1},8,["to","disabled-tooltip"])]),f("div",null,[d(s(w),{to:L(i.id),"data-testid":"view-localization"},{default:a(()=>[...e[6]||(e[6]=[o("View localization",-1)])],void 0,!0),_:1},8,["to"])]),d(R,{localizationId:i.id,"text-button":""},null,8,["localizationId"])])):u("",!0)]),default:a(()=>[o(S(i.name||"No Name Available"),1)],void 0,!0),_:2},1024)]),_:1},8,["itemList"])}}});export{tt as default};
