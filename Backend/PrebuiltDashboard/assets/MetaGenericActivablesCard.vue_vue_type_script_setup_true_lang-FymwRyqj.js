import{d as k,E as y,H as N,c as v,e as h,o as s,f as t,w as i,j as l,x as u,k as r,a as n,y as O,D as L,B as w,A as b,t as p,v as P}from"./index-jY1EWd09.js";import{M as c,a as m}from"./metaListUtils-B-xQ0HnD.js";import{g as M,a as T}from"./activables-BjU5qyme.js";import{_ as B}from"./MetaActivablePhaseBadge.vue_vue_type_script_setup_true_lang-SumaTD3C.js";import{_ as R}from"./MetaActivablesBaseCard.vue_vue_type_script_setup_true_lang-C4azyES_.js";const $={key:0,class:"tw-italic tw-text-neutral-400"},E={key:1,class:"tw-text-orange-500"},F={key:2},z={key:3,class:"tw-italic tw-text-neutral-400"},V={key:4,class:"tw-italic tw-text-neutral-400"},j={key:1,class:"tw-italic tw-text-neutral-400"},G={key:2,class:"tw-italic tw-text-neutral-400"},H={key:1,class:"tw-italic tw-text-neutral-400"},U={key:2,class:"tw-italic tw-text-neutral-400"},q={key:0},J={key:1,class:"tw-italic tw-text-neutral-400"},Z=k({__name:"MetaGenericActivablesCard",props:{title:{},category:{},emptyMessage:{},customEvaluationIsoDateTime:{},playerId:{},hideDisabled:{type:Boolean},hideConversion:{type:Boolean},longList:{type:Boolean},hideCollapse:{type:Boolean}},setup(o){const d=o,{data:C,refresh:f}=y(N()),{data:D}=y(()=>d.playerId?M(d.playerId,d.customEvaluationIsoDateTime):T(d.customEvaluationIsoDateTime)),x=v(()=>C.value?.activablesMetadata),A=v(()=>x.value?.categories[d.category]?.shortSingularDisplayName),S=["activable.config.displayName","activable.config.displayShortInfo","activable.config.description","phaseDisplayString"],_=v(()=>{const g=[c.asUnsorted(),new c("Phase","phaseSortOrder",m.Ascending),new c("Phase","phaseSortOrder",m.Descending),new c("Name","activable.config.displayName",m.Ascending),new c("Name","activable.config.displayName",m.Descending)];return d.hideConversion||(g.push(new c("Conversion","conversion",m.Ascending)),g.push(new c("Conversion","conversion",m.Descending))),g});return(g,a)=>(s(),h(R,{hideDisabled:o.hideDisabled,hideConversion:o.hideConversion,activables:t(D),playerId:o.playerId,category:o.category,longList:o.longList,emptyMessage:o.emptyMessage,title:o.title,hideCollapse:o.hideCollapse,searchFields:S,sortOptions:_.value,permission:"api.activables.view",onRefreshActivables:t(f)},{collapseContents:i(({item:e})=>[l(t(P),{striped:""},{default:i(()=>[l(t(u),{condensed:""},{"top-right":i(()=>[e.activable.config.activableParams.isEnabled?e.activable.debugState?(s(),n("span",E,"Debug override!")):e.nextPhase?(s(),n("span",F,[l(B,{activable:e.activable,phase:e.nextPhase,playerId:o.playerId,typeName:`${A.value?.toLocaleLowerCase()}`},null,8,["activable","phase","playerId","typeName"]),a[0]||(a[0]=r()),l(t(O),{instant:t(L).fromISO(e.nextPhaseStartTime)},null,8,["instant"])])):e.scheduleStatus?(s(),n("span",z,"None")):(s(),n("span",V,"No schedule")):(s(),n("span",$,"Disabled"))]),default:i(()=>[a[1]||(a[1]=r("Next Schedule Phase",-1))],void 0,!0),_:2},1024),l(t(u),{condensed:""},{"top-right":i(()=>[e.activable.state.hasOngoingActivation&&e.activable.state.activationRemaining!==null?(s(),h(t(w),{key:0,duration:t(b)(e.activable.state.activationRemaining),showAs:"humanizedSentenceCase"},null,8,["duration"])):e.activable.state.hasOngoingActivation?(s(),n("span",j,"Forever")):(s(),n("span",G,"n/a"))]),default:i(()=>[a[2]||(a[2]=r("Lifetime Left",-1))],void 0,!0),_:2},1024),l(t(u),{condensed:""},{"top-right":i(()=>[e.activable.state.isInCooldown&&e.activable.state.cooldownRemaining!==null?(s(),h(t(w),{key:0,duration:t(b)(e.activable.state.cooldownRemaining),showAs:"humanizedSentenceCase"},null,8,["duration"])):e.activable.state.isInCooldown?(s(),n("span",H,"Forever")):(s(),n("span",U,"n/a"))]),default:i(()=>[a[3]||(a[3]=r("Cooldown Left",-1))],void 0,!0),_:2},1024),l(t(u),{condensed:""},{"top-right":i(()=>[r(p(e.activable.state.numActivated)+"/"+p(e.activable.config.activableParams.maxActivations||"∞"),1)]),default:i(()=>[a[4]||(a[4]=r("Activations",-1))],void 0,!0),_:2},1024),l(t(u),{condensed:""},{"top-right":i(()=>[e.activable.state.hasOngoingActivation?(s(),n("span",q,p(e.activable.state.currentActivationNumConsumed)+"/"+p(e.activable.config.activableParams.maxConsumesPerActivation||"∞"),1)):(s(),n("span",J,"n/a"))]),default:i(()=>[a[5]||(a[5]=r("Consumes During Current Activation",-1))],void 0,!0),_:2},1024),l(t(u),{condensed:""},{"top-right":i(()=>[r(p(e.activable.state.totalNumConsumed)+"/"+p(e.activable.config.activableParams.maxTotalConsumes||"∞"),1)]),default:i(()=>[a[6]||(a[6]=r("Total Consumes",-1))],void 0,!0),_:2},1024)],void 0,!0),_:2},1024)]),_:1},8,["hideDisabled","hideConversion","activables","playerId","category","longList","emptyMessage","title","hideCollapse","sortOptions","onRefreshActivables"]))}});export{Z as _};
