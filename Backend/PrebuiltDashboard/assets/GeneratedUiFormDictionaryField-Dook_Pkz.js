import{d as E,N as G,O as B,P as A,h as f,i as D,G as S,a as T,o as n,q as o,j as p,w as r,k as v,e as m,m as g,t as z,f as t,U as J,_ as q,F as H,b as L,n as h,J as F,p as R,T as w}from"./index-B-VT6L6o.js";import{_ as Q}from"./LabelWithLogicVersion.vue_vue_type_script_setup_true_lang-D14uXKK6.js";import{_ as k}from"./GeneratedUiFormDynamicComponent.vue_vue_type_script_setup_true_lang-DFWvQe41.js";const W={class:"mb-1"},X={class:"tw-text-right"},Y={class:"pl-3 pr-3 pt-3 pb-2 bg-light rounded border"},Z={class:"tw-text-right"},le=E({__name:"GeneratedUiFormDictionaryField",props:{...B,value:{type:Object,default:()=>({})}},emits:G,setup(I,{emit:N}){const l=I,V=N,{displayName:$,displayHint:M,update:y}=A(l,V),d=f(""),u=f(""),c=f(),b=f(void 0);D(()=>{if(!l.fieldInfo.typeParams||l.fieldInfo.typeParams.length<2)throw new Error("Dictionary field must have at least 2 type params");d.value=l.fieldInfo.typeParams[0],u.value=l.fieldInfo.typeParams[1],S(u.value).then(e=>{c.value=e.typeKind}).catch(e=>{console.error(JSON.stringify(e))})});function P(e,i,a){const s={...l.fieldInfo};return s.fieldName=e,s.fieldType=i,s.typeKind=a,s}function K(e){b.value=e}function U(e,i){y({...l.value,[e]:i})}function O(){y({...l.value,[b.value]:void 0})}function C(e){const i=Object.fromEntries(Object.entries(l.value).filter(([a,s])=>a!==e));y(i)}return(e,i)=>(n(),T("div",null,[o("div",W,[p(Q,{fieldInfo:e.fieldInfo,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers},{default:r(()=>[v(z(t($)),1),t(M)?(n(),m(t(J),{key:0,class:"ml-2",content:t(M),noUnderline:""},{default:r(()=>[p(t(q),{shape:"pill"},{default:r(()=>i[0]||(i[0]=[v("?",-1)]),void 0,!0),_:1,__:[0]})],void 0,!0),_:1},8,["content"])):g("",!0)],void 0,!0),_:1},8,["fieldInfo","isTargetingMultiplePlayers"]),(n(!0),T(H,null,L(Object.entries(I.value),([a,s],j)=>(n(),T("div",{class:"mb-1",key:j},[o("div",null,[d.value?(n(),m(R,h({key:0},e.$props,{fieldInfo:P("Key",d.value,t(F).Primitive),value:a,fieldPath:e.fieldPath+"/$key$/"+a,"logic-version":e.logicVersion,disabled:e.disabled,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers}),null,16,["fieldInfo","value","fieldPath","logic-version","disabled","isTargetingMultiplePlayers"])):g("",!0)]),o("div",X,[p(t(w),{variant:"danger",size:"small","disabled-tooltip":e.disabled?"This button has been disabled remotely.":void 0,onClick:_=>C(a)},{default:r(()=>i[1]||(i[1]=[v("Remove",-1)]),void 0,!0),_:2,__:[1]},1032,["disabled-tooltip","onClick"])]),o("div",Y,[u.value&&c.value?(n(),m(k,h({key:0},l,{fieldInfo:P("Value",u.value,c.value),value:s,fieldPath:e.fieldPath+"/"+a,"logic-version":e.logicVersion,disabled:e.disabled,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers,onInput:_=>U(a,_)}),null,16,["fieldInfo","value","fieldPath","logic-version","disabled","isTargetingMultiplePlayers","onInput"])):g("",!0)])]))),128))]),o("div",null,[d.value?(n(),m(k,h({key:0},l,{fieldInfo:P("KeyToAdd",d.value,t(F).Primitive),value:b.value,"logic-version":e.logicVersion,disabled:e.disabled,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers,onInput:K}),null,16,["fieldInfo","value","logic-version","disabled","isTargetingMultiplePlayers"])):g("",!0),o("div",Z,[p(t(w),{"disabled-tooltip":e.disabled?"This button has been disabled remotely.":void 0,size:"small",onClick:O},{default:r(()=>i[2]||(i[2]=[v("Add New",-1)]),void 0,!0),_:1,__:[2]},8,["disabled-tooltip"])])])]))}});export{le as default};
