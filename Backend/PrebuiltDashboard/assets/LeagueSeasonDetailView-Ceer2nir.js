import{d as q,by as F,c7 as C,bJ as M,E as w,c as I,c$ as D,r as p,e as v,o,w as t,j as a,f as e,a as T,m as l,ag as R,x as j,k as i,t as u,ae as $,y as h,D as y,q as k,B as J}from"./index-jY1EWd09.js";import{_ as z}from"./LeagueProgressCard.vue_vue_type_script_setup_true_lang-BqfZ-Cfd.js";import{C as G}from"./CoreUiPlacement-BNT2Q2Hu.js";import{a as H,b as K,d as Q}from"./leagues-Dvm7dNz9.js";import{M as W}from"./MSingleColumnLayout-BSf_YwiY.js";import{_ as x}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-Db7v8Vrj.js";import{_ as X,a as Z}from"./MViewContainer.vue_vue_type_script_setup_true_lang-C_1W2rCL.js";import"./leagueUtils-BqF6ffxm.js";import"./progress-CmZZuji0.js";const ee={key:0},te={class:"mt-2"},ae={class:"font-weight-bold tw-mb-1"},se={key:0,class:"tw-mt-3"},pe=q({__name:"LeagueSeasonDetailView",setup(re){const c=F(),{isDeveloperUiEnabled:N}=R();if(c.params.leagueId===void 0)throw new Error("leagueId route param is required.");const d=C(c.params.leagueId);if(c.params.seasonId===void 0)throw new Error("seasonId route param is required.");const _=Number(C(c.params.seasonId)),S=isFinite(_)?void 0:new M("Invalid season ID",`Season ID must be a number, not '${c.params.seasonId.toString()}'.`),{data:m}=w(H(d)),{data:s,error:L}=w(()=>S?void 0:K(d,_)),{data:E}=w(()=>S?void 0:Q(d,_)),O=I(()=>S??L.value),A=I(()=>{const g=[];return D(m.value)&&D(s.value)&&(s.value.isCurrent===!1&&g.push({title:"Past Season",message:V.value,variant:"neutral"}),s.value.isCurrent===!0&&m.value.state.currentSeason.endedEarly===!0&&g.push({title:"Season Ended Early",message:"This season ended before its configured schedule.",variant:"warning"}),s.value.isCurrent===!0&&m.value.state.currentSeason.startedEarly===!0&&g.push({title:"Season Started Early",message:"This season started before its configured schedule.",variant:"warning"})),g}),V=I(()=>s.value?.startedEarly===!0&&s.value?.endedEarly===!1?"You are currently viewing a season that has already ended. This season started before its configured schedule.":s.value?.startedEarly===!1&&s.value?.endedEarly===!0?"You are currently viewing a season that has already ended. This season ended before its configured schedule.":s.value?.startedEarly===!0&&s.value?.endedEarly===!0?"You are currently viewing a season that has already ended. This season started and ended before its configured schedule.":"You are currently viewing a season that has already ended.");return(g,r)=>{const B=p("fa-icon"),n=p("b-td"),f=p("b-tr"),P=p("b-tbody"),U=p("b-table-simple"),Y=p("meta-list-card");return o(),v(e(Z),{"is-loading":!e(s),error:O.value,alerts:A.value,permission:"api.leagues.view"},{overview:t(()=>[a(e(X),{title:e(s).displayName,"data-testid":"league-season-detail-overview-card"},{subtitle:t(()=>[e(m)?(o(),T("div",ee,[a(e($),{to:`/leagues/${e(d)}`},{default:t(()=>[i(u(e(m).details.leagueDisplayName),1)],void 0,!0),_:1},8,["to"]),i(" / "+u(e(s).displayName),1)])):l("",!0),k("p",te,u(e(s).description),1)]),default:t(()=>[k("div",ae,[a(B,{icon:"chart-bar"}),r[0]||(r[0]=i(" Overview",-1))]),a(U,{small:""},{default:t(()=>[a(P,null,{default:t(()=>[e(s).isCurrent?l("",!0):(o(),v(f,{key:0},{default:t(()=>[a(n,null,{default:t(()=>[...r[1]||(r[1]=[i("Start",-1)])],void 0,!0),_:1}),a(n,{class:"tw-text-right"},{default:t(()=>[a(e(h),{instant:e(y).fromISO(e(s).startTime),showAs:"dateTime"},null,8,["instant"])],void 0,!0),_:1})],void 0,!0),_:1})),e(s).isCurrent?l("",!0):(o(),v(f,{key:1},{default:t(()=>[a(n,null,{default:t(()=>[...r[2]||(r[2]=[i("End",-1)])],void 0,!0),_:1}),a(n,{class:"tw-text-right"},{default:t(()=>[a(e(h),{instant:e(y).fromISO(e(s).endTime),showAs:"dateTime"},null,8,["instant"])],void 0,!0),_:1})],void 0,!0),_:1})),e(s).isCurrent?l("",!0):(o(),v(f,{key:2},{default:t(()=>[a(n,null,{default:t(()=>[...r[3]||(r[3]=[i("Duration",-1)])],void 0,!0),_:1}),a(n,{class:"tw-text-right"},{default:t(()=>[a(e(J),{duration:e(y).fromISO(e(s).endTime).diff(e(y).fromISO(e(s).startTime)),showAs:"exactDuration"},null,8,["duration"])],void 0,!0),_:1})],void 0,!0),_:1})),a(f,null,{default:t(()=>[a(n,null,{default:t(()=>[...r[4]||(r[4]=[i("Total participants",-1)])],void 0,!0),_:1}),a(n,{class:"text-right"},{default:t(()=>[i(u(e(s).totalParticipantCount),1)],void 0,!0),_:1})],void 0,!0),_:1}),a(f,null,{default:t(()=>[a(n,null,{default:t(()=>[...r[5]||(r[5]=[i("First-time participants",-1)])],void 0,!0),_:1}),a(n,{class:"text-right"},{default:t(()=>[i(u(e(s).newParticipantCount),1)],void 0,!0),_:1})],void 0,!0),_:1}),e(s).isCurrent?l("",!0):(o(),v(f,{key:3},{default:t(()=>[a(n,null,{default:t(()=>[...r[6]||(r[6]=[i("Dropped at season's end",-1)])],void 0,!0),_:1}),a(n,{class:"text-right"},{default:t(()=>[i(u(e(s).numDropped),1)],void 0,!0),_:1})],void 0,!0),_:1})),e(s).isCurrent?(o(),v(f,{key:4},{default:t(()=>[a(n,{colspan:"2"},{default:t(()=>[e(m)&&e(m).enabled?(o(),v(z,{key:0,leagueId:e(d)},null,8,["leagueId"])):l("",!0)],void 0,!0),_:1})],void 0,!0),_:1})):l("",!0)],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1},8,["title"])]),default:t(()=>[a(e(W),null,{default:t(()=>[a(G,{placementId:"Leagues/Season/Details",leagueId:e(d),seasonId:e(_)},null,8,["leagueId","seasonId"]),e(N)?(o(),T("div",se,[a(Y,{title:"Recently Active Divisions","item-list":e(E),"empty-message":"No recently active divisions in this season.",description:"This card is only visible in the developer UI mode."},{"item-card":t(({item:b})=>[a(e(j),null,{"bottom-left":t(()=>[r[7]||(r[7]=i("Created ",-1)),a(e(h),{instant:e(y).fromISO(b.createdAt)},null,8,["instant"]),r[8]||(r[8]=i(".",-1))]),"top-right":t(()=>[i(u(b.participants)+" participants",1)]),"bottom-right":t(()=>[a(e($),{link:"",to:`/leagues/${e(d)}/${e(_)}/${b.entityId}`,permission:"api.leagues.view"},{default:t(()=>[...r[9]||(r[9]=[i("View division",-1)])],void 0,!0),_:1},8,["to"])]),default:t(()=>[i(u(b.displayName),1)],void 0,!0),_:2},1024)]),_:1},8,["item-list"])])):l("",!0)],void 0,!0),_:1}),a(e(x),{data:e(s),label:"singleLeagueSeasonData"},null,8,["data"]),a(e(x),{data:e(E),label:"activeDivisionsData"},null,8,["data"])],void 0,!0),_:1},8,["is-loading","error","alerts"])}}});export{pe as default};
