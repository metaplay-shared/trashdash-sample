import{d as k,r as I,e as o,o as n,w as t,f as s,x as d,q as P,k as l,t as r,bF as U,m as f,U as y,j as g,bs as D}from"./index-jY1EWd09.js";import{_ as z}from"./MInputSingleSelectAsyncDropdown.vue_vue_type_script_setup_true_lang-Cv9GNsej.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";import"./debounce-DkFP0rfT.js";import"./isSymbol-B-tfGeoT.js";const C=k({__name:"MetaInputPlayerSelect",props:{label:{},value:{},ignorePlayerIds:{}},emits:["input"],setup(u,{emit:b}){const c=u,w=b,x=D();async function S(p,a,i){const v=(await x.get(`/players/?query=${encodeURIComponent(p)}&count=${a}`)).data.map(m=>({label:m.name,value:m,disabled:c.ignorePlayerIds?c.ignorePlayerIds.includes(m.id):!1}));return{options:v,hasMoreData:v.length===a,requestToken:i}}return(p,a)=>{const i=I("fa-icon");return n(),o(s(z),{"min-height":"4rem","model-value":u.value,"search-function":S,placeholder:"Search for a player...",label:u.label,"onUpdate:modelValue":a[0]||(a[0]=e=>w("input",e)),"data-testid":"input-player-select"},{option:t(({option:e})=>[e.value?.lifecycleStatus==="Uninitialized"?(n(),o(s(d),{key:0,class:"!tw-p-0"},{"top-right":t(()=>[l(r(e.value?.id),1)]),"bottom-left":t(()=>[...a[1]||(a[1]=[l("Player not initialized!",-1)])]),default:t(()=>[a[2]||(a[2]=P("span",{class:"tw-text-neutral-500"},"ðŸš« Uninitialized",-1))],void 0,!0),_:2},1024)):e.value?.lifecycleStatus==="Deleted"?(n(),o(s(d),{key:1,class:"!tw-p-0 tw-text-red-800"},{"top-right":t(()=>[l(r(e.value.id),1)]),"bottom-left":t(()=>[...a[3]||(a[3]=[l("Player deleted",-1)])]),default:t(()=>[a[4]||(a[4]=l("â˜ ï¸ Deleted",-1))],void 0,!0),_:2},1024)):e.value?.deserializedSuccessfully?(n(),o(s(d),{key:3,class:"!tw-p-0"},{badge:t(()=>[e.value?.totalIapSpend>0?(n(),o(s(y),{key:0,content:"Total IAP spend: $"+e.value.totalIapSpend.toFixed(2),noUnderline:""},{default:t(()=>[g(i,{class:"tw-text-neutral-500",icon:"money-check-alt",size:"sm"})],void 0,!0),_:1},8,["content"])):f("",!0),e.value?.isDeveloper?(n(),o(s(y),{key:1,content:"This player is a developer.",noUnderline:""},{default:t(()=>[g(i,{class:"tw-text-neutral-500",icon:"user-astronaut",size:"sm"})],void 0,!0),_:1})):f("",!0)]),"top-right":t(()=>[l(r(e.value?.id),1)]),"bottom-left":t(()=>[l("Level "+r(e.value?.level),1)]),"bottom-right":t(()=>[l("Joined "+r(s(U)(e.value.createdAt)),1)]),default:t(()=>[l(r(e.value?.name),1)],void 0,!0),_:2},1024)):(n(),o(s(d),{key:2,class:"!tw-p-0 tw-text-red-800"},{"top-right":t(()=>[l(r(e.value?.id),1)]),"bottom-left":t(()=>[...a[5]||(a[5]=[l("Failed to load player!",-1)])]),default:t(()=>[l("ðŸ›‘ "+r(e.value?.name),1)],void 0,!0),_:2},1024))]),_:1},8,["model-value","label"])}}});export{C as default};
