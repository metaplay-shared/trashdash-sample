import{d as U,h as H,e as T,o as k,ah as Ue,I as ut,w,a7 as he,j as _,a as y,m as R,k as C,bE as ct,Q as N,q as u,E as O,dN as ye,c as E,K as dt,af as pt,r as Y,f,b as j,t as b,F as M,T as ht,dO as gt,bs as ft,x as le,_ as q,dP as _e,ae as fe,a4 as me,c_ as Fe,B as Qe,D as K,y as Ge,bk as te,l as ke,cl as Pe,s as mt,bg as kt,cb as We,cC as wt,bj as xt,v as bt,ab as vt,a8 as yt,a9 as _t,bl as ae}from"./index-jY1EWd09.js";import{_ as De}from"./MAbbreviateNumber.vue_vue_type_script_setup_true_lang-C_9AAI8F.js";import{_ as Ke}from"./MModal.vue_vue_type_script_setup_true_lang-ExCsmaRE.js";import{_ as St}from"./MInputText.vue_vue_type_script_setup_true_lang-Wwv8TYAB.js";import{_ as $t}from"./MActionModalButton.vue_vue_type_script_setup_true_lang-CTycXHot.js";import Xe from"./MetaListCard-1ZrdC8ii.js";import{M as ge,a as Le,b as Oe,c as V}from"./metaListUtils-B-xQ0HnD.js";import{_ as we}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-Db7v8Vrj.js";import{_ as Tt}from"./UpdatingMetricCard.vue_vue_type_script_setup_true_lang-Fn8Ia8Z3.js";import{_ as Ct}from"./MTabLayout.vue_vue_type_script_setup_true_lang-B1ekLQtC.js";import{M as Me}from"./MSingleColumnLayout-BSf_YwiY.js";import{_ as Rt}from"./MTwoColumnLayout.vue_vue_type_script_setup_true_lang-B5zJm1QQ.js";import{_ as Nt,a as At}from"./MViewContainer.vue_vue_type_script_setup_true_lang-C_1W2rCL.js";import"./numberUtils-CkF0oMe2.js";import"./index-qe4CXcF2.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";import"./debounce-DkFP0rfT.js";import"./isSymbol-B-tfGeoT.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-CihjvaoM.js";import"./utils-B01yCWQ7.js";import"./_baseIteratee-FGZghVLZ.js";import"./identity-DKeuBCMA.js";import"./MInputMultiSelectCheckbox.vue_vue_type_script_setup_true_lang-BmEacL49.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-Bzg4Lkt_.js";import"./MInputSingleSelectRadio-BM2VfYc3.js";import"./index-Dec9dGh3.js";import"./button-group-DH69WWlM.js";import"./MetricCard.vue_vue_type_script_setup_true_lang-BKnfkWX-.js";import"./MPlot.vue_vue_type_script_setup_true_lang-BKfTeSAz.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-CqJL3vnO.js";const It={key:0},Et=U({__name:"MCollapseCard",props:{title:{},subtitle:{},badge:{}},setup(n){const e=H(!1);return(s,r)=>(k(),T(Ue,{title:n.title,subtitle:n.subtitle,badge:n.badge,badgeVariant:e.value?"primary":"neutral",clickableHeader:"",noBodyPadding:"",onHeaderClick:r[0]||(r[0]=t=>e.value=!e.value)},ut({subtitle:w(()=>[he(s.$slots,"subtitle")]),icon:w(()=>[(k(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:N(["tw-w-5 tw-h-5 tw-transition-transform tw-relative",{"tw-rotate-90":e.value}]),style:{bottom:"1px"}},[...r[1]||(r[1]=[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"},null,-1)])],2))]),default:w(()=>[_(ct,null,{default:w(()=>[e.value?(k(),y("div",It,[he(s.$slots,"default",{},()=>[r[2]||(r[2]=C("Content TBD",-1))])])):R("",!0)],void 0,!0),_:3})],void 0,!0),_:2},[s.$slots["header-right"]?{name:"header-right",fn:w(()=>[he(s.$slots,"header-right")]),key:"0"}:void 0]),1032,["title","subtitle","badge","badgeVariant"]))}}),zt={class:"tw-flex tw-justify-end tw-space-x-2"},Pt={class:"tw-divide-y tw-divide-neutral-200 tw-rounded-md tw-border tw-border-neutral-300",style:{"font-size":"0.8rem"}},Dt={key:0},Lt={class:"tw-text-base tw-font-semibold"},Ot={class:"tw-grid tw-gap-x-6 tw-space-y-0.5 sm:tw-grid-cols-2 lg:tw-grid-cols-3"},Mt={class:"tw-break-words"},Bt={class:"text-monospace tw-flex-none"},qt={key:1,class:"tw-text-sm tw-font-semibold tw-text-neutral-500"},jt=U({__name:"DatabaseItemsCard",setup(n){const e=ft(),{data:s,hasPermission:r,error:t}=O(ye()),l=E(()=>s.value?.options.values),a=H(),p=E(()=>{if(!s.value)return{};const x={};for(const v of Object.keys(s.value.shardItemCounts)){const z=s.value.shardItemCounts[v];x[v]=z.reduce((Q,G)=>Q+G,0)}return x}),i=H(""),h=H(!1),o=H(""),c=H("primary");dt(i,()=>{h.value=null,o.value="",i.value?gt(i.value)?(c.value="loading",e.get(`/entities/${i.value}/exists`).then(x=>{const v=x.data;h.value=v,c.value=v?"success":"danger",o.value=v?"":"Entity does not exist."})):(h.value=!1,o.value="Not a valid entity ID.",c.value="danger"):(h.value=null,o.value="",c.value="primary")});function d(){i.value="",h.value=null,o.value=""}const m=pt();function g(){m.push(`/entities/${i.value}/dbinfo`)}return(x,v)=>{const z=Y("b-td"),Q=Y("b-tr"),G=Y("b-tbody"),re=Y("b-table-simple");return k(),T(f(Ue),{title:"Database Items","data-testid":"database-items"},{default:w(()=>[v[4]||(v[4]=u("span",{class:"tw-font-semibold"},"Totals",-1)),_(re,{class:"tw-mt-1",small:""},{default:w(()=>[_(G,null,{default:w(()=>[(k(!0),y(M,null,j(p.value,(W,I)=>(k(),T(Q,{key:I},{default:w(()=>[_(z,null,{default:w(()=>[C(b(I),1)],void 0,!0),_:2},1024),_(z,{class:"tw-text-right"},{default:w(()=>[_(f(De),{number:W},null,8,["number"])],void 0,!0),_:2},1024)],void 0,!0),_:2},1024))),128))],void 0,!0),_:1})],void 0,!0),_:1}),u("div",zt,[f(s)?(k(),T(f(ht),{key:0,onClick:a.value?.open},{default:w(()=>[...v[1]||(v[1]=[C("Show Items per Shard",-1)])],void 0,!0),_:1},8,["onClick"])):R("",!0),_(f(Ke),{ref_key:"databaseStatusModal",ref:a,title:"Database Items per Shard","modal-size":"large"},{default:w(()=>[u("ul",Pt,[(k(!0),y(M,null,j(l.value.shards,(W,I)=>(k(),y("li",{class:"tw-px-3 tw-py-3 even:tw-bg-neutral-100",key:I},[I<f(s).numShards?(k(),y("div",Dt,[u("div",Lt,"Shard #"+b(I),1),u("div",Ot,[(k(!0),y(M,null,j(f(s).shardItemCounts,(B,ze)=>(k(),y("div",{key:`counts-${ze}`},[u("div",{class:N(["tw-flex tw-flex-wrap tw-justify-between tw-gap-x-2",B[I]>0?"":"text-muted"])},[u("span",Mt,b(ze),1),u("span",Bt,[_(f(De),{number:B[I]},null,8,["number"])])],2)]))),128))])])):(k(),y("div",qt,"Shard #"+b(I)+" inactive",1))]))),128))])],void 0,!0),_:1},512),_(f($t),{"modal-title":"Inspect an Entity",action:g,"trigger-button-label":"Inspect Entity","ok-button-label":"Inspect","ok-button-disabled-tooltip":h.value?void 0:"Enter a valid Entity ID to proceed.","disable-safety-lock":"",permission:"api.database.inspect_entity",onShow:d,"data-testid":"inspect-entity"},{default:w(()=>[v[2]||(v[2]=u("p",{class:"tw-mb-3"},"Entity inspection loads the stored data for the chosen entity and deserializes it into a human readable form without affecting the actual data.",-1)),v[3]||(v[3]=u("span",{class:"tw-text-xs+ tw-text-neutral-500"},"Inspecting the raw data of an entity may help you spot problems with the related actor, as you can see the data before any potential mutations during wake-up.",-1)),_(f(St),{class:"tw-mt-4",label:"Entity ID","model-value":i.value,variant:c.value,"hint-message":h.value===!1?o.value:void 0,placeholder:"Player:000000003v",debounce:300,"onUpdate:modelValue":v[0]||(v[0]=W=>i.value=W),"data-testid":"entity-id-input"},null,8,["model-value","variant","hint-message"])],void 0,!0),_:1},8,["ok-button-disabled-tooltip"])])],void 0,!0),_:1})}}}),Vt={key:0},Ht={key:1},Zt=U({__name:"DatabaseShardsCard",setup(n){const{data:e,hasPermission:s,error:r}=O(ye()),t=E(()=>e.value?.options.values),l=E(()=>e.value?.mySqlConnectionPoolMaxSize),a=E(()=>t.value?.shards);return(p,i)=>(k(),T(f(Xe),{title:"Database Shards",icon:"database",itemList:a.value,permission:"api.database.status","data-testid":"database-shards"},{description:w(()=>[i[0]||(i[0]=C("The database type for this environment is ",-1)),_(f(q),{variant:"primary"},{default:w(()=>[C(b(t.value.backend),1)],void 0,!0),_:1}),i[1]||(i[1]=C(".",-1))]),"item-card":w(({item:h,index:o})=>[_(f(le),null,{"top-right":w(()=>[C(b(h.userId),1)]),"bottom-left":w(()=>[t.value.backend==="MySql"?(k(),y("div",Vt,[u("div",null,"Database: "+b(h.databaseName),1),u("div",null,"RW host: "+b(h.readWriteHost),1),u("div",null,"RO host: "+b(h.readOnlyHost),1),u("div",null,"Max connections: "+b(l.value),1)])):R("",!0),t.value.backend==="Sqlite"?(k(),y("div",Ht,[u("div",null,"File path: "+b(h.filePath),1)])):R("",!0)]),default:w(()=>[C(b("#"+o),1)],void 0,!0),_:2},1024)]),_:1},8,["itemList"]))}}),Ut={class:"tw-mb-2 tw-text-neutral-500"},Ft={class:"tw-w-full tw-table-auto"},Qt={class:"tw-divide-y tw-divide-neutral-200 tw-border-t tw-border-neutral-200 *:*:tw-py-1"},Gt={class:"tw-text-right"},Wt={class:"tw-text-right"},Kt={class:"tw-text-right"},Xt={key:0},Jt={key:1},Yt={class:"tw-text-right"},es={class:"tw-text-right"},ts={key:0},ss={class:"tw-grid tw-grid-flow-row tw-gap-x-6 @md:tw-grid-cols-2"},ns={class:"tw-break-words"},rs={class:"text-monospace tw-flex-none"},as={key:1,class:"tw-text-neutral-400"},is={class:"tw-font-semibold"},ls={class:"tw-space-y-2"},os={class:"tw-mt-2 tw-max-h-72 tw-overflow-scroll tw-rounded-md tw-border tw-border-neutral-300 tw-bg-neutral-100 tw-p-3 tw-text-xs"},us={key:0,class:"tw-font-mono tw-text-neutral-500"},cs={key:1,class:"tw-text-neutral-500"},ds=U({__name:"ManageNodeButton",props:{nodeSetIndex:{},nodeName:{},dataTestid:{}},setup(n){const e=n,{data:s}=O(_e()),r=E(()=>s.value?.nodeSets[e.nodeSetIndex]),t=E(()=>r.value?.nodes.find(o=>o.name===e.nodeName)),l=H(),a=E(()=>Object.fromEntries(Object.entries(t.value?.rawNodeData.liveEntityCounts??{}).sort((o,c)=>o[0].localeCompare(c[0]))));function p(o){return o==="HardLimit"||o==="NotConnected"||o==="unknown"?"tw-text-red-500":o==="ExpectedNotConnected"?"tw-text-neutral-400":void 0}function i(o){return o==="NotConnected"?"Failed to connect":o==="ExpectedNotConnected"?"Inactive":ke(o)}function h(o){return r.value?.scalingMode==="Static"?"None":o.nodeStatus==="NotConnected"||o.nodeStatus==="ExpectedNotConnected"?"Idle":ke(o.nodeScalingState)}return(o,c)=>t.value?(k(),T(f(fe),{key:0,onClick:l.value?.open,"data-testid":`${n.dataTestid}-button`},{default:w(()=>[c[17]||(c[17]=C("View node",-1)),_(f(Ke),{ref_key:"nodeManageModal",ref:l,title:`View ${f(me)(n.nodeName)} Node`,"data-testid":`${n.dataTestid}-modal`},{"right-panel":w(()=>[u("div",is,[c[12]||(c[12]=C("Workload Data ",-1)),_(f(te),{contents:t.value.rawNodeData.rawWorkload?JSON.stringify(t.value.rawNodeData.rawWorkload):void 0},null,8,["contents"])]),c[14]||(c[14]=u("div",{class:"tw-text-xs+ tw-text-neutral-500"},"The raw workload data for this node. This provides details about how the system's autoscaling is configured.",-1)),u("div",ls,[u("div",os,[t.value.rawNodeData.rawWorkload?(k(),y("pre",us,b(t.value.rawNodeData.rawWorkload),1)):(k(),y("div",cs,[...c[13]||(c[13]=[u("span",{class:"tw-mx-auto tw-text-xs+"},"No data available.",-1)])]))])])]),default:w(()=>[u("div",Ut,[c[1]||(c[1]=C("View a summary of the systems currently running on this node.",-1)),c[2]||(c[2]=u("span",{class:"tw-mx-1"},"For detailed insights into the performance and workload, check the",-1)),_(f(fe),{to:t.value.grafanaLogUrl?t.value.grafanaLogUrl:void 0,permission:"dashboard.grafana.view","disabled-tooltip":t.value.grafanaLogUrl?void 0:"Grafana is not enabled for this environment.",target:"_blank","data-testid":"view-grafana-logs-button"},{default:w(()=>[...c[0]||(c[0]=[C("Grafana logs",-1)])],void 0,!0),_:1},8,["to","disabled-tooltip"]),c[3]||(c[3]=u("span",null,".",-1))]),u("table",Ft,[u("tbody",Qt,[u("tr",null,[c[4]||(c[4]=u("td",null,"Status",-1)),u("td",{class:N(["tw-text-right",p(t.value.nodeStatus)])},b(i(t.value.nodeStatus)),3)]),u("tr",null,[c[5]||(c[5]=u("td",null,"Scaling",-1)),u("td",Gt,b(h(t.value)),1)]),u("tr",null,[c[6]||(c[6]=u("td",null,"Phase",-1)),u("td",Wt,b(t.value.rawNodeData.clusterLocalPhase||"Unknown"),1)]),u("tr",null,[c[8]||(c[8]=u("td",null,"Uptime",-1)),u("td",Kt,[f(Fe)(t.value.serverStartedAt)?(k(),y("span",Jt,"Not available")):(k(),y("span",Xt,[_(f(Qe),{duration:f(K).utc().diff(f(K).fromISO(t.value.serverStartedAt)),"show-as":"humanizedSentenceCase","disable-tooltip":""},null,8,["duration"]),c[7]||(c[7]=u("span",{class:"tw-mx-1"},"since",-1)),_(f(Ge),{instant:f(K).fromISO(t.value.serverStartedAt),"show-as":"dateTime","hide-milliseconds":""},null,8,["instant"])]))])]),u("tr",null,[c[9]||(c[9]=u("td",null,"Public IP",-1)),u("td",Yt,[C(b(t.value.publicIp||"Not available")+" ",1),t.value.publicIp?(k(),T(f(te),{key:0,contents:JSON.stringify(t.value.publicIp)},null,8,["contents"])):R("",!0)])]),u("tr",null,[c[10]||(c[10]=u("td",null,"Host",-1)),u("td",es,[C(b(t.value.nodeAddress)+" ",1),t.value.nodeAddress?(k(),T(f(te),{key:0,contents:t.value.nodeAddress},null,8,["contents"])):R("",!0)])])])]),c[15]||(c[15]=u("div",{class:"tw-mt-2 tw-font-semibold"},"Hosted Entities",-1)),c[16]||(c[16]=u("p",{class:"tw-mb-2 tw-text-neutral-500"},"The entities of each type currently running on this node.",-1)),t.value.rawNodeData.liveEntityCounts?(k(),y("ul",ts,[u("div",ss,[(k(!0),y(M,null,j(a.value,(d,m)=>(k(),y("div",{key:m},[u("div",{class:N(["tw-flex tw-flex-wrap tw-justify-between tw-gap-x-2",{"tw-text-neutral-400":d===0}])},[u("span",ns,b(m),1),u("span",rs,b(d),1)],2)]))),128))])])):(k(),y("div",as,[...c[11]||(c[11]=[u("span",{class:"tw-m-auto tw-text-xs+"},"No data available",-1)])]))],void 0,!0),_:1},8,["title","data-testid"])],void 0,!0),_:1},8,["onClick","data-testid"])):R("",!0)}}),ps={key:0,class:"tw-space-x-1"},hs={key:1,class:"tw-space-x-1"},gs={class:"tw-flex tw-flex-col tw-space-y-1 tw-text-xs tw-text-neutral-500"},fs={key:0},ms={key:1},ks={key:0},ws={class:"bg-light rounded border tw-m3"},xs={class:"tw-my-2 tw-px-5","data-testid":"node-set-item-entities"},bs={class:"tw-grid tw-gap-x-6 tw-pt-1 tw-text-xs+ @md:tw-grid-cols-2 @lg:tw-grid-cols-3"},vs={class:"tw-break-words"},ys={class:"text-monospace tw-flex-none"},_s={key:0},Ss={class:"tw-divide-y tw-divide-neutral-200 tw-border-t tw-border-neutral-200 *:*:tw-py-1"},$s={class:"tw-text-right"},Ts={key:0},Cs={key:1},Rs={class:"tw-text-right"},Ns={class:"tw-text-right"},As=U({__name:"NodeSetsCard",setup(n){const{data:e}=O(_e()),s=E(()=>e.value?e.value.nodeSets:[]);function r(d){let m,g,x;return d.mostSevereStatus==="NotConnected"?(m="Failed to connect",g="One or more nodes in this set are no longer reachable. Please investigate the issue and contact your DevOps team for assistance.",x="tw-text-red-500"):d.mostSevereStatus==="HardLimit"?(m="Hard limit reached",g="This node set is operating as expected but one or more nodes have reached their hard limit. Consider adjusting resources or provisioning additional nodes.",x="tw-text-red-500"):d.mostSevereStatus==="SoftLimit"?(m="Soft limit reached",g="This node set is operating as expected but one or more nodes have reached their soft limit.",x="tw-text-neutral-500"):d.mostSevereStatus==="Perfect"?(m="Perfect",g="All nodes in this set are operating as expected.",x="tw-text-neutral-500"):d.mostSevereStatus==="ExpectedNotConnected"?(m="Inactive",g="This node set is currently inactive.",x="tw-text-neutral-400"):(m="Unknown Status",g="This node set is in an unknown state. This is unexpected and should be investigated. Contact your DevOps team for support.",x="tw-text-red-500"),{title:m,description:g,textVariant:x}}function t(d){let m,g,x;return d.mostSevereStatus==="NotConnected"?(m="Failed to connect",g="One or more nodes in this set are no longer reachable. Please investigate and contact your DevOps team for assistance.",x="tw-text-red-500"):d.mostSevereStatus==="HardLimit"?(m="Hard limit reached",d.scalingState==="ScalingUp"?g="This node set is working as expected, but one or more nodes have reached their hard limit and are attempting to scale up. This might indicate sudden load or an issue occurred while provisioning new nodes. Please investigate this issue or contact your DevOps team for support.":d.scalingState==="ScalingDown"?g="This node set is working as expected but one or more nodes have reached their hard limit. The system is scaling down to reduce resource usage.":g="This node set is working as expected but one or more nodes have reached their hard limit and no more nodes can be added. Consider adjusting resources or provisioning additional nodes.",x="tw-text-red-500"):d.mostSevereStatus==="SoftLimit"?(m="Soft limit reached",d.scalingState==="ScalingUp"?g="The node set is working as expected but one or more nodes have reached their soft limit. The system is scaling up to handle increased demand.":d.scalingState==="ScalingDown"?(g="One or more nodes have reached their soft limit. The system is scaling down to reduce resource usage, this is unexpected and could cause further issues. Please investigate this issue or contact your DevOps team for support.",x="tw-text-red-500"):g="This node set is working as expected but one or more nodes have reached their soft limit.",x="tw-text-neutral-500"):d.mostSevereStatus==="Perfect"?(m="Perfect",d.scalingState==="ScalingUp"?g="All nodes in this set are working as expected and the system is scaling up to manage increased demand.":d.scalingState==="ScalingDown"?g="All nodes in this set are working as expected and the system is scaling down to reduce resource usage.":d.scalingState==="AtMaxNodeCount"?g="All nodes are working as expected, but the maximum node count has been reached. Consider adjusting resources or provisioning additional nodes.":g="All nodes in this set are working as expected and there is additional capacity available.",x="tw-text-neutral-500"):d.mostSevereStatus==="ExpectedNotConnected"?(m="Inactive",g="This node set is currently inactive.",x="tw-text-neutral-300"):(m="Unknown",g="This node set is in an unknown state. This is unexpected and should be investigated. Contact your DevOps team for support.",x="tw-text-red-500"),{title:m,description:g,textVariant:x}}function l(d){const m=d.nodeStatus,g=d.rawNodeData.clusterLocalPhase??void 0;return m==="NotConnected"?{message:"Error: This node has failed to connect.",textVariant:"tw-text-red-500"}:m==="ExpectedNotConnected"?{message:"This node is not active.",textVariant:"tw-text-neutral-300"}:g==="Terminated"?{message:"This node is no longer active.",textVariant:"tw-text-neutral-300"}:g==="Starting"?{message:"This node is starting up.",textVariant:"tw-text-neutral-500"}:m==="HardLimit"?{message:"This node has reached its hard limit.",textVariant:"tw-text-red-500"}:m==="SoftLimit"?{message:"This node has reached its soft limit.",textVariant:"tw-text-neutral-500"}:m==="Perfect"?{message:"This node is operating as expected.",textVariant:"tw-text-neutral-500"}:{message:"Error: This node is in an unknown state.",textVariant:"tw-text-red-500"}}function a(d,m){if(m.rawNodeData.clusterLocalPhase==="Running"){if(d.scalingMode==="Static")return"Running";{const g=m.rawNodeData.scalingNodeState;return g==="Working"?"Running":g==="Killing"?"Terminating":void 0}}else return m.rawNodeData.clusterLocalPhase==="Starting"?"Starting":m.rawNodeData.clusterLocalPhase?me(m.rawNodeData.clusterLocalPhase):void 0}function p(d){return Object.fromEntries(Object.entries(d).sort((m,g)=>m[0].localeCompare(g[0])))}const i=["entityKinds"],h=[new Oe("scalingMode",[new V("Static",d=>d.scalingMode==="Static"),new V("Dynamic",d=>d.scalingMode==="DynamicLinear")]),new Oe("status",[new V("Not Connected",d=>d.mostSevereStatus==="NotConnected"),new V("Inactive",d=>d.mostSevereStatus==="ExpectedNotConnected"),new V("Hard Limit",d=>d.mostSevereStatus==="HardLimit"),new V("Soft Limit",d=>d.mostSevereStatus==="SoftLimit"),new V("Perfect",d=>d.mostSevereStatus==="Perfect")])];function o(d){return d.name}const c=[ge.asUnsorted(),new ge("Name","name",Le.Ascending),new ge("Name","name",Le.Descending)];return(d,m)=>f(e)?(k(),T(f(Xe),{key:0,title:"All Nodes",itemList:s.value,searchFields:i,searchPlaceholder:"Search by entity type...",filterSets:h,sortOptions:c,getItemKey:o,emptyMessage:"No nodes found.","data-testid":"node-sets"},{"item-card":w(({item:g,index:x})=>[_(f(mt),{extraMListItemMargin:""},{header:w(()=>[_(f(le),{noLeftPadding:"","data-testid":"node-set-item"},{"bottom-left":w(()=>[g.scalingMode==="Static"?(k(),y("div",ps,[u("span",{class:N(["tw-text-xs+ tw-my-1 tw-font-semibold",r(g).textVariant])},b(r(g).title)+":",3),u("span",{class:N(["tw-text-xs+ tw-my-1",r(g).textVariant])},b(r(g).description),3)])):(k(),y("div",hs,[u("span",{class:N(["tw-text-xs+ tw-my-1 tw-font-semibold",t(g).textVariant])},b(t(g).title)+":",3),u("span",{class:N(["tw-text-xs+ tw-my-1",t(g).textVariant])},b(t(g).description),3)]))]),"bottom-right":w(()=>[u("div",gs,[g.scalingMode==="Static"?(k(),y("span",fs,b(f(Pe)(g.connectedNodes,"Node","Nodes"))+" "+b(g.connectedNodes)+" / "+b(g.maxNodeCount),1)):(k(),y("span",ms,b(f(Pe)(g.connectedNodes,"Node","Nodes"))+" "+b(g.connectedNodes)+" / "+b(g.maxNodeCount),1)),u("span",null,"Entity types "+b(Object.keys(g.aggregatedLiveEntityCounts).length),1)])]),default:w(()=>[u("span",{class:N([{"tw-text-neutral-400":g.mostSevereStatus==="ExpectedNotConnected"}])},b(f(ke)(g.name)),3)],void 0,!0),_:2},1024)]),default:w(()=>[g?(k(),y("ul",ks,[u("div",ws,[u("li",xs,[m[0]||(m[0]=u("span",{class:"tw-text-sm tw-font-semibold"},"Current Entities",-1)),u("div",bs,[(k(!0),y(M,null,j(p(g.aggregatedLiveEntityCounts),(v,z)=>(k(),y("div",{key:z},[u("div",{class:N(["tw-flex tw-flex-wrap tw-justify-between tw-gap-x-2",{"tw-text-neutral-400":v===0}])},[u("span",vs,b(z),1),u("span",ys,b(v),1)],2)]))),128))])])]),g.nodes?(k(),y("div",_s,[(k(!0),y(M,null,j(g.nodes,v=>(k(),T(f(le),{key:v.name,"data-testid":"node-set-item-details"},{"top-right":w(()=>[u("span",{class:N([{"tw-text-neutral-300":v.nodeStatus==="ExpectedNotConnected"}])},b(g.scalingMode==="Static"?"Static":"Dynamic"),3)]),"bottom-left":w(()=>[u("div",{class:N(["tw-text-xs+",l(v).textVariant])},b(l(v).message),3),u("table",{class:N(["tw-w-full",["tw-max-w-[37rem]",{"tw-text-neutral-300":v.nodeStatus==="ExpectedNotConnected"}]])},[u("tbody",Ss,[u("tr",null,[m[2]||(m[2]=u("td",{class:"tw-text-xs+"},"Uptime",-1)),u("td",$s,[f(Fe)(v.serverStartedAt)?(k(),y("span",Cs,"Not available")):(k(),y("div",Ts,[_(f(Qe),{duration:f(K).utc().diff(f(K).fromISO(v.serverStartedAt)),"show-as":"humanizedSentenceCase","disable-tooltip":""},null,8,["duration"]),m[1]||(m[1]=u("span",{class:"tw-mx-1"},"since",-1)),_(f(Ge),{instant:f(K).fromISO(v.serverStartedAt),"show-as":"dateTime","hide-milliseconds":""},null,8,["instant"])]))])]),u("tr",null,[m[3]||(m[3]=u("td",{class:"tw-text-xs+"},"Public IP",-1)),u("td",Rs,[C(b(v.publicIp||"Not available")+" ",1),v.publicIp?(k(),T(f(te),{key:0,contents:JSON.stringify(v.publicIp)},null,8,["contents"])):R("",!0)])]),u("tr",null,[m[4]||(m[4]=u("td",{class:"tw-text-xs+"},"Host",-1)),u("td",Ns,[C(b(v.nodeAddress)+" ",1),v.nodeAddress?(k(),T(f(te),{key:0,contents:v.nodeAddress},null,8,["contents"])):R("",!0)])])])],2)]),"bottom-right":w(()=>[v.nodeStatus!=="ExpectedNotConnected"?(k(),T(ds,{key:0,nodeSetIndex:x,nodeName:v.name,"data-testid":"manage-node"},null,8,["nodeSetIndex","nodeName"])):R("",!0)]),default:w(()=>[u("p",{class:N(["tw-text-sm",{"tw-text-neutral-300":v.nodeStatus==="ExpectedNotConnected"}])},[C(b(f(me)(v.name)),1),a(g,v)?(k(),T(f(q),{key:0,class:"tw-ml-1"},{default:w(()=>[C(b(a(g,v)),1)],void 0,!0),_:2},1024)):R("",!0)],2)],void 0,!0),_:2},1024))),128))])):R("",!0)])):R("",!0)],void 0,!0),_:2},1024)]),_:1},8,["itemList"])):R("",!0)}}),Is=kt(As,[["__scopeId","data-v-9c585b11"]]);function Se(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var F=Se();function Je(n){F=n}var se={exec:()=>null};function S(n,e=""){let s=typeof n=="string"?n:n.source,r={replace:(t,l)=>{let a=typeof l=="string"?l:l.source;return a=a.replace(A.caret,"$1"),s=s.replace(t,a),r},getRegex:()=>new RegExp(s,e)};return r}var Es=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),A={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},zs=/^(?:[ \t]*(?:\n|$))+/,Ps=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Ds=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ne=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ls=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,$e=/(?:[*+-]|\d{1,9}[.)])/,Ye=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,et=S(Ye).replace(/bull/g,$e).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Os=S(Ye).replace(/bull/g,$e).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Te=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Ms=/^[^\n]+/,Ce=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Bs=S(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Ce).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),qs=S(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,$e).getRegex(),de="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Re=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,js=S("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Re).replace("tag",de).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),tt=S(Te).replace("hr",ne).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de).getRegex(),Vs=S(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",tt).getRegex(),Ne={blockquote:Vs,code:Ps,def:Bs,fences:Ds,heading:Ls,hr:ne,html:js,lheading:et,list:qs,newline:zs,paragraph:tt,table:se,text:Ms},Be=S("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ne).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de).getRegex(),Hs={...Ne,lheading:Os,table:Be,paragraph:S(Te).replace("hr",ne).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Be).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de).getRegex()},Zs={...Ne,html:S(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Re).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:se,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:S(Te).replace("hr",ne).replace("heading",` *#{1,6} *[^
]`).replace("lheading",et).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Us=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Fs=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,st=/^( {2,}|\\)\n(?!\s*$)/,Qs=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,pe=/[\p{P}\p{S}]/u,Ae=/[\s\p{P}\p{S}]/u,nt=/[^\s\p{P}\p{S}]/u,Gs=S(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ae).getRegex(),rt=/(?!~)[\p{P}\p{S}]/u,Ws=/(?!~)[\s\p{P}\p{S}]/u,Ks=/(?:[^\s\p{P}\p{S}]|~)/u,Xs=S(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Es?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),at=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Js=S(at,"u").replace(/punct/g,pe).getRegex(),Ys=S(at,"u").replace(/punct/g,rt).getRegex(),it="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",en=S(it,"gu").replace(/notPunctSpace/g,nt).replace(/punctSpace/g,Ae).replace(/punct/g,pe).getRegex(),tn=S(it,"gu").replace(/notPunctSpace/g,Ks).replace(/punctSpace/g,Ws).replace(/punct/g,rt).getRegex(),sn=S("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,nt).replace(/punctSpace/g,Ae).replace(/punct/g,pe).getRegex(),nn=S(/\\(punct)/,"gu").replace(/punct/g,pe).getRegex(),rn=S(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),an=S(Re).replace("(?:-->|$)","-->").getRegex(),ln=S("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",an).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),oe=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,on=S(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",oe).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),lt=S(/^!?\[(label)\]\[(ref)\]/).replace("label",oe).replace("ref",Ce).getRegex(),ot=S(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ce).getRegex(),un=S("reflink|nolink(?!\\()","g").replace("reflink",lt).replace("nolink",ot).getRegex(),qe=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Ie={_backpedal:se,anyPunctuation:nn,autolink:rn,blockSkip:Xs,br:st,code:Fs,del:se,emStrongLDelim:Js,emStrongRDelimAst:en,emStrongRDelimUnd:sn,escape:Us,link:on,nolink:ot,punctuation:Gs,reflink:lt,reflinkSearch:un,tag:ln,text:Qs,url:se},cn={...Ie,link:S(/^!?\[(label)\]\((.*?)\)/).replace("label",oe).getRegex(),reflink:S(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",oe).getRegex()},xe={...Ie,emStrongRDelimAst:tn,emStrongLDelim:Ys,url:S(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",qe).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:S(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",qe).getRegex()},dn={...xe,br:S(st).replace("{2,}","*").getRegex(),text:S(xe.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ie={normal:Ne,gfm:Hs,pedantic:Zs},X={normal:Ie,gfm:xe,breaks:dn,pedantic:cn},pn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},je=n=>pn[n];function L(n,e){if(e){if(A.escapeTest.test(n))return n.replace(A.escapeReplace,je)}else if(A.escapeTestNoEncode.test(n))return n.replace(A.escapeReplaceNoEncode,je);return n}function Ve(n){try{n=encodeURI(n).replace(A.percentDecode,"%")}catch{return null}return n}function He(n,e){let s=n.replace(A.findPipe,(l,a,p)=>{let i=!1,h=a;for(;--h>=0&&p[h]==="\\";)i=!i;return i?"|":" |"}),r=s.split(A.splitPipe),t=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;t<r.length;t++)r[t]=r[t].trim().replace(A.slashPipe,"|");return r}function J(n,e,s){let r=n.length;if(r===0)return"";let t=0;for(;t<r&&n.charAt(r-t-1)===e;)t++;return n.slice(0,r-t)}function hn(n,e){if(n.indexOf(e[1])===-1)return-1;let s=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])s++;else if(n[r]===e[1]&&(s--,s<0))return r;return s>0?-2:-1}function Ze(n,e,s,r,t){let l=e.href,a=e.title||null,p=n[1].replace(t.other.outputLinkReplace,"$1");r.state.inLink=!0;let i={type:n[0].charAt(0)==="!"?"image":"link",raw:s,href:l,title:a,text:p,tokens:r.inlineTokens(p)};return r.state.inLink=!1,i}function gn(n,e,s){let r=n.match(s.other.indentCodeCompensation);if(r===null)return e;let t=r[1];return e.split(`
`).map(l=>{let a=l.match(s.other.beginningSpace);if(a===null)return l;let[p]=a;return p.length>=t.length?l.slice(t.length):l}).join(`
`)}var ue=class{options;rules;lexer;constructor(n){this.options=n||F}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let s=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?s:J(s,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let s=e[0],r=gn(s,e[3]||"",this.rules);return{type:"code",raw:s,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let s=e[2].trim();if(this.rules.other.endingHash.test(s)){let r=J(s,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(s=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:J(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let s=J(e[0],`
`).split(`
`),r="",t="",l=[];for(;s.length>0;){let a=!1,p=[],i;for(i=0;i<s.length;i++)if(this.rules.other.blockquoteStart.test(s[i]))p.push(s[i]),a=!0;else if(!a)p.push(s[i]);else break;s=s.slice(i);let h=p.join(`
`),o=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${h}`:h,t=t?`${t}
${o}`:o;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(o,l,!0),this.lexer.state.top=c,s.length===0)break;let d=l.at(-1);if(d?.type==="code")break;if(d?.type==="blockquote"){let m=d,g=m.raw+`
`+s.join(`
`),x=this.blockquote(g);l[l.length-1]=x,r=r.substring(0,r.length-m.raw.length)+x.raw,t=t.substring(0,t.length-m.text.length)+x.text;break}else if(d?.type==="list"){let m=d,g=m.raw+`
`+s.join(`
`),x=this.list(g);l[l.length-1]=x,r=r.substring(0,r.length-d.raw.length)+x.raw,t=t.substring(0,t.length-m.raw.length)+x.raw,s=g.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:l,text:t}}}list(n){let e=this.rules.block.list.exec(n);if(e){let s=e[1].trim(),r=s.length>1,t={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");let l=this.rules.other.listItemRegex(s),a=!1;for(;n;){let i=!1,h="",o="";if(!(e=l.exec(n))||this.rules.block.hr.test(n))break;h=e[0],n=n.substring(h.length);let c=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,z=>" ".repeat(3*z.length)),d=n.split(`
`,1)[0],m=!c.trim(),g=0;if(this.options.pedantic?(g=2,o=c.trimStart()):m?g=e[1].length+1:(g=e[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,o=c.slice(g),g+=e[1].length),m&&this.rules.other.blankLine.test(d)&&(h+=d+`
`,n=n.substring(d.length+1),i=!0),!i){let z=this.rules.other.nextBulletRegex(g),Q=this.rules.other.hrRegex(g),G=this.rules.other.fencesBeginRegex(g),re=this.rules.other.headingBeginRegex(g),W=this.rules.other.htmlBeginRegex(g);for(;n;){let I=n.split(`
`,1)[0],B;if(d=I,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),B=d):B=d.replace(this.rules.other.tabCharGlobal,"    "),G.test(d)||re.test(d)||W.test(d)||z.test(d)||Q.test(d))break;if(B.search(this.rules.other.nonSpaceChar)>=g||!d.trim())o+=`
`+B.slice(g);else{if(m||c.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||G.test(c)||re.test(c)||Q.test(c))break;o+=`
`+d}!m&&!d.trim()&&(m=!0),h+=I+`
`,n=n.substring(I.length+1),c=B.slice(g)}}t.loose||(a?t.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(a=!0));let x=null,v;this.options.gfm&&(x=this.rules.other.listIsTask.exec(o),x&&(v=x[0]!=="[ ] ",o=o.replace(this.rules.other.listReplaceTask,""))),t.items.push({type:"list_item",raw:h,task:!!x,checked:v,loose:!1,text:o,tokens:[]}),t.raw+=h}let p=t.items.at(-1);if(p)p.raw=p.raw.trimEnd(),p.text=p.text.trimEnd();else return;t.raw=t.raw.trimEnd();for(let i=0;i<t.items.length;i++)if(this.lexer.state.top=!1,t.items[i].tokens=this.lexer.blockTokens(t.items[i].text,[]),!t.loose){let h=t.items[i].tokens.filter(c=>c.type==="space"),o=h.length>0&&h.some(c=>this.rules.other.anyLine.test(c.raw));t.loose=o}if(t.loose)for(let i=0;i<t.items.length;i++)t.items[i].loose=!0;return t}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let s=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",t=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:s,raw:e[0],href:r,title:t}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let s=He(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),t=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:e[0],header:[],align:[],rows:[]};if(s.length===r.length){for(let a of r)this.rules.other.tableAlignRight.test(a)?l.align.push("right"):this.rules.other.tableAlignCenter.test(a)?l.align.push("center"):this.rules.other.tableAlignLeft.test(a)?l.align.push("left"):l.align.push(null);for(let a=0;a<s.length;a++)l.header.push({text:s[a],tokens:this.lexer.inline(s[a]),header:!0,align:l.align[a]});for(let a of t)l.rows.push(He(a,l.header.length).map((p,i)=>({text:p,tokens:this.lexer.inline(p),header:!1,align:l.align[i]})));return l}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let s=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:s,tokens:this.lexer.inline(s)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let s=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;let l=J(s.slice(0,-1),"\\");if((s.length-l.length)%2===0)return}else{let l=hn(e[2],"()");if(l===-2)return;if(l>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+l;e[2]=e[2].substring(0,l),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let r=e[2],t="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(r);l&&(r=l[1],t=l[3])}else t=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?r=r.slice(1):r=r.slice(1,-1)),Ze(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:t&&t.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let s;if((s=this.rules.inline.reflink.exec(n))||(s=this.rules.inline.nolink.exec(n))){let r=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),t=e[r.toLowerCase()];if(!t){let l=s[0].charAt(0);return{type:"text",raw:l,text:l}}return Ze(s,t,s[0],this.lexer,this.rules)}}emStrong(n,e,s=""){let r=this.rules.inline.emStrongLDelim.exec(n);if(!(!r||r[3]&&s.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!s||this.rules.inline.punctuation.exec(s))){let t=[...r[0]].length-1,l,a,p=t,i=0,h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*n.length+t);(r=h.exec(e))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(a=[...l].length,r[3]||r[4]){p+=a;continue}else if((r[5]||r[6])&&t%3&&!((t+a)%3)){i+=a;continue}if(p-=a,p>0)continue;a=Math.min(a,a+p+i);let o=[...r[0]][0].length,c=n.slice(0,t+r.index+o+a);if(Math.min(t,a)%2){let m=c.slice(1,-1);return{type:"em",raw:c,text:m,tokens:this.lexer.inlineTokens(m)}}let d=c.slice(2,-2);return{type:"strong",raw:c,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let s=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(s),t=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return r&&t&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:e[0],text:s}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let s,r;return e[2]==="@"?(s=e[1],r="mailto:"+s):(s=e[1],r=s),{type:"link",raw:e[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let s,r;if(e[2]==="@")s=e[0],r="mailto:"+s;else{let t;do t=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(t!==e[0]);s=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let s=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:s}}}},P=class be{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||F,this.options.tokenizer=this.options.tokenizer||new ue,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let s={other:A,block:ie.normal,inline:X.normal};this.options.pedantic?(s.block=ie.pedantic,s.inline=X.pedantic):this.options.gfm&&(s.block=ie.gfm,this.options.breaks?s.inline=X.breaks:s.inline=X.gfm),this.tokenizer.rules=s}static get rules(){return{block:ie,inline:X}}static lex(e,s){return new be(s).lex(e)}static lexInline(e,s){return new be(s).inlineTokens(e)}lex(e){e=e.replace(A.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let s=0;s<this.inlineQueue.length;s++){let r=this.inlineQueue[s];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,s=[],r=!1){for(this.options.pedantic&&(e=e.replace(A.tabCharGlobal,"    ").replace(A.spaceLine,""));e;){let t;if(this.options.extensions?.block?.some(a=>(t=a.call({lexer:this},e,s))?(e=e.substring(t.raw.length),s.push(t),!0):!1))continue;if(t=this.tokenizer.space(e)){e=e.substring(t.raw.length);let a=s.at(-1);t.raw.length===1&&a!==void 0?a.raw+=`
`:s.push(t);continue}if(t=this.tokenizer.code(e)){e=e.substring(t.raw.length);let a=s.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+t.raw,a.text+=`
`+t.text,this.inlineQueue.at(-1).src=a.text):s.push(t);continue}if(t=this.tokenizer.fences(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.heading(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.hr(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.blockquote(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.list(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.html(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.def(e)){e=e.substring(t.raw.length);let a=s.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+t.raw,a.text+=`
`+t.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title},s.push(t));continue}if(t=this.tokenizer.table(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.lheading(e)){e=e.substring(t.raw.length),s.push(t);continue}let l=e;if(this.options.extensions?.startBlock){let a=1/0,p=e.slice(1),i;this.options.extensions.startBlock.forEach(h=>{i=h.call({lexer:this},p),typeof i=="number"&&i>=0&&(a=Math.min(a,i))}),a<1/0&&a>=0&&(l=e.substring(0,a+1))}if(this.state.top&&(t=this.tokenizer.paragraph(l))){let a=s.at(-1);r&&a?.type==="paragraph"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+t.raw,a.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):s.push(t),r=l.length!==e.length,e=e.substring(t.raw.length);continue}if(t=this.tokenizer.text(e)){e=e.substring(t.raw.length);let a=s.at(-1);a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+t.raw,a.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):s.push(t);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,s}inline(e,s=[]){return this.inlineQueue.push({src:e,tokens:s}),s}inlineTokens(e,s=[]){let r=e,t=null;if(this.tokens.links){let i=Object.keys(this.tokens.links);if(i.length>0)for(;(t=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)i.includes(t[0].slice(t[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,t.index)+"["+"a".repeat(t[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(t=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,t.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let l;for(;(t=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)l=t[2]?t[2].length:0,r=r.slice(0,t.index+l)+"["+"a".repeat(t[0].length-l-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let a=!1,p="";for(;e;){a||(p=""),a=!1;let i;if(this.options.extensions?.inline?.some(o=>(i=o.call({lexer:this},e,s))?(e=e.substring(i.raw.length),s.push(i),!0):!1))continue;if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length);let o=s.at(-1);i.type==="text"&&o?.type==="text"?(o.raw+=i.raw,o.text+=i.text):s.push(i);continue}if(i=this.tokenizer.emStrong(e,r,p)){e=e.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),s.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),s.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),s.push(i);continue}let h=e;if(this.options.extensions?.startInline){let o=1/0,c=e.slice(1),d;this.options.extensions.startInline.forEach(m=>{d=m.call({lexer:this},c),typeof d=="number"&&d>=0&&(o=Math.min(o,d))}),o<1/0&&o>=0&&(h=e.substring(0,o+1))}if(i=this.tokenizer.inlineText(h)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(p=i.raw.slice(-1)),a=!0;let o=s.at(-1);o?.type==="text"?(o.raw+=i.raw,o.text+=i.text):s.push(i);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return s}},ce=class{options;parser;constructor(n){this.options=n||F}space(n){return""}code({text:n,lang:e,escaped:s}){let r=(e||"").match(A.notSpaceStart)?.[0],t=n.replace(A.endingNewline,"")+`
`;return r?'<pre><code class="language-'+L(r)+'">'+(s?t:L(t,!0))+`</code></pre>
`:"<pre><code>"+(s?t:L(t,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,s=n.start,r="";for(let a=0;a<n.items.length;a++){let p=n.items[a];r+=this.listitem(p)}let t=e?"ol":"ul",l=e&&s!==1?' start="'+s+'"':"";return"<"+t+l+`>
`+r+"</"+t+`>
`}listitem(n){let e="";if(n.task){let s=this.checkbox({checked:!!n.checked});n.loose?n.tokens[0]?.type==="paragraph"?(n.tokens[0].text=s+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=s+" "+L(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):e+=s+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",s="";for(let t=0;t<n.header.length;t++)s+=this.tablecell(n.header[t]);e+=this.tablerow({text:s});let r="";for(let t=0;t<n.rows.length;t++){let l=n.rows[t];s="";for(let a=0;a<l.length;a++)s+=this.tablecell(l[a]);r+=this.tablerow({text:s})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),s=n.header?"th":"td";return(n.align?`<${s} align="${n.align}">`:`<${s}>`)+e+`</${s}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${L(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:s}){let r=this.parser.parseInline(s),t=Ve(n);if(t===null)return r;n=t;let l='<a href="'+n+'"';return e&&(l+=' title="'+L(e)+'"'),l+=">"+r+"</a>",l}image({href:n,title:e,text:s,tokens:r}){r&&(s=this.parser.parseInline(r,this.parser.textRenderer));let t=Ve(n);if(t===null)return L(s);n=t;let l=`<img src="${n}" alt="${s}"`;return e&&(l+=` title="${L(e)}"`),l+=">",l}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:L(n.text)}},Ee=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},D=class ve{options;renderer;textRenderer;constructor(e){this.options=e||F,this.options.renderer=this.options.renderer||new ce,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ee}static parse(e,s){return new ve(s).parse(e)}static parseInline(e,s){return new ve(s).parseInline(e)}parse(e,s=!0){let r="";for(let t=0;t<e.length;t++){let l=e[t];if(this.options.extensions?.renderers?.[l.type]){let p=l,i=this.options.extensions.renderers[p.type].call({parser:this},p);if(i!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(p.type)){r+=i||"";continue}}let a=l;switch(a.type){case"space":{r+=this.renderer.space(a);continue}case"hr":{r+=this.renderer.hr(a);continue}case"heading":{r+=this.renderer.heading(a);continue}case"code":{r+=this.renderer.code(a);continue}case"table":{r+=this.renderer.table(a);continue}case"blockquote":{r+=this.renderer.blockquote(a);continue}case"list":{r+=this.renderer.list(a);continue}case"html":{r+=this.renderer.html(a);continue}case"def":{r+=this.renderer.def(a);continue}case"paragraph":{r+=this.renderer.paragraph(a);continue}case"text":{let p=a,i=this.renderer.text(p);for(;t+1<e.length&&e[t+1].type==="text";)p=e[++t],i+=`
`+this.renderer.text(p);s?r+=this.renderer.paragraph({type:"paragraph",raw:i,text:i,tokens:[{type:"text",raw:i,text:i,escaped:!0}]}):r+=i;continue}default:{let p='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return r}parseInline(e,s=this.renderer){let r="";for(let t=0;t<e.length;t++){let l=e[t];if(this.options.extensions?.renderers?.[l.type]){let p=this.options.extensions.renderers[l.type].call({parser:this},l);if(p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){r+=p||"";continue}}let a=l;switch(a.type){case"escape":{r+=s.text(a);break}case"html":{r+=s.html(a);break}case"link":{r+=s.link(a);break}case"image":{r+=s.image(a);break}case"strong":{r+=s.strong(a);break}case"em":{r+=s.em(a);break}case"codespan":{r+=s.codespan(a);break}case"br":{r+=s.br(a);break}case"del":{r+=s.del(a);break}case"text":{r+=s.text(a);break}default:{let p='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return r}},ee=class{options;block;constructor(n){this.options=n||F}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?P.lex:P.lexInline}provideParser(){return this.block?D.parse:D.parseInline}},fn=class{defaults=Se();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=D;Renderer=ce;TextRenderer=Ee;Lexer=P;Tokenizer=ue;Hooks=ee;constructor(...n){this.use(...n)}walkTokens(n,e){let s=[];for(let r of n)switch(s=s.concat(e.call(this,r)),r.type){case"table":{let t=r;for(let l of t.header)s=s.concat(this.walkTokens(l.tokens,e));for(let l of t.rows)for(let a of l)s=s.concat(this.walkTokens(a.tokens,e));break}case"list":{let t=r;s=s.concat(this.walkTokens(t.items,e));break}default:{let t=r;this.defaults.extensions?.childTokens?.[t.type]?this.defaults.extensions.childTokens[t.type].forEach(l=>{let a=t[l].flat(1/0);s=s.concat(this.walkTokens(a,e))}):t.tokens&&(s=s.concat(this.walkTokens(t.tokens,e)))}}return s}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(s=>{let r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){let l=e.renderers[t.name];l?e.renderers[t.name]=function(...a){let p=t.renderer.apply(this,a);return p===!1&&(p=l.apply(this,a)),p}:e.renderers[t.name]=t.renderer}if("tokenizer"in t){if(!t.level||t.level!=="block"&&t.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=e[t.level];l?l.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&(t.level==="block"?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:t.level==="inline"&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)}),r.extensions=e),s.renderer){let t=this.defaults.renderer||new ce(this.defaults);for(let l in s.renderer){if(!(l in t))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let a=l,p=s.renderer[a],i=t[a];t[a]=(...h)=>{let o=p.apply(t,h);return o===!1&&(o=i.apply(t,h)),o||""}}r.renderer=t}if(s.tokenizer){let t=this.defaults.tokenizer||new ue(this.defaults);for(let l in s.tokenizer){if(!(l in t))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let a=l,p=s.tokenizer[a],i=t[a];t[a]=(...h)=>{let o=p.apply(t,h);return o===!1&&(o=i.apply(t,h)),o}}r.tokenizer=t}if(s.hooks){let t=this.defaults.hooks||new ee;for(let l in s.hooks){if(!(l in t))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let a=l,p=s.hooks[a],i=t[a];ee.passThroughHooks.has(l)?t[a]=h=>{if(this.defaults.async&&ee.passThroughHooksRespectAsync.has(l))return(async()=>{let c=await p.call(t,h);return i.call(t,c)})();let o=p.call(t,h);return i.call(t,o)}:t[a]=(...h)=>{if(this.defaults.async)return(async()=>{let c=await p.apply(t,h);return c===!1&&(c=await i.apply(t,h)),c})();let o=p.apply(t,h);return o===!1&&(o=i.apply(t,h)),o}}r.hooks=t}if(s.walkTokens){let t=this.defaults.walkTokens,l=s.walkTokens;r.walkTokens=function(a){let p=[];return p.push(l.call(this,a)),t&&(p=p.concat(t.call(this,a))),p}}this.defaults={...this.defaults,...r}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return P.lex(n,e??this.defaults)}parser(n,e){return D.parse(n,e??this.defaults)}parseMarkdown(n){return(e,s)=>{let r={...s},t={...this.defaults,...r},l=this.onError(!!t.silent,!!t.async);if(this.defaults.async===!0&&r.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(t.hooks&&(t.hooks.options=t,t.hooks.block=n),t.async)return(async()=>{let a=t.hooks?await t.hooks.preprocess(e):e,p=await(t.hooks?await t.hooks.provideLexer():n?P.lex:P.lexInline)(a,t),i=t.hooks?await t.hooks.processAllTokens(p):p;t.walkTokens&&await Promise.all(this.walkTokens(i,t.walkTokens));let h=await(t.hooks?await t.hooks.provideParser():n?D.parse:D.parseInline)(i,t);return t.hooks?await t.hooks.postprocess(h):h})().catch(l);try{t.hooks&&(e=t.hooks.preprocess(e));let a=(t.hooks?t.hooks.provideLexer():n?P.lex:P.lexInline)(e,t);t.hooks&&(a=t.hooks.processAllTokens(a)),t.walkTokens&&this.walkTokens(a,t.walkTokens);let p=(t.hooks?t.hooks.provideParser():n?D.parse:D.parseInline)(a,t);return t.hooks&&(p=t.hooks.postprocess(p)),p}catch(a){return l(a)}}}onError(n,e){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let r="<p>An error occurred:</p><pre>"+L(s.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(s);throw s}}},Z=new fn;function $(n,e){return Z.parse(n,e)}$.options=$.setOptions=function(n){return Z.setOptions(n),$.defaults=Z.defaults,Je($.defaults),$};$.getDefaults=Se;$.defaults=F;$.use=function(...n){return Z.use(...n),$.defaults=Z.defaults,Je($.defaults),$};$.walkTokens=function(n,e){return Z.walkTokens(n,e)};$.parseInline=Z.parseInline;$.Parser=D;$.parser=D.parse;$.Renderer=ce;$.TextRenderer=Ee;$.Lexer=P;$.lexer=P.lex;$.Tokenizer=ue;$.Hooks=ee;$.parse=$;$.options;$.setOptions;$.use;$.walkTokens;$.parseInline;D.parse;P.lex;const mn=["innerHTML"],kn={key:1,class:"tw-italic"},wn={class:"tw-mb-1.5"},xn=["innerHTML"],bn={key:1,class:"tw-italic"},vn={key:4},yn={key:5},_n=U({__name:"RuntimeOptionsCard",setup(n){function e(i){const h=360/i.length,o={};for(let c=0;c<i.length;c++){const d=i[c];if(c===0)o[d.name]="rgba(0, 0, 0, 0.15)";else{const m=Math.round(30+c*h)%360;o[d.name]=`hsl(${m}, 60%, 85%)`}}return o}function s(i){return Object.assign({},...i.map(h=>({[h.name]:h.description})))}const{data:r}=O(We()),t=E(()=>{if(r.value){let i=wt(r.value.options);i=i.sort((o,c)=>{const d=o.name.toUpperCase(),m=c.name.toUpperCase();return d<m?-1:d>m?1:0});const h=o=>{delete o.$type,Object.entries(o).forEach(c=>{c[1]!==null&&typeof c[1]=="object"&&h(c[1])})};return Object.entries(i).forEach(o=>{h(o[1].values)}),i}return null}),l=E(()=>e(r.value.allSources));E(()=>s(r.value.allSources));function a(i){return i.charAt(0).toUpperCase()+i.slice(1)}function p(i){const h=$.parseInline(i);if(typeof h=="string")return h;h.then(o=>o).catch(o=>{console.error(o)})}return(i,h)=>(k(),y(M,null,[(k(!0),y(M,null,j(t.value,o=>(k(),T(f(Et),{class:"tw-mb-4",key:o.name,title:o.name.replace(/([a-z])([A-Z])/g,"$1 $2"),badge:Object.keys(o.values).length,"data-testid":"runtime-option-collapse-header"},{"header-right":w(()=>[_(f(q),null,{default:w(()=>[C(b(o.isStatic?"Static":"Dynamic"),1)],void 0,!0),_:2},1024)]),subtitle:w(()=>[o.description?(k(),y("span",{key:0,innerHTML:p(o.description)},null,8,mn)):(k(),y("span",kn,"No description available."))]),default:w(()=>[_(f(bt),null,{default:w(()=>[(k(!0),y(M,null,j(o.values,(c,d)=>(k(),T(f(le),{class:"tw-px-4",key:d,striped:""},{"top-right":w(()=>[u("span",null,b(o.sources[a(d)]),1)]),"bottom-left":w(()=>[u("div",wn,[o.descriptions[a(d)]?(k(),y("span",{key:0,innerHTML:p(o.descriptions[a(d)])},null,8,xn)):(k(),y("span",bn,"No description available."))]),c===null?(k(),T(f(q),{key:0,size:"large"},{default:w(()=>[...h[0]||(h[0]=[C("null",-1)])],void 0,!0),_:1})):R("",!0),c===""?(k(),T(f(q),{key:1,size:"large"},{default:w(()=>[...h[1]||(h[1]=[C("empty string",-1)])],void 0,!0),_:1})):c===!0?(k(),T(f(q),{key:2,variant:"success",size:"large"},{default:w(()=>[...h[2]||(h[2]=[C("true",-1)])],void 0,!0),_:1})):c===!1?(k(),T(f(q),{key:3,variant:"danger",size:"large"},{default:w(()=>[...h[3]||(h[3]=[C("false",-1)])],void 0,!0),_:1})):Array.isArray(c)||typeof c=="object"?(k(),y("pre",vn,b(c),1)):(k(),y("span",yn,b(c),1))]),default:w(()=>[u("span",{class:"tw-rounded tw-px-1.5 tw-py-0.5 tw-text-xs tw-text-neutral-700",style:xt(`background: ${l.value[o.sources[a(d)]]||"lightgrey"}`)},b(a(d)),5)],void 0,!0),_:2},1024))),128))],void 0,!0),_:2},1024)],void 0,!0),_:2},1032,["title","badge"]))),128)),_(f(we),{data:t.value,label:"runtimeOptions"},null,8,["data"])],64))}}),Sn={class:"tw-mb-4 tw-mt-2 tw-text-xs tw-text-neutral-500"},$n={class:"tw-mb-1 tw-font-semibold"},Tn={class:"tw-w-full"},Cn={class:"tw-divide-y tw-divide-neutral-200 tw-border-t tw-border-neutral-200 *:*:tw-py-1"},Rn={class:"tw-text-right"},Nn={class:"tw-text-right"},An={class:"tw-text-right"},In={class:"tw-text-right"},En={key:0},zn={key:1},cr=U({__name:"EnvironmentView",setup(n){const e=vt(),{data:s,error:r}=O(yt()),{data:t,error:l}=O(_t()),{data:a,error:p}=O(_e()),{data:i,error:h}=O(ye()),{data:o,error:c}=O(We()),d=[{label:"Actors"},{label:"Servers"},{label:"Database",permission:"api.database.status"},{label:"Runtime Options",permission:"api.runtime_options.view"}],m=E(()=>o.value?.options?.find(g=>g.name==="Deployment")?.values?.chartVersion??"Null");return(g,x)=>{const v=Y("fa-icon");return k(),T(f(At),{permission:"dashboard.environment.view","full-width":""},{overview:w(()=>[_(f(Nt),{title:"Environment Details"},{default:w(()=>[x[9]||(x[9]=u("p",null,"Overview of the current environment this game server is running in.",-1)),u("p",Sn,[x[1]||(x[1]=C("Easiest way to configure your game servers to act differently in different environments is through the runtime options system. Please have a look at the ",-1)),_(f(fe),{to:"https://docs.metaplay.io/game-server-programming/how-to-guides/working-with-runtime-options.html"},{default:w(()=>[...x[0]||(x[0]=[C("runtime options documentation",-1)])],void 0,!0),_:1}),x[2]||(x[2]=C(" to get started.",-1))]),u("div",$n,[_(v,{class:"tw-mr-1",icon:"chart-bar"}),x[3]||(x[3]=u("span",null,"Overview",-1))]),u("table",Tn,[u("tbody",Cn,[u("tr",null,[x[4]||(x[4]=u("td",null,"Environment Name",-1)),u("td",Rn,b(f(e).projectInfo.projectName),1)]),u("tr",null,[x[5]||(x[5]=u("td",null,"Environment Type",-1)),u("td",Nn,b(f(e).environmentInfo.environmentFamily),1)]),u("tr",null,[x[6]||(x[6]=u("td",null,"Chart Version",-1)),u("td",{class:N(["tw-text-right",{"tw-italic tw-text-neutral-500":m.value==="Null"}])},b(m.value==="Null"?"Not available":m.value),3)]),u("tr",null,[x[7]||(x[7]=u("td",null,"Maintenance Mode",-1)),u("td",An,[_(f(q),{variant:f(s)?.maintenanceStatus.isInMaintenance?"warning":"neutral"},{default:w(()=>[C(b(f(s)?.maintenanceStatus.isInMaintenance?"On":"Off"),1)],void 0,!0),_:1},8,["variant"])])]),u("tr",null,[x[8]||(x[8]=u("td",null,"Total Players in Database",-1)),u("td",In,[f(t)?(k(),y("span",En,b(f(t).totalItemCounts.Players),1)):(k(),y("span",zn,"Not available"))])])])])],void 0,!0),_:1})]),default:w(()=>[_(f(Ct),{tabs:d},{"tab-0":w(()=>[_(Tt,{"metric-id":"liveActors","presentation-format":"2days-in-hours","link-mode":"detail-view",compact:!1})]),"tab-1":w(()=>[_(f(Me),{class:"tw-mb-4"},{default:w(()=>[f(p)?(k(),T(f(ae),{key:0,class:"tw-mb-3",title:"Cluster Error",error:f(p)},null,8,["error"])):R("",!0),f(p)?(k(),T(f(ae),{key:1,class:"tw-mb-3",title:"Load Tracking Error",error:f(p)},null,8,["error"])):(k(),T(Is,{key:2})),_(f(we),{data:f(a),label:"clusterData"},null,8,["data"])],void 0,!0),_:1})]),"tab-2":w(()=>[f(h)?(k(),T(f(ae),{key:0,title:"Database Error",error:f(h)},null,8,["error"])):(k(),T(f(Rt),{key:1,class:"tw-mb-4"},{default:w(()=>[_(Zt),_(jt)],void 0,!0),_:1})),_(f(we),{data:f(i),label:"databaseStatusData"},null,8,["data"])]),"tab-3":w(()=>[_(f(Me),null,{default:w(()=>[f(c)?(k(),T(f(ae),{key:0,title:"Runtime Options Error",error:f(c)},null,8,["error"])):(k(),T(_n,{key:1}))],void 0,!0),_:1})]),_:1})]),_:1})}}});export{cr as default};
