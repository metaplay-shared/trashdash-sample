import{a_ as F,an as u,a$ as H,b0 as O,ao as _,b1 as K,aE as B,b2 as M,b3 as R,b4 as L,aH as q,b5 as G,b6 as X,aN as j,d as A,c,b7 as U,aj as Q,ak as Y,K as J,a as I,o as k,q as b,e as D,m as y,n as g,j as W,Q as Z,k as V,t as C,w as P,_ as ee,U as te,al as ae}from"./index-B-VT6L6o.js";import{_ as se}from"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CBCiJKqn.js";var re=_("switch").parts("root","label","control","thumb"),T=re.build(),x=e=>e.ids?.root??`switch:${e.id}`,N=e=>e.ids?.label??`switch:${e.id}:label`,ie=e=>e.ids?.thumb??`switch:${e.id}:thumb`,de=e=>e.ids?.control??`switch:${e.id}:control`,S=e=>e.ids?.hiddenInput??`switch:${e.id}:input`,ne=e=>e.getById(x(e)),w=e=>e.getById(S(e));function le(e,a){const{context:t,send:i,prop:r,scope:n}=e,o=r("disabled"),v=r("readOnly"),h=!!t.get("checked"),p=!o&&t.get("focused"),d=!o&&t.get("focusVisible"),f={"data-active":u(t.get("active")),"data-focus":u(p),"data-focus-visible":u(d),"data-readonly":u(v),"data-hover":u(t.get("hovered")),"data-disabled":u(o),"data-state":h?"checked":"unchecked","data-invalid":u(r("invalid"))};return{checked:h,disabled:o,focused:p,setChecked(l){i({type:"CHECKED.SET",checked:l,isTrusted:!1})},toggleChecked(){i({type:"CHECKED.TOGGLE",checked:h,isTrusted:!1})},getRootProps(){return a.label({...T.root.attrs,...f,dir:r("dir"),id:x(n),htmlFor:S(n),onPointerMove(){o||i({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){o||i({type:"CONTEXT.SET",context:{hovered:!1}})},onClick(l){if(o)return;K(l)===w(n)&&l.stopPropagation(),B()&&w(n)?.focus()}})},getLabelProps(){return a.element({...T.label.attrs,...f,dir:r("dir"),id:N(n)})},getThumbProps(){return a.element({...T.thumb.attrs,...f,dir:r("dir"),id:ie(n),"aria-hidden":!0})},getControlProps(){return a.element({...T.control.attrs,...f,dir:r("dir"),id:de(n),"aria-hidden":!0})},getHiddenInputProps(){return a.input({id:S(n),type:"checkbox",required:r("required"),defaultChecked:h,disabled:o,"aria-labelledby":N(n),"aria-invalid":r("invalid"),name:r("name"),form:r("form"),value:r("value"),style:H,onFocus(){const l=O();i({type:"CONTEXT.SET",context:{focused:!0,focusVisible:l}})},onBlur(){i({type:"CONTEXT.SET",context:{focused:!1,focusVisible:!1}})},onClick(l){if(v){l.preventDefault();return}const m=l.currentTarget.checked;i({type:"CHECKED.SET",checked:m,isTrusted:!0})}})}}}var{not:$}=M(),oe=F({props({props:e}){return{defaultChecked:!1,label:"switch",value:"on",...e}},initialState(){return"ready"},context({prop:e,bindable:a}){return{checked:a(()=>({defaultValue:e("defaultChecked"),value:e("checked"),onChange(t){e("onCheckedChange")?.({checked:t})}})),fieldsetDisabled:a(()=>({defaultValue:!1})),focusVisible:a(()=>({defaultValue:!1})),active:a(()=>({defaultValue:!1})),focused:a(()=>({defaultValue:!1})),hovered:a(()=>({defaultValue:!1}))}},computed:{isDisabled:({context:e,prop:a})=>a("disabled")||e.get("fieldsetDisabled")},watch({track:e,prop:a,context:t,action:i}){e([()=>a("disabled")],()=>{i(["removeFocusIfNeeded"])}),e([()=>t.get("checked")],()=>{i(["syncInputElement"])})},effects:["trackFormControlState","trackPressEvent","trackFocusVisible"],on:{"CHECKED.TOGGLE":[{guard:$("isTrusted"),actions:["toggleChecked","dispatchChangeEvent"]},{actions:["toggleChecked"]}],"CHECKED.SET":[{guard:$("isTrusted"),actions:["setChecked","dispatchChangeEvent"]},{actions:["setChecked"]}],"CONTEXT.SET":{actions:["setContext"]}},states:{ready:{}},implementations:{guards:{isTrusted:({event:e})=>!!e.isTrusted},effects:{trackPressEvent({computed:e,scope:a,context:t}){if(!e("isDisabled"))return X({pointerNode:ne(a),keyboardNode:w(a),isValidKey:i=>i.key===" ",onPress:()=>t.set("active",!1),onPressStart:()=>t.set("active",!0),onPressEnd:()=>t.set("active",!1)})},trackFocusVisible({computed:e,scope:a}){if(!e("isDisabled"))return G({root:a.getRootNode()})},trackFormControlState({context:e,send:a,scope:t}){return q(w(t),{onFieldsetDisabledChange(i){e.set("fieldsetDisabled",i)},onFormReset(){const i=e.initial("checked");a({type:"CHECKED.SET",checked:!!i,src:"form-reset"})}})}},actions:{setContext({context:e,event:a}){for(const t in a.context)e.set(t,a.context[t])},syncInputElement({context:e,scope:a}){const t=w(a);t&&L(t,!!e.get("checked"))},removeFocusIfNeeded({context:e,prop:a}){a("disabled")&&e.set("focused",!1)},setChecked({context:e,event:a}){e.set("checked",a.checked)},toggleChecked({context:e}){e.set("checked",!e.get("checked"))},dispatchChangeEvent({context:e,scope:a}){const t=w(a);R(t,{checked:e.get("checked")})}}}});j()(["checked","defaultChecked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]);const ce={class:"tw-m-0 tw-p-0"},ue=["data-testid"],he=["data-testid"],fe=["aria-disabled","aria-checked","data-testid"],ge=A({__name:"MInputSwitch",props:{modelValue:{type:Boolean},disabledTooltip:{default:void 0},variant:{default:"primary"},size:{default:"default"},name:{default:void 0},permission:{default:void 0},dataTestid:{default:void 0},label:{default:void 0},hintMessage:{default:void 0},badgeText:{default:void 0},badgeVariant:{default:"neutral"}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,{doesHavePermission:i}=U(),r=c(()=>t.permission?!i(t.permission):!!t.disabledTooltip),n=c(()=>t.permission&&!i(t.permission)?`You need the '${t.permission}' permission to use this feature.`:t.disabledTooltip?t.disabledTooltip:void 0),o=a,v=Q("switch"),h=c(()=>({disabled:r.value,name:t.name,defaultChecked:t.modelValue,id:v,onCheckedChange:({checked:s})=>{o("update:modelValue",s)}})),p=Y(oe,h),d=c(()=>le(p,ae));J(()=>t.modelValue,s=>{d.value.setChecked(s)});const f=c(()=>{const E={primary:{enabled:"tw-bg-blue-500 hover:tw-bg-blue-600 active:tw-bg-blue-700",disabled:"tw-bg-blue-200"},success:{enabled:"tw-bg-green-500 hover:tw-bg-green-600 active:tw-bg-green-700",disabled:"tw-bg-green-200"},warning:{enabled:"tw-bg-orange-500 hover:tw-bg-orange-600 active:tw-bg-orange-700",disabled:"tw-bg-orange-200"},danger:{enabled:"tw-bg-red-500 hover:tw-bg-red-600 active:tw-bg-red-700",disabled:"tw-bg-red-200"}}[t.variant];return r.value?d.value.checked?E.disabled:"tw-bg-neutral-200":d.value.checked?E.enabled:"tw-bg-neutral-300 hover:tw-bg-neutral-400 active:tw-bg-neutral-500"}),l=c(()=>t.size==="extraSmall"?"tw-w-6 tw-h-3":t.size==="small"?"tw-w-8 tw-h-[18px]":"tw-w-11 tw-h-6"),m=c(()=>{const s={extraSmall:{size:"tw-w-2 tw-h-2",translate:"tw-translate-x-3"},small:{size:"tw-w-3.5 tw-h-3.5",translate:"tw-translate-x-3.5"},default:{size:"tw-w-5 tw-h-5",translate:"tw-translate-x-5"}};return d.value.checked?`${s[t.size].size} ${s[t.size].translate}`:`${s[t.size].size} tw-translate-x-0`}),z=c(()=>t.size==="extraSmall"?"tw-text-xs tw-mt-[0.225rem]":t.size==="small"?"tw-text-xs+ tw-font-semibold":"tw-text-sm tw-font-semibold");return(s,E)=>(k(),I("div",ce,[b("label",g(d.value.getRootProps(),{class:"tw-flex tw-items-center tw-justify-between tw-gap-x-1"},{class:[{"tw-cursor-pointer":!r.value,"tw-cursor-not-allowed":r.value,"tw-ring-2":d.value.focused}],"data-testid":`${s.dataTestid}-label`}),[s.label||s.$slots.label||s.badgeText?(k(),I("span",{key:0,class:Z(["tw-overflow-hidden tw-truncate",[z.value,{"tw-text-neutral-400":r.value}]])},[V(C(s.label),1),s.badgeText?(k(),D(ee,{key:0,class:"tw-ml-1 tw-flex-shrink-0",variant:s.badgeVariant,shape:"pill"},{default:P(()=>[V(C(s.badgeText),1)],void 0,!0),_:1},8,["variant"])):y("",!0)],2)):y("",!0),b("input",g(d.value.getHiddenInputProps(),{class:"tw-m-0 tw-p-0"},{"data-testid":`${s.dataTestid}-switch-input`}),null,16,he),W(te,{content:n.value,"no-underline":""},{default:P(()=>[b("span",g(d.value.getControlProps(),{class:"tw-relative tw-inline-flex tw-flex-shrink-0 tw-rounded-full tw-border-2 tw-border-transparent tw-outline-none tw-ring-blue-500 tw-ring-offset-2 tw-transition-colors tw-duration-200 tw-ease-in-out"},{"aria-disabled":r.value,"aria-checked":d.value.checked,class:[f.value,l.value],"data-testid":`${s.dataTestid}-switch-control`}),[b("span",g(d.value.getThumbProps(),{class:"tw-pointer-events-none tw-inline-block tw-transform tw-rounded-full tw-bg-white tw-shadow tw-ring-0 tw-transition tw-duration-200 tw-ease-in-out"},{class:[m.value,{"tw-bg-neutral-300":r.value}]}),null,16)],16,fe)],void 0,!0),_:1},8,["content"]),b("span",g(d.value.getLabelProps(),{class:"tw-sr-only"}),[b("span",null,C(d.value.checked?"On":"Off"),1)],16)],16,ue),s.hintMessage?(k(),D(se,{key:0,variant:s.variant==="danger"?"danger":void 0},{default:P(()=>[V(C(s.hintMessage),1)],void 0,!0),_:1},8,["variant"])):y("",!0)]))}});export{ge as _};
