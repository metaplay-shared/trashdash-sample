import{d as b,E as y,h as r,c as S,r as M,a as w,m as k,f as t,o as V,j as i,w as s,q as h,k as x,bs as N,bt as C}from"./index-jY1EWd09.js";import{a as I}from"./players-Dfl1Givn.js";import{_ as $}from"./MetaLanguageLabel.vue_vue_type_script_setup_true_lang-NRhcXYbH.js";import{_ as A}from"./MetaGeneratedForm.vue_vue_type_script_setup_true_lang-C4tXbiPC.js";import{_ as B}from"./MActionModalButton.vue_vue_type_script_setup_true_lang-CTycXHot.js";import"./utils-B01yCWQ7.js";import"./GeneratedUiFormDynamicComponent.vue_vue_type_script_setup_true_lang-YgpMK99r.js";import"./MInputMultiSelectCheckbox.vue_vue_type_script_setup_true_lang-BmEacL49.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-Bzg4Lkt_.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-CqJL3vnO.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-CihjvaoM.js";import"./index-qe4CXcF2.js";const G={key:0},P={class:"tw-mr-32 tw-text-xs+ tw-text-neutral-500"},Q=b({__name:"PlayerActionSendMail",props:{playerId:{}},setup(d){const m=d,p=N(),{data:e,refresh:c}=y(I(m.playerId)),o=r({}),l=r(!1);function u(){o.value={},l.value=!1}const f=S(()=>o.value?l.value?void 0:"Some fields contain invalid data. Check that the fields are filled in correctly to proceed.":"Fill in the required fields to proceed."),{showSuccessNotification:g}=C();async function v(){await p.post(`/players/${e.value.id}/sendMail`,o.value),g(`In-game mail sent to ${e.value.model.playerName||"n/a"}.`),c()}return(q,a)=>{const _=M("fa-icon");return t(e)?(V(),w("div",G,[i(t(B),{"modal-title":"Send In-Game Mail",action:v,"trigger-button-label":"Send Mail","ok-button-label":"Send Mail","ok-button-disabled-tooltip":f.value,permission:"api.players.mail",onShow:u,"data-testid":"action-mail"},{"action-button-icon":s(()=>[i(_,{class:"mr-2",icon:"paper-plane"})]),"modal-subtitle":s(()=>[h("span",P,[a[2]||(a[2]=x("Player's language: ",-1)),i($,{language:t(e).model.language,variant:"badge"},null,8,["language"])])]),default:s(()=>[i(A,{class:"!tw-overflow-x-hidden",modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=n=>o.value=n),typeName:"Metaplay.Core.InGameMail.MetaInGameMail",forcedLocalization:t(e).model.language,page:"PlayerActionSendMail","logic-version":t(e).model.logicVersion,onStatus:a[1]||(a[1]=n=>l.value=n)},null,8,["modelValue","forcedLocalization","logic-version"])]),_:1},8,["ok-button-disabled-tooltip"])])):k("",!0)}}});export{Q as default};
