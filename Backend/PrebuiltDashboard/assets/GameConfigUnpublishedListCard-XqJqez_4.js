import{d as R,by as x,c as w,E as $,cc as I,r as O,e as c,o,w as s,j as r,f as a,x as M,k as n,t as m,a as d,m as l,q as f,ae as y,ad as g,y as V,D as G,_ as p}from"./index-jY1EWd09.js";import{M as v,a as b,b as A,c as u}from"./metaListUtils-B-xQ0HnD.js";import{_ as T}from"./GameConfigActionArchive.vue_vue_type_script_setup_true_lang-C-TX7Hm5.js";import{_ as C}from"./GameConfigActionPublish.vue_vue_type_script_setup_true_lang-CgSuEWlv.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-Bzg4Lkt_.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-CihjvaoM.js";import"./index-qe4CXcF2.js";import"./MInputSingleSelectRadio-BM2VfYc3.js";import"./index-Dec9dGh3.js";const P={key:0,class:"tw-space-x-1"},U={key:1},W={key:0,class:"tw-text-red-500"},j={key:1,class:"tw-text-orange-500"},q={key:0},K=1,at=R({__name:"GameConfigUnpublishedListCard",setup(z){const L=x(),h=w(()=>L.path),{data:S}=$(I()),k=w(()=>{if(S.value!==void 0)return S.value.filter(t=>!(t.publishedAt!==null||t.unpublishedAt!==null||t.isActive))});function B(t){const e=h.value,_=e.endsWith("/")?"":"/";return e+_+t}function E(t){return t.id}const D=[new v("Build Time","buildStartedAt",b.Ascending),new v("Build Time","buildStartedAt",b.Descending),new v("Name","name",b.Ascending),new v("Name","name",b.Descending)],N=["id","name","description"],F=[new A("status",[new u("Building",t=>t.bestEffortStatus==="Building"),new u("Success",t=>t.bestEffortStatus==="Success"),new u("Failed",t=>t.bestEffortStatus==="Failed")]),new A("archived",[new u("Archived",t=>t.isArchived),new u("Not archived",t=>!t.isArchived,!0)])];return(t,e)=>{const _=O("meta-list-card");return o(),c(_,{title:"Unpublished Configs",itemList:k.value,getItemKey:E,searchFields:N,filterSets:F,sortOptions:D,defaultSortOption:K,icon:"table","data-testid":"game-config-unpublished-list-card"},{"item-card":s(({item:i})=>[r(a(M),null,{badge:s(()=>[i.isActive?(o(),c(a(p),{key:0,variant:"success"},{default:s(()=>[...e[0]||(e[0]=[n("Active",-1)])],void 0,!0),_:1})):l("",!0),i.isArchived?(o(),c(a(p),{key:1,variant:"neutral"},{default:s(()=>[...e[1]||(e[1]=[n("Archived",-1)])],void 0,!0),_:1})):l("",!0),i.bestEffortStatus==="Failed"?(o(),c(a(p),{key:2,variant:"danger"},{default:s(()=>[...e[2]||(e[2]=[n("Failed",-1)])],void 0,!0),_:1})):l("",!0)]),"top-right":s(()=>[i.bestEffortStatus!=="Building"?(o(),d("div",P,[f("span",null,[e[3]||(e[3]=n("Built ",-1)),r(a(V),{instant:a(G).fromISO(i.buildStartedAt)},null,8,["instant"])]),r(T,{gameConfigId:i.id,"trigger-style":"icon"},null,8,["gameConfigId"])])):(o(),d("div",U,[r(a(p),{variant:"primary"},{default:s(()=>[...e[4]||(e[4]=[n("Building...",-1)])],void 0,!0),_:1})]))]),"bottom-left":s(()=>[i.buildReportSummary?.totalLogLevelCounts.Error?(o(),d("div",W,m(a(g)(i.buildReportSummary.totalLogLevelCounts.Error,"build error",!0)),1)):i.buildReportSummary?.totalLogLevelCounts.Warning?(o(),d("div",j,m(a(g)(i.buildReportSummary.totalLogLevelCounts.Warning,"build warning",!0)),1)):l("",!0),f("div",null,m(i.description||"No description available"),1)]),"bottom-right":s(()=>[i.bestEffortStatus!=="Building"?(o(),d("span",q,[f("div",null,[r(a(y),{to:`gameConfigs/diff?newRoot=${i.id}`,"disabled-tooltip":i.bestEffortStatus==="Failed"?"Unable to diff because this game config failed to build.":void 0,"data-testid":"diff-config"},{default:s(()=>[...e[5]||(e[5]=[n("Diff to active",-1)])],void 0,!0),_:1},8,["to","disabled-tooltip"])]),f("div",null,[r(a(y),{to:B(i.id),"data-testid":"view-config"},{default:s(()=>[...e[6]||(e[6]=[n("View config",-1)])],void 0,!0),_:1},8,["to"])]),r(C,{gameConfigId:i.id,"text-button":""},null,8,["gameConfigId"])])):l("",!0)]),default:s(()=>[n(m(i.name||"No Name Available"),1)],void 0,!0),_:2},1024)]),_:1},8,["itemList"])}}});export{at as default};
