import{d as q,c as y,h as x,z as M,K as $,aj as p,a as o,o as l,Q as f,m as h,t as k,j as w,q as u,e as F,f as r,D as G,w as j,bh as K,k as A}from"./index-jY1EWd09.js";import{_ as z}from"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";import{_ as T}from"./MInputNumber.vue_vue_type_script_setup_true_lang-B50CLeRK.js";import{_ as Q}from"./MInputSwitch.vue_vue_type_script_setup_true_lang-D2jAqk4R.js";const W={key:0,class:"tw-flex tw-items-center tw-justify-between"},J={key:1},P={key:1},R={class:"tw-flex tw-flex-1 tw-items-baseline tw-space-x-2"},X=["for"],Y={class:"tw-flex tw-flex-1 tw-items-baseline tw-space-x-2"},Z=["for"],_={class:"tw-flex tw-flex-1 tw-items-baseline tw-space-x-2"},ee=["for"],te={key:0,class:"tw-text-xs tw-text-red-500"},ae={key:1,class:"tw-text-xs tw-text-neutral-400","data-testid":"duration-preview"},le={key:2,class:"tw-m-0 tw-text-xs tw-text-neutral-400"},ne=q({__name:"MInputDuration",props:{modelValue:{},referenceDateTime:{default:void 0},allowEmpty:{type:Boolean},label:{default:void 0},disabled:{type:Boolean},hintMessage:{default:void 0},variant:{default:"primary"},showGameTimeHint:{type:Boolean,default:!0}},emits:["update:modelValue","isValid"],setup(t,{emit:H}){const s=t,i=H,B=y(()=>s.referenceDateTime?.toUTC()),g=x(s.modelValue!==void 0);function O(e){g.value=e,e?(i("update:modelValue",E.value),i("isValid",E.value!==void 0)):(i("update:modelValue",void 0),i("isValid",!0))}const D=y(()=>typeof s.modelValue=="string"?M.fromISO(s.modelValue).shiftTo("days","hours","minutes","seconds","milliseconds"):s.modelValue?.shiftTo("days","hours","minutes","seconds","milliseconds")),E=x(D.value),m=x(D.value?.days),c=x(D.value?.hours),v=x(D.value?.minutes);$(()=>s.modelValue,e=>{typeof e=="string"&&(e=M.fromISO(e)),m.value=e?.days!==void 0&&e.days!==0?e.days:void 0,c.value=e?.hours!==void 0&&e.hours!==0?e.hours:void 0;const a=e?Number(e.minus({days:e.days,hours:e.hours}).as("minutes").toFixed(3)):void 0;v.value=a!==0?a:void 0},{immediate:!0});const b=y(()=>{const e={};return m.value&&(e.days=m.value),c.value&&(e.hours=c.value),v.value&&(e.minutes=v.value),M.fromObject(e)});$(()=>b.value,e=>{e.toMillis()<=0?(i("update:modelValue",void 0),i("isValid",s.allowEmpty&&!g.value)):(E.value=e,i("update:modelValue",e),i("isValid",!0))});function V(){const e=b.value.toMillis();if(e<=0)return;const a=e/(1e3*60),d=Math.floor(a/(60*24)),C=Math.floor(a%(60*24)/60),U=a%60;m.value=d===0?void 0:d,c.value=C===0?void 0:C,v.value=U===0?void 0:U}const n=y(()=>b.value>M.fromObject({minutes:0})),S=p("days"),I=p("hours"),N=p("minutes"),L=y(()=>{switch(s.variant){case"danger":return"tw-ring-red-400 tw-text-red-400";case"success":return"tw-ring-green-500";default:return"tw-ring-neutral-300"}});return(e,a)=>(l(),o("div",{class:f(["tw-space-y-1 tw-@container",{"tw-bg-neutral-100 tw-rounded-md tw-border tw-border-neutral-200 tw-p-3":t.allowEmpty}])},[t.label||t.allowEmpty?(l(),o("div",W,[t.label?(l(),o("label",{key:0,class:f(["tw-block tw-text-sm tw-font-bold tw-leading-6",{"tw-text-neutral-400":t.disabled,"tw-text-neutral-900":!t.disabled}])},k(t.label),3)):h("",!0),t.allowEmpty?(l(),o("div",J,[w(Q,{class:"tw-text-neutral-500","model-value":g.value,"disabled-tooltip":t.disabled?"Disabled":void 0,label:"Enable",size:"small","onUpdate:modelValue":O},null,8,["model-value","disabled-tooltip"])])):h("",!0)])):h("",!0),!t.allowEmpty||g.value?(l(),o("div",P,[u("div",{class:f(["tw-flex tw-flex-col tw-space-y-2 @sm:tw-flex-row @sm:tw-space-x-4 @sm:tw-space-y-0",L.value])},[u("div",R,[u("label",{for:`number-input:${r(S)}:input`,class:f(["tw-text-sm",{"tw-text-red-500":!n.value,"tw-text-neutral-400":t.disabled}])},"Days:",10,X),w(T,{class:"tw-grow",name:"days",id:r(S),"model-value":m.value,min:0,variant:t.variant==="primary"?n.value?"primary":"danger":t.variant,disabled:t.disabled,placeholder:"0-365","clear-on-zero":"","onUpdate:modelValue":a[0]||(a[0]=d=>m.value=Number(d)),onBlur:V},null,8,["id","model-value","variant","disabled"])]),u("div",Y,[u("label",{for:`number-input:${r(I)}:input`,class:f(["tw-text-sm",{"tw-text-red-500":!n.value,"tw-text-neutral-400":t.disabled}])},"Hours:",10,Z),w(T,{class:"tw-grow",name:"hours",id:r(I),"model-value":c.value,min:0,variant:t.variant==="primary"?n.value?"primary":"danger":t.variant,disabled:t.disabled,placeholder:"0-23","clear-on-zero":"","onUpdate:modelValue":a[1]||(a[1]=d=>c.value=Number(d)),onBlur:V},null,8,["id","model-value","variant","disabled"])]),u("div",_,[u("label",{for:`number-input:${r(N)}:input`,class:f(["tw-text-sm",{"tw-text-red-500":!n.value,"tw-text-neutral-400":t.disabled}])},"Minutes:",10,ee),w(T,{class:"tw-grow",name:"minutes",id:r(N),"model-value":v.value,min:0,variant:t.variant==="primary"?n.value?"primary":"danger":t.variant,disabled:t.disabled,placeholder:"0-59","clear-on-zero":"","onUpdate:modelValue":a[2]||(a[2]=d=>v.value=Number(d)),onBlur:V},null,8,["id","model-value","variant","disabled"])])],2),n.value?b.value&&B.value?(l(),o("div",ae,"Selected duration lasts until "+k(B.value.plus(b.value).toLocaleString(r(G).DATETIME_FULL_WITH_SECONDS)),1)):h("",!0):(l(),o("div",te,"Enter a valid duration.")),t.showGameTimeHint?(l(),F(z,{key:2},{default:j(()=>[w(K)],void 0,!0),_:1})):h("",!0),w(z,{variant:t.variant},{default:j(()=>[A(k(t.hintMessage),1)],void 0,!0),_:1},8,["variant"])])):(l(),o("p",le,k(t.hintMessage),1))],2))}});export{ne as _};
