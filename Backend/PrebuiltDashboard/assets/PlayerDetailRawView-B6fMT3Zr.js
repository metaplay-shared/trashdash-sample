import{d as $,bz as h,c as d,c5 as k,h as x,i as D,bs as E,e as o,o as i,w as t,m as V,j as n,f as r,ah as T,v as B,a as _,F as N,b as P,s as C,t as f,bl as S,x as R,k as u,_ as v,q as j,bH as z}from"./index-B-VT6L6o.js";import{_ as A}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-DhJnJrxb.js";import{_ as F,a as I}from"./MViewContainer.vue_vue_type_script_setup_true_lang-sbviMV0h.js";const L={key:0},O=$({__name:"PlayerDetailRawView",setup(q){const m=E(),p=h(),c=d(()=>k(p.params.id)),s=x();D(async()=>{const e=await m.get(`/players/${c.value}/raw`);s.value=Object.values(e.data)});const y=d(()=>s.value?.reduce((e,a)=>e+(a.error?1:0),0)??0),w=d(()=>{if(s.value){for(let e=0;e<s.value.length;e++)if(s.value[e].error)return e}return-1});function g(e){const a=new z(e.error.title,"");return e.error?.details&&a.addDetail("Details",e.error.details),a}return(e,a)=>(i(),o(r(I),{"is-loading":!s.value},{overview:t(()=>[n(r(F),{title:"Raw Player Details",subtitle:`There were a total of ${y.value} errors encountered when trying to retrieve this player's details.`,id:c.value,"data-testid":"raw-player-overview-card"},{default:t(()=>a[0]||(a[0]=[j("p",{class:"tw-text-sm tw-text-neutral-500"},"This page allows you to inspect a player's details even when the server is unable to correctly deserialize the player's data.",-1)]),void 0,!0),_:1,__:[0]},8,["subtitle","id"])]),default:t(()=>[s.value?(i(),o(r(T),{key:0,title:"Technical Details",noBodyPadding:"","data-testid":"raw-player-technical-details-card"},{default:t(()=>[n(r(B),null,{default:t(()=>[(i(!0),_(N,null,P(s.value,(l,b)=>(i(),o(r(C),{key:l.title,"is-open-by-default":w.value===b,"extra-m-list-item-margin":""},{header:t(()=>[n(r(R),{noLeftPadding:""},{badge:t(()=>[l.data?(i(),o(r(v),{key:0,variant:"success"},{default:t(()=>a[1]||(a[1]=[u("Valid",-1)]),void 0,!0),_:1,__:[1]})):(i(),o(r(v),{key:1,variant:"danger"},{default:t(()=>a[2]||(a[2]=[u("Not valid",-1)]),void 0,!0),_:1,__:[2]}))]),default:t(()=>[u(f(l.title),1)],void 0,!0),_:2},1024)]),default:t(()=>[l.data?(i(),_("pre",L,f(l.data),1)):(i(),o(r(S),{key:1,error:g(l)},null,8,["error"]))],void 0,!0),_:2},1032,["is-open-by-default"]))),128))],void 0,!0),_:1})],void 0,!0),_:1})):V("",!0),n(r(A),{data:s.value,label:"detailEntries"},null,8,["data"])],void 0,!0),_:1},8,["is-loading"]))}});export{O as default};
