import{d as xt,a as r,m as x,o as l,q as i,D as _,c as D,h as S,K as j,cB as Nt,b7 as zt,r as U,e as C,Q as B,w as E,j as p,k as y,t as g,f as w,_ as A,bD as Lt,F as ht,b as vt,bE as Vt,aS as pt,bd as wt,y as K,ae as mt,U as et,z as Rt,B as st,bF as jt,c9 as At,a7 as Kt,bI as qt,bj as Wt,cX as Gt,bg as Qt}from"./index-jY1EWd09.js";import{_ as ft}from"./MInputSingleSelectSwitch.vue_vue_type_script_setup_true_lang-DPh05re_.js";import{_ as Xt}from"./MInputText.vue_vue_type_script_setup_true_lang-Wwv8TYAB.js";import{_ as yt}from"./MInputMultiSelectCheckbox.vue_vue_type_script_setup_true_lang-BmEacL49.js";const Yt={key:0,class:"d-flex justify-content-center text-success h-100",style:{position:"relative"}},Zt={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},Jt={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},te={key:1,class:"d-flex justify-content-center text-success h-100",style:{position:"relative"}},ee={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},se={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},ne={key:2,class:"d-flex justify-content-center text-success h-100",style:{position:"relative"}},ie={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},le={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},ae={key:3,class:"d-flex justify-content-center text-success h-100",style:{position:"relative"}},oe={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},re={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},de={key:4,class:"d-flex justify-content-center text-success h-100",style:{position:"relative"}},ue={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},ce={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},he={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},ve={key:5,class:"d-flex justify-content-center text-success h-100",style:{position:"relative"}},pe={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",fill:"currentColor"}},we={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},me={key:6,class:"d-flex justify-content-center text-success h-100",style:{position:"relative"}},fe={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},ye={key:7,class:"d-flex justify-content-center text-success h-100",style:{position:"relative"}},ge={viewBox:"0 0 10 10",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"0",left:"32.5%",width:"35%",fill:"currentColor"}},xe={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",style:{fill:"currentColor","z-index":"1"}},_e={key:8,class:"d-flex justify-content-center text-success h-100",style:{position:"relative"}},be={key:9,class:"d-flex justify-content-center text-success h-100",style:{position:"relative"}},gt=xt({__name:"MetaEventStreamCardGroupLine",props:{variant:{}},setup(d){return(a,s)=>d.variant==="newest-terminated"?(l(),r("div",Yt,[(l(),r("svg",Zt,[...s[0]||(s[0]=[i("rect",{x:"3.5",y:"5",width:"3",height:"1"},null,-1)])])),(l(),r("svg",Jt,[...s[1]||(s[1]=[i("rect",{x:"4.5",y:"5",width:"1",height:"5"},null,-1)])]))])):d.variant==="newest-unterminated"?(l(),r("div",te,[(l(),r("svg",ee,[...s[2]||(s[2]=[i("rect",{x:"3.5",y:"5",width:"3",height:"1"},null,-1)])])),(l(),r("svg",se,[...s[3]||(s[3]=[i("rect",{x:"4.5",y:"5",width:"1",height:"5"},null,-1)])]))])):d.variant==="oldest-terminated"?(l(),r("div",ne,[(l(),r("svg",ie,[...s[4]||(s[4]=[i("rect",{x:"3.5",y:"5",width:"3",height:"1"},null,-1)])])),(l(),r("svg",le,[...s[5]||(s[5]=[i("rect",{x:"4.5",y:"0",width:"1",height:"5"},null,-1)])]))])):d.variant==="oldest-unterminated"?(l(),r("div",ae,[(l(),r("svg",oe,[...s[6]||(s[6]=[i("rect",{x:"3.5",y:"5",width:"3",height:"1"},null,-1)])])),(l(),r("svg",re,[...s[7]||(s[7]=[i("rect",{x:"4.5",y:"0",width:"1",height:"5"},null,-1)])]))])):d.variant==="both-terminated"?(l(),r("div",de,[(l(),r("svg",ue,[...s[8]||(s[8]=[i("rect",{x:"3.5",y:"0",width:"3",height:"1"},null,-1)])])),(l(),r("svg",ce,[...s[9]||(s[9]=[i("rect",{x:"3.5",y:"10",width:"3",height:"1"},null,-1)])])),(l(),r("svg",he,[...s[10]||(s[10]=[i("rect",{x:"4.5",y:"2.5",width:"1",height:"5.5"},null,-1)])]))])):d.variant==="skip"?(l(),r("div",ve,[(l(),r("svg",pe,[...s[11]||(s[11]=[i("rect",{x:"3.5",y:"4",width:"3",height:"1",transform:"rotate(-25, 3.5, 4)"},null,-1),i("rect",{x:"3.5",y:"6",width:"3",height:"1",transform:"rotate(-25, 3.5, 6)"},null,-1)])])),(l(),r("svg",we,[...s[12]||(s[12]=[i("rect",{x:"4.5",y:"0",width:"1",height:"4"},null,-1),i("rect",{x:"4.5",y:"6",width:"1",height:"4"},null,-1)])]))])):d.variant==="line"?(l(),r("div",me,[(l(),r("svg",fe,[...s[13]||(s[13]=[i("rect",{x:"4.5",y:"0",width:"1",height:"10"},null,-1)])]))])):d.variant==="grouped-event"?(l(),r("div",ye,[(l(),r("svg",ge,[...s[14]||(s[14]=[i("circle",{cx:"5",cy:"5",r:"4.5"},null,-1)])])),(l(),r("svg",xe,[...s[15]||(s[15]=[i("rect",{x:"4.5",y:"0",width:"1",height:"10"},null,-1)])]))])):d.variant==="root-event"?(l(),r("div",_e)):d.variant==="error"?(l(),r("div",be,[...s[16]||(s[16]=[i("small",null,"variant error",-1)])])):x("",!0)}});class q{id;path;time;type;typeData;constructor(a,s,u,c,o){this.id=a,this.path=s,this.time=u,this.type=c,this.typeData=o}search(a){return this.id.toLowerCase().includes(a)}getEventDisplayType(){}getEventKeywords(){}}class _t extends q{constructor(a,s,u,c,o,v,m,f){const k={title:s??"No title.",description:u??"No description.",sourceData:o,author:v,viewMore:m,viewMoreLink:f,terminatorStyle:null};super(c,"",a,"Event",k)}search(a){return this.typeData.title.toLowerCase().includes(a)||this.typeData.description.toLowerCase().includes(a)||this.typeData.author?.toLowerCase().includes(a)||super.search(a)}getEventDisplayType(){return this.typeData.title}getEventKeywords(){return this.typeData.sourceData.payload?.keywords}}class Ee extends q{constructor(a,s,u,c){const o=s.typeData.sourceData?.payload.sessionToken??"Unknown",v=s.time,m=u.time,f=_.fromISO(m).diff(_.fromISO(v)),k={startTime:v,duration:f,sessionNumber:s.typeData.sourceData?.payload.sessionNumber||"Unknown",numEvents:c,deviceName:s.typeData.sourceData?.payload.deviceModel||"Unknown"};super(o,a,m,"Session",k)}search(a){return this.typeData.deviceName.toLowerCase().includes(a)??super.search(a)}}class ke extends q{constructor(a,s,u,c){const o=s.time,v=u.time,m=_.fromISO(v).diff(_.fromISO(o)),f={numEvents:c,repeatedTitle:s.typeData.title,duration:m};super("",a,v,"RepeatedEvents",f)}search(a){return this.typeData.repeatedTitle.toLowerCase().includes(a)??super.search(a)}}class De extends q{constructor(a,s,u,c){const o=_.fromISO(s.time).toISODate()??"Unknown",v={date:s.time,numEvents:c,deviceName:s.typeData.sourceData?.payload.deviceModel??""};super(o,a,u.time,"Day",v)}search(a){return this.typeData.deviceName.toLowerCase().includes(a)??super.search(a)}}function js(d){const a=(o,v)=>{const m=[],f=o[0],k=o[o.length-1];if(!f||!k)throw new Error("wrapSessions failed: No events");const P=`session_${_.fromISO(f.time).toUnixInteger()}_${f.id}`;return m.push(...o.map(O=>(O.path=O.path+P,O))),m.length>1?(f.typeData.terminatorStyle=v?"oldest-terminated":"oldest-unterminated",k.typeData.terminatorStyle="newest-terminated"):f.typeData.terminatorStyle="both-terminated",m.push(new Ee(P,f,k,o.length)),m};let s=[],u=[],c=0;return d.forEach(o=>{if(o instanceof _t){const v=o.typeData.sourceData.payload.$type;v==="Metaplay.Core.Player.PlayerEventClientConnected"?(u.push(o),c++):v==="Metaplay.Core.Player.PlayerEventClientDisconnected"?c>0?(u.push(o),s.push(...a(u,!0)),u=[]):(s.push(o),s=a(s,!1)):u.length?u.push(o):s.push(o)}else s.push(o)}),u.length&&s.push(...a(u,!0)),s}function As(d){const a=u=>{const c=[],o=u[0],v=u[u.length-1];if(!o||!v)throw new Error("wrapDays failed: No events");const m=`date_${_.fromISO(o.time).toUnixInteger()}_${o.id}`;return c.push(...u.map(f=>(f.path=f.path+m,f))),c.length>1?(o.typeData.terminatorStyle="oldest-terminated",v.typeData.terminatorStyle="newest-terminated"):o.typeData.terminatorStyle="both-terminated",c.push(new De(m,o,v,u.length)),c},s=[];if(d.length){let u=[],c=_.fromISO(d[0].time).toISODate();d.forEach(o=>{u.push(o);const v=_.fromISO(o.time).toISODate();v!==c&&(s.push(...a(u)),u=[],c=v)}),u.length&&s.push(...a(u))}return s}function Ks(d,a=5){const s=o=>{if(o.length>=a){const v=o[0],m=o[o.length-1];if(!v||!m)throw new Error("wrapRepeatingEvents failed: No events");const f=`repeat_${_.fromISO(v.time).toUnixInteger()}_${v.id}`,k=[];return k.push(...o.map(P=>(P.path=P.path?`${P.path}.${f}`:f,P))),k.push(new ke(v.path,v,m,o.length)),k}else return o},u=[];let c=[];return d.forEach(o=>{o.type==="Event"?c.length===0?c=[o]:c[0].typeData.title===o.typeData.title?c.push(o):(u.push(...s(c)),c=[o]):(u.push(...s(c)),c=[],u.push(o))}),u.push(...s(c)),u}function qs(d){const a=d.reduce((m,f)=>m+(f instanceof _t?1:0),0),s=d[0],u=d[d.length-1];if(!s||!u)throw new Error("generateStats failed: No events");let c=null,o=null,v=null;return d.length&&(c=_.fromISO(s.time),o=_.fromISO(u.time),v=o.diff(c)),{numEvents:a,oldestEventTime:c,newestEventTime:o,duration:v}}function Te(d){const a=[],s=[];return d.forEach(u=>{const c=u.getEventDisplayType();c&&!a.includes(c)&&a.push(c);const o=u.getEventKeywords();o&&o.forEach(v=>{s.includes(v)||s.push(v)})}),a.sort(),s.sort(),{eventTypes:a,eventKeywords:s}}const Se={key:2,class:"tw-pointer-events-none tw-ml-2 tw-w-5 tw-h-5 tw-fill-blue-500 tw-animate-spin",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","aria-hidden":"true"},$e={style:{"margin-top":"-1rem"}},Ce={class:"text-muted tw-italic small mr-2"},Pe={key:0,class:"small text-muted tw-text-center mb-4 pt-4"},Me={key:1,class:"tw-w-full card-manual-content-padding pt-2"},Be={class:"tw-text-neutral-500 tw-text-xs+"},Fe={key:0,class:"tw-text-neutral-500 tw-text-xs+"},Ue={key:3},Oe=["id"],Ie={key:0,class:"tw-border-b tw-border-neutral-200 tw-mb-3"},He={key:0},Ne={key:1},ze={class:"sm:tw-flex tw-items-center sm:tw-space-x-2"},Le={key:2,class:"text-muted small tw-italic"},Ve={key:4,class:"text-muted small tw-italic"},Re={key:5,class:"tw-text-sm tw-mt-3"},je={class:"tw-font-semibold"},Ae={key:0,class:"tw-font-semibold"},Ke={key:0,class:"tw-text-center tw-text-neutral-500 tw-text-xs+ tw-pb-2 tw-space-x-1"},qe={key:1,class:"group-element-borders group-element-stripes tw-mb-3"},We=["data-testid"],Ge=["onClick"],Qe={class:"tw-grow"},Xe={class:"tw-flex tw-justify-between"},Ye={class:"tw-text-sm text-muted tw-ml-1"},Ze={class:"tw-text-sm"},Je={class:"tw-flex tw-justify-between"},ts={class:"tw-text-sm text-muted"},es={class:"tw-text-sm"},ss=["onClick"],ns={class:"tw-grow"},is={class:"tw-flex tw-justify-between"},ls={class:"font-weight-bold"},as={class:"tw-text-sm"},os={class:"tw-text-sm text-muted"},rs=["onClick"];const ds={class:"py-1 pr-2 text-right"},us={key:0},cs={key:0,class:"small text-muted"},hs={key:0},vs={key:1},ps={key:0},ws={class:"pl-2"},ms={key:0,class:"py-2"},fs={class:"font-weight-bold"},ys={key:1},gs={class:"text-muted small"},xs={class:"py-1 pr-2 text-right"},_s={key:0,class:"small text-muted"},bs={key:0,class:"text-nowrap"},Es={key:1},ks={key:0},Ds={class:"!tw-overflow-x-hidden",style:{"overflow-y":"hidden"}},Ts=["onClick"],Ss={class:"tw-w-full"},$s={class:"d-flex justify-content-between"},Cs={class:"font-weight-bold"},Ps={class:"font-weight-normal small text-muted tw-ml-1"},Ms={class:"small",style:{"padding-top":"0.2rem"}},Bs={class:"text-nowrap"},Fs={class:"text-muted small text-break-word"},Us={key:0,class:"tw-my-1"},Os={class:"tw-bg-neutral-100 tw-text-xs tw-p-3 tw-border-neutral-200 tw-border tw-rounded-md"},Is={class:"tw-text-neutral-600"},Hs={key:2,class:"small text-muted tw-text-center mb-4 pt-4"},Ns=xt({__name:"MetaEventStreamCard",props:{title:{},icon:{default:""},eventStream:{default:null},eventStreamLoading:{type:Boolean},utilitiesMode:{default:"filter"},utilitiesCondition:{default:"and"},searchPreHighlight:{default:void 0},keywordPreFilters:{default:()=>[]},eventTypePreFilters:{default:()=>[]},emptyMessage:{default:"No events in this stream."},noResultsMessage:{default:"No events found. Try a different search string? ðŸ¤”"},maxHeight:{default:""},permission:{default:""},showViewMoreLink:{type:Boolean,default:!1},showTimeDeltas:{type:Boolean,default:!0},allowPausing:{type:Boolean}},setup(d){const a=d,s=D(()=>a.eventTypePreFilters.length===0&&a.keywordPreFilters.length===0?a.eventStream:a.eventStream?.filter(e=>{if(e.type!=="Event"&&e.type!=="RepeatedEvents"||a.eventTypePreFilters.length>0&&a.eventTypePreFilters.includes(e.getEventDisplayType()??""))return!0;const t=e.getEventKeywords();return!!(a.keywordPreFilters.length>0&&t&&a.keywordPreFilters.some(h=>t.includes(h)))})),u=D(()=>Te(s.value??[])),c=S(""),o=S([]),v=S([]),m=S(a.utilitiesMode);j(()=>a.utilitiesMode,e=>{m.value=e});const f=S(a.utilitiesCondition);j(()=>a.utilitiesCondition,e=>{f.value=e});const k=D(()=>{if(O.value){let e=T.value;return(a.searchPreHighlight||M.value||F.value)&&(e=e.map(t=>{const h=bt(t);let b=!1;return f.value==="and"&&(M.value||F.value)?b=(c.value?it(t):!0)&&(o.value.length>0?lt(t):!0)&&(v.value.length>0?at(t):!0):b=it(t)||lt(t)||at(t),t.preHighlightMatch=h,t.userHighlightMatch=b,t})),m.value==="filter"&&(M.value||F.value)&&(e=e.filter(t=>t.userHighlightMatch)),e}else return T.value}),P=D(()=>{const e=[];return M.value&&e.push("search string"),o.value.length>0&&e.push("selected event type(s)"),v.value.length>0&&e.push("selected keyword(s)"),e}),O=D(()=>M.value||F.value||!!a.searchPreHighlight),M=D(()=>c.value.length>=1),F=D(()=>o.value.length>0||v.value.length>0);function nt(e){const t=_.fromISO(e).toUTC(),h=`UTC: ${t.toFormat("yyyy-MM-dd HH:mm")}`,b=t.toLocal(),$=Gt(b),z=b.offsetNameShort!==_.local().offsetNameShort?`
(adjusted for daylight savings)`:"",J=`UTC ${$}: ${b.toFormat("yyyy-MM-dd HH:mm")}${z}`;return`${h}
${J}`}function bt(e){return!!a.searchPreHighlight&&e.search(a.searchPreHighlight.toLocaleLowerCase())}function it(e){return!!c.value&&e.search(c.value.toLocaleLowerCase())}function lt(e){return o.value.includes(e.getEventDisplayType()??"")}function at(e){const t=e.getEventKeywords();return v.value.some(h=>t?.includes(h))}function Et(e){return e?T.value.reduce((t,h)=>h.getEventDisplayType()===e?t+1:t,0):0}function kt(e){return e?T.value.reduce((t,h)=>(h.getEventKeywords()??[]).includes(e)?t+1:t,0):0}function Dt(e){return e.preHighlightMatch?"presearch-highlight":m.value==="filter"?"":e.userHighlightMatch?"user-highlight":""}j([c,o,v],ot);const I=S([]);function ot(){O.value&&new Set(k.value.filter(t=>t.preHighlightMatch||t.userHighlightMatch).map(t=>t.path)).forEach(t=>{let h="";t.split(".").forEach(b=>{h+=b,rt(h),h+="."})})}function W(e){if(e)if(I.value.includes(e))Tt(e);else{let t="";e.split(".").forEach(h=>{t+=h,rt(t),t+="."})}}function rt(e){I.value.includes(e)||I.value.push(e)}function Tt(e){const t=I.value.indexOf(e);t!==-1&&I.value.splice(t,1)}function G(e){return I.value.includes(e)}const L=S([]);function St(e){return!!e.id}function $t(e){const{id:t}=e;if(t){const h=L.value.indexOf(t);h===-1?L.value.push(t):L.value.splice(h,1)}}function dt(e){return L.value.includes(e.id)}const T=Nt([]),Q=D(()=>k.value.filter(e=>{let t=e.path??"";if(e.type!=="Event"&&(t=t.substring(0,t.lastIndexOf("."))),!t)return!0;let h="",b=!0;const $=t.split(".");for(const z of $){if(h+=z,!G(h)){b=!1;break}h+="."}return b})),ut=D(()=>{let e=0;return Q.value.map(t=>{const h={...t,decorations:{timeBetweenEvents:Ct(Q.value[e],Q.value[e+1]),lineVariant:Ut(t)}};return G(t.path)&&(h.decorations.isPathUnfolded=!0),St(t)&&(h.decorations.isEventExpandable=!0),++e,h})});function Ct(e,t){const h=e?.time,b=t?.time;return h&&b?_.fromISO(h).diff(_.fromISO(b)):null}const H=S(!1),X=S(!1),Y=S(_.utc());function Pt(){H.value=!H.value}let ct=!1;j([s,H],([e,t],[h,b])=>{t?b&&(X.value=!0):(T.value=e?.slice().reverse()??[],X.value=!1,Y.value=_.utc()),!ct&&T.value.length>0&&(ct=!0,ot())},{immediate:!0,deep:!1});const V=D(()=>!!s.value),N=S(!1),Z=D(()=>a.permission?zt().doesHavePermission(a.permission):!0),Mt=D(()=>{const e=T.value.length,t=k.value.length;return T.value.filter(h=>h.type==="Event"||h.type==="RepeatedEvents").length?t!==e?`${t} / ${e}`:`${e}`:0}),Bt=D(()=>{const e=[];return(a.keywordPreFilters.length>0||a.eventTypePreFilters.length>0)&&e.push("pre-filtered data"),a.searchPreHighlight&&e.push("pre-highlighted data"),m.value==="filter"&&(M.value||F.value)?e.push("filter active"):m.value==="highlight"&&(M.value||F.value)&&e.push("highlight active"),e.join(" & ")}),Ft=D(()=>T.value.length===0?"neutral":"primary");function Ut(e){return e.type==="Event"?e.typeData.terminatorStyle?e.typeData.terminatorStyle:e.path?e.path.startsWith("repeat")?"none":"grouped-event":"none":e.type==="RepeatedEvents"&&e.path?e.path.startsWith("repeat")?"none":G(e.path)?"line":"skip":"error"}function Ot(e){const t=e.typeData.sourceData?.payload?.$type;if(t){const h=t.split(".").pop();if(h)return`event-${h.replace(/[^a-zA-Z0-9]/g,"-")}`}}return(e,t)=>{const h=U("fa-icon"),b=U("b-card-title"),$=U("b-skeleton"),z=U("b-row"),J=U("meta-username"),It=U("meta-lazy-loader"),Ht=U("b-card");return l(),C(Ht,{class:B(["shadow-sm",{"bg-light":!V.value||!Z.value}]),style:{"min-height":"12rem"},"no-body":""},{default:E(()=>[i("div",{class:"tw-cursor-pointer tw-px-4 tw-flex tw-justify-between tw-items-center tw-pt-4 tw-cursor-pointer",onClick:t[1]||(t[1]=n=>N.value=!N.value)},[p(b,{class:"tw-flex tw-items-center"},{default:E(()=>[d.icon?(l(),C(h,{key:0,class:"mr-2",icon:d.icon},null,8,["icon"])):x("",!0),y(g(d.title),1),V.value&&Z.value?(l(),C(w(A),{key:1,class:"tw-ml-1",shape:"pill",variant:Ft.value,"data-testid":"badge-text"},{default:E(()=>[y(g(Mt.value),1)],void 0,!0),_:1},8,["variant"])):x("",!0),d.eventStreamLoading?(l(),r("svg",Se,[...t[7]||(t[7]=[i("path",{d:"M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"},null,-1)])])):x("",!0)],void 0,!0),_:1}),i("span",$e,[i("span",Ce,g(Bt.value),1),p(w(Lt),{"disabled-tooltip":!V.value||!T.value.length?"There are no events to search.":void 0,"aria-label":"Toggle the utilities menu",onClick:t[0]||(t[0]=n=>N.value=!N.value)},{default:E(()=>[p(h,{class:"tw-mr-1",icon:"angle-right",size:"sm"}),p(h,{icon:"search",size:"sm"})],void 0,!0),_:1},8,["disabled-tooltip"])])]),Z.value?V.value?!T.value.length||!T.value.filter(n=>n.type==="Event"||n.type==="RepeatedEvents").length?(l(),C(z,{key:2,class:"tw-p-3 tw-text-center","align-h":"center","no-gutters":""},{default:E(()=>[i("p",Be,g(d.emptyMessage),1),d.keywordPreFilters.length>0||d.eventTypePreFilters.length>0?(l(),r("p",Fe,[t[10]||(t[10]=y("Event data has been pre-filtered down to events that match the following types OR keywords: ",-1)),i("span",null,g(d.eventTypePreFilters.concat(d.keywordPreFilters).join(", ")),1)])):x("",!0)],void 0,!0),_:1})):(l(),r("div",Ue,[p(w(Vt),null,{default:E(()=>[T.value.length&&N.value?(l(),r("div",{key:0,class:"tw-bg-neutral-100 tw-w-full tw-border-t tw-border-b tw-border-neutral-200 tw-px-4 tw-py-3",id:d.title},[d.keywordPreFilters.length>0||d.eventTypePreFilters.length>0||d.searchPreHighlight?(l(),r("div",Ie,[d.keywordPreFilters.length>0||d.eventTypePreFilters.length>0?(l(),r("div",He,[t[12]||(t[12]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Event Data Filters",-1)),i("p",null,[t[11]||(t[11]=y("Event data has been pre-filtered down to events that match the following types OR keywords: ",-1)),i("span",null,g(d.eventTypePreFilters.concat(d.keywordPreFilters).join(", ")),1)])])):x("",!0),d.searchPreHighlight?(l(),r("div",Ne,[t[15]||(t[15]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Pre-Highlight",-1)),i("p",null,[t[13]||(t[13]=y("Events matching the search string ",-1)),p(w(A),null,{default:E(()=>[y(g(d.searchPreHighlight),1)],void 0,!0),_:1}),t[14]||(t[14]=y(" are highlighted.",-1))])])):x("",!0)])):x("",!0),i("div",ze,[t[16]||(t[16]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Utilities Mode",-1)),p(w(ft),{"model-value":m.value,options:[{label:"Highlight",value:"highlight"},{label:"Filter",value:"filter"}],size:"small","onUpdate:modelValue":t[2]||(t[2]=n=>m.value=n)},null,8,["model-value"]),t[17]||(t[17]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Logic Condition",-1)),p(w(ft),{"model-value":f.value,options:[{label:"And",value:"and"},{label:"Or",value:"or"}],size:"small","onUpdate:modelValue":t[3]||(t[3]=n=>f.value=n)},null,8,["model-value"])]),t[20]||(t[20]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Search",-1)),p(w(Xt),{class:"tw-mb-2","model-value":c.value,placeholder:"Type your search here...",variant:M.value?"success":void 0,debounce:300,showClearButton:"","onUpdate:modelValue":t[4]||(t[4]=n=>c.value=n)},null,8,["model-value","variant"]),t[21]||(t[21]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Event Types",-1)),u.value.eventTypes.length>0?(l(),C(w(yt),{key:1,"model-value":o.value,options:u.value.eventTypes.map(n=>({label:`${n} (${Et(n)})`,value:n})),size:"small","onUpdate:modelValue":t[5]||(t[5]=n=>o.value=n)},null,8,["model-value","options"])):(l(),r("div",Le,"None available for this event stream.")),t[22]||(t[22]=i("div",{class:"tw-text-sm tw-leading-6 tw-font-bold"},"Keywords",-1)),u.value.eventKeywords.length>0?(l(),C(w(yt),{key:3,"model-value":v.value,options:u.value.eventKeywords.map(n=>({label:`${n} (${kt(n)})`,value:n})),size:"small","onUpdate:modelValue":t[6]||(t[6]=n=>v.value=n)},null,8,["model-value","options"])):(l(),r("div",Ve,"None available for this event stream.")),M.value||F.value?(l(),r("div",Re,[i("span",je,g(m.value==="filter"?"Only showing":"Highlighting"),1),t[18]||(t[18]=y(" events that match the",-1)),(l(!0),r(ht,null,vt(P.value,(n,R)=>(l(),r("span",{class:B({"tw-ml-1":R>0})},[R>0?(l(),r("span",Ae,g(f.value==="or"?"OR":"AND"),1)):x("",!0),y(" "+g(n),1)],2))),256)),t[19]||(t[19]=i("span",null,".",-1))])):x("",!0)],8,Oe)):x("",!0)],void 0,!0),_:1}),i("div",{class:"d-flex flex-column justify-content-between h-100",style:Wt(`max-height: ${d.maxHeight}; overflow-y: auto;`)},[i("div",null,[d.allowPausing?(l(),r("div",Ke,[pt(i("span",null,[t[23]||(t[23]=y("Last update ",-1)),p(w(K),{instant:Y.value},null,8,["instant"]),t[24]||(t[24]=y(".",-1))],512),[[wt,!H.value]]),pt(i("span",null,[t[25]||(t[25]=y("Updates paused ",-1)),p(w(K),{instant:Y.value},null,8,["instant"]),t[26]||(t[26]=y(".",-1))],512),[[wt,H.value]]),p(w(mt),{onClick:Pt,"data-testid":"play-pause-button"},{default:E(()=>[y(g(H.value?"Resume":"Pause")+" updates",1)],void 0,!0),_:1}),i("div",null,[X.value?(l(),C(w(A),{key:0,shape:"pill",variant:"primary"},{default:E(()=>[...t[27]||(t[27]=[y("New data available",-1)])],void 0,!0),_:1})):x("",!0)])])):x("",!0),ut.value.length>0?(l(),r("div",qe,[(l(!0),r(ht,null,vt(ut.value,(n,R)=>(l(),r("div",{class:"group","data-testid":Ot(n)},[(l(),C(It,{key:R,class:B(Dt(n)),placeholderEventHeight:50},{default:E(()=>[n.type==="Session"?(l(),r("div",{key:0,class:B(["card-manual-content-padding tw-flex clickable-list-group-item tw-py-3 tw-gap-2",{"group-open":n.decorations.isPathUnfolded}]),onClick:tt=>W(n.path)},[p(h,{class:"tw-mt-1 tw-text-sm",icon:"angle-right"}),i("div",Qe,[i("div",Xe,[i("div",null,[p(w(et),{class:"font-weight-bold",content:`Session ID: ${n.id}`,noUnderline:""},{default:E(()=>[y("Session #"+g(n.typeData.sessionNumber),1)],void 0,!0),_:2},1032,["content"]),i("span",Ye,g(n.typeData.numEvents)+" events",1)]),i("div",Ze,[p(w(K),{instant:w(_).fromISO(n.typeData.startTime)},null,8,["instant"])])]),i("div",Je,[i("div",ts,g(n.typeData.deviceName),1),i("div",es,[t[28]||(t[28]=y("Lasted for ",-1)),p(w(st),{duration:w(Rt).fromISO(n.typeData.duration)},null,8,["duration"])])])])],10,Ge)):x("",!0),n.type==="Day"?(l(),r("div",{key:1,class:B(["card-manual-content-padding tw-flex clickable-list-group-item tw-py-3 tw-gap-2",{"group-open":n.decorations.isPathUnfolded}]),onClick:tt=>W(n.path)},[p(h,{class:"tw-mt-1 tw-text-sm",icon:"angle-right"}),i("div",ns,[i("div",is,[i("div",ls,g(w(jt)(n.typeData.date)),1),i("div",as,[p(w(K),{instant:w(_).fromISO(n.typeData.date)},null,8,["instant"])])]),i("div",os,g(n.typeData.numEvents)+" events",1)])],10,ss)):n.type==="RepeatedEvents"?(l(),r("div",{key:2,class:B(["card-manual-content-padding clickable-list-group-item",{"group-open":n.decorations.isPathUnfolded}]),onClick:tt=>W(n.path)},[(l(),r("div",{key:1,class:B(`${n.decorations.lineVariant!=="none"?"three":"two"}-column-layout`)},[i("div",ds,[n.decorations.isPathUnfolded?x("",!0):(l(),r("div",us,[p(w(et),{content:nt(n.time)},{default:E(()=>[y(g(w(At)(n.time)),1)],void 0,!0),_:2},1032,["content"]),d.showTimeDeltas?(l(),r("div",cs,[n.decorations.timeBetweenEvents?(l(),r("span",hs,[t[31]||(t[31]=y("+ ",-1)),p(w(st),{duration:n.decorations.timeBetweenEvents,showAs:"topTwoUnits"},null,8,["duration"])])):(l(),r("span",vs,"Oldest event"))])):x("",!0)]))]),n.decorations.lineVariant!=="none"?(l(),r("div",ps,[p(gt,{variant:n.decorations.lineVariant},null,8,["variant"])])):x("",!0),i("div",ws,[n.decorations.isPathUnfolded?(l(),r("div",ys,[i("span",gs,[y(g(n.typeData.numEvents)+" repeating events. ",1),t[34]||(t[34]=i("span",{class:"tw-text-xs tw-text-blue-500 hover:tw-underline"},"Collapse",-1))])])):(l(),r("div",ms,[p(h,{class:"mr-2",icon:"angle-right"}),i("span",null,[y(g(n.typeData.numEvents)+" x ",1),i("span",fs,g(n.typeData.repeatedTitle),1),t[32]||(t[32]=y()),t[33]||(t[33]=i("span",{class:"tw-text-xs tw-text-blue-500 hover:tw-underline"},"Expand",-1))])]))])],2))],10,rs)):n.type==="Event"?(l(),r("div",{key:3,class:B(["card-manual-content-padding",`${n.decorations.lineVariant!=="none"?"three":"two"}-column-layout`]),ref_for:!0,ref:"event-item"},[i("div",xs,[p(w(et),{content:nt(n.time)},{default:E(()=>[y(g(w(_).fromISO(n.time).toUTC().toFormat("HH:mm:ss")),1)],void 0,!0),_:2},1032,["content"]),d.showTimeDeltas?(l(),r("div",_s,[n.decorations.timeBetweenEvents?(l(),r("span",bs,[t[35]||(t[35]=y("+ ",-1)),p(w(st),{duration:n.decorations.timeBetweenEvents,showAs:"topTwoUnits"},null,8,["duration"])])):(l(),r("span",Es,"Oldest event"))])):x("",!0)]),n.decorations.lineVariant!=="none"?(l(),r("div",ks,[p(gt,{variant:n.decorations.lineVariant},null,8,["variant"])])):x("",!0),i("div",Ds,[i("div",{class:"clickable-list-group-item d-flex rounded-sm py-1 pr-1",onClick:tt=>$t(n)},[(n.decorations.isEventExpandable,l(),r("div",{key:0,class:B({"not-collapsed":dt(n)})},[p(h,{class:"tw-text-sm mx-2",icon:"angle-right"})],2)),i("div",Ss,[i("div",$s,[i("div",null,[i("span",Cs,g(n.typeData.title),1),i("span",Ps,[n.typeData.author?(l(),C(J,{key:0,username:n.typeData.author},null,8,["username"])):x("",!0)])]),i("div",Ms,[d.showViewMoreLink&&n.typeData.viewMoreLink?(l(),C(w(mt),{key:0,to:n.typeData.viewMoreLink,"data-testid":"view-more-link"},{default:E(()=>[i("div",Bs,"View "+g(n.typeData.viewMore),1)],void 0,!0),_:2},1032,["to"])):x("",!0)])]),i("div",Fs,g(n.typeData.description),1)])],8,Ts),p(qt,{name:"collapse-transition"},{default:E(()=>[dt(n)?(l(),r("div",Us,[Kt(e.$slots,"event-details",{event:n},()=>[i("pre",Os,[t[36]||(t[36]=i("div",{class:"tw-text-neutral-500"},"// raw_event_payload",-1)),i("div",Is,g(n.typeData.sourceData),1)])],!0)])):x("",!0)],void 0,!0),_:2},1024)])],2)):x("",!0)],void 0,!0),_:2},1032,["class"]))],8,We))),256))])):(l(),r("div",Hs,g(d.noResultsMessage),1))])],4)])):(l(),r("div",Me,[p($,{width:"85%"}),p($,{width:"55%"}),p($,{width:"70%"}),p($,{class:"tw-mt-4",width:"80%"}),p($,{width:"65%"})])):(l(),r("div",Pe,[t[8]||(t[8]=y("You need the ",-1)),p(w(A),null,{default:E(()=>[y(g(d.permission),1)],void 0,!0),_:1}),t[9]||(t[9]=y(" permission to view this card.",-1))]))],void 0,!0),_:3},8,["class"])}}}),Ws=Qt(Ns,[["__scopeId","data-v-ad490e46"]]);export{_t as E,Ws as M,js as a,As as b,qs as g,Ks as w};
