import{V as p,W as b,X as T,Y as F,Z as N,$ as k,a0 as C,a1 as j,a2 as A,d as M,N as E,O as R,P as U,h as B,E as D,a3 as G,c as V,a4 as H,K as $,a as v,o as m,e as L,m as w,n as y,F as Y,b as Z}from"./index-jY1EWd09.js";import{g as K}from"./utils-B01yCWQ7.js";import{_ as z}from"./GeneratedUiFormDynamicComponent.vue_vue_type_script_setup_true_lang-YgpMK99r.js";import{i as S}from"./identity-DKeuBCMA.js";function W(e,n,i){switch(i.length){case 0:return e.call(n);case 1:return e.call(n,i[0]);case 2:return e.call(n,i[0],i[1]);case 3:return e.call(n,i[0],i[1],i[2])}return e.apply(n,i)}var X=800,q=16,J=Date.now;function Q(e){var n=0,i=0;return function(){var s=J(),t=q-(s-i);if(i=s,t>0){if(++n>=X)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function x(e){return function(){return e}}var _=p?function(e,n){return p(e,"toString",{configurable:!0,enumerable:!1,value:x(n),writable:!0})}:S,ee=Q(_);function ie(e,n,i,s){for(var t=e.length,l=i+-1;++l<t;)if(n(e[l],l,e))return l;return-1}function ne(e){return e!==e}function ae(e,n,i){for(var s=i-1,t=e.length;++s<t;)if(e[s]===n)return s;return-1}function te(e,n,i){return n===n?ae(e,n,i):ie(e,ne,i)}function le(e,n){var i=e==null?0:e.length;return!!i&&te(e,n,0)>-1}var P=Math.max;function oe(e,n,i){return n=P(n===void 0?e.length-1:n,0),function(){for(var s=arguments,t=-1,l=P(s.length-n,0),d=Array(l);++t<l;)d[t]=s[n+t];t=-1;for(var u=Array(n+1);++t<n;)u[t]=s[t];return u[n]=i(d),W(e,this,u)}}function re(e,n){return ee(oe(e,n,S),e+"")}var O=b?b.isConcatSpreadable:void 0;function se(e){return T(e)||F(e)||!!(O&&e&&e[O])}function ue(e,n,i,s,t){var l=-1,d=e.length;for(i||(i=se),t||(t=[]);++l<d;){var u=e[l];i(u)&&N(t,u)}return t}function I(e){return k(e)&&C(e)}var ce=200;function de(e,n,i,s){var t=-1,l=le,d=!0,u=e.length,f=[],g=n.length;if(!u)return f;n.length>=ce&&(l=A,d=!1,n=new j(n));e:for(;++t<u;){var c=e[t],a=c;if(c=c!==0?c:0,d&&a===a){for(var r=g;r--;)if(n[r]===a)continue e;f.push(c)}else l(n,a,s)||f.push(c)}return f}var fe=re(function(e,n){return I(e)?de(e,ue(n,1,I)):[]});const me={key:0},ve={key:1},Le=M({__name:"GeneratedUiFormLocalizedField",props:{...R,value:{type:Object,default:()=>({localizations:[]})}},emits:E,setup(e,{emit:n}){const i=e,s=n,{update:t}=U(i,s),l=B(i.value.localizations),d=a=>Object.fromEntries(i.editLocales.map(r=>r in a?[r,a[r]]:[r,""])),u=a=>{l.value={...l.value,[i.previewLocale]:a};const r=d({...i.value.localizations,[i.previewLocale]:a}),o={...i.value,localizations:r};t(o)},f=(a,r)=>{l.value={...l.value,[r]:a};const o=d({...i.value.localizations,[r]:a}),h={...i.value,localizations:o};t(h)},{data:g}=D(G(["Languages"])),c=V(()=>{const a=i.fieldSchema.fields.find(o=>o.fieldName==="Localizations"),r={};for(const o of i.editLocales)r[o]={...i.fieldInfo,fieldName:i.fieldInfo.fieldName,fieldType:a.typeParams[1],displayProps:{displayName:H(i.fieldInfo.fieldName??"")+" ("+K(o,g.value)+")"}};return r});return $(()=>i.editLocales,(a,r)=>{const o=fe(a,r??[]);o.length&&setTimeout(()=>{o[0]&&l.value[o[0]]&&f(l.value[o[0]],o[0])}),setTimeout(()=>{u(i.previewLocale&&i.previewLocale in i.value.localizations?i.value.localizations[i.previewLocale]:"")},10)},{deep:!0,flush:"post"}),(a,r)=>a.previewLocale?(m(),v("div",me,[c.value?(m(),L(z,y({key:0},i,{key:a.fieldInfo.fieldName+"-"+a.previewLocale},{fieldInfo:c.value[a.previewLocale],value:e.value.localizations&&e.value.localizations[a.previewLocale]||void 0,fieldPath:a.fieldPath+"/Localizations/"+a.previewLocale,contextObj:a.fieldSchema.useAsContext?e.value:a.contextObj,"logic-version":a.logicVersion,disabled:a.disabled,isTargetingMultiplePlayers:a.isTargetingMultiplePlayers,onInput:u}),null,16,["fieldInfo","value","fieldPath","contextObj","logic-version","disabled","isTargetingMultiplePlayers"])):w("",!0)])):(m(),v("div",ve,[(m(!0),v(Y,null,Z(a.editLocales,o=>(m(),v("div",{key:a.fieldInfo.fieldName+"-"+o},[c.value?(m(),L(z,y({key:0},i,{fieldInfo:c.value[o],value:e.value.localizations&&e.value.localizations[o]||void 0,fieldPath:a.fieldPath+"/Localizations/"+o,contextObj:a.fieldSchema.useAsContext?e.value:a.contextObj,"logic-version":a.logicVersion,disabled:a.disabled,isTargetingMultiplePlayers:a.isTargetingMultiplePlayers,onInput:h=>f(h,o)}),null,16,["fieldInfo","value","fieldPath","contextObj","logic-version","disabled","isTargetingMultiplePlayers","onInput"])):w("",!0)]))),128))]))}});export{Le as default};
