import{d as L,E as D,c as M,af as S,h as $,r as o,e as m,o as s,w as i,j as n,a as r,m as E,q as _,k as b,f as e,ag as T,ah as V,a6 as B,cJ as F,y as R,D as j,t as p}from"./index-B-VT6L6o.js";import{g as O}from"./guilds-B8vDp8y0.js";import{M as U}from"./MSingleColumnLayout-Bc4oHrRo.js";import{_ as W}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-DhJnJrxb.js";import{a as q}from"./MViewContainer.vue_vue_type_script_setup_true_lang-sbviMV0h.js";const J={class:"tw-mb-1 tw-ml-2","data-testid":"guild-search"},z={key:0},H={key:0,class:"pt-5 tw-w-full tw-text-center"},K={key:1},P={key:0},Q={key:1},X={key:1},ae=L({__name:"GuildListView",setup(Y){const{isDeveloperUiEnabled:v}=T(),{data:c,error:g}=D(O()),k=M(()=>{const t=[{key:"entityId",label:"ID"},{key:"displayName",label:"Name"},{key:"numMembers",label:"Members"},{key:"lastLoginAt",label:"Last Active"}];return Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)<576?h(t,["entityId","displayName"]):t});function h(t,l){return t.filter(d=>{let u;return typeof d=="string"?u=d:u=d.key,l.includes(u)})}const f=S(),y=$();async function w(t){y.value=t,await f.push(`/guilds/${t.entityId}`)}async function A(t){await f.push(`/guilds/${t.entityId}`)}function C(t,l){if(!(!t||l!=="row"))return t.phase==="Closed"?"text-danger table-row-link":"table-row-link"}return(t,l)=>{const d=o("fa-icon"),u=o("meta-input-guild-select"),N=o("b-col"),I=o("b-row"),x=o("b-spinner"),G=o("b-table");return s(),m(e(q),{"is-loading":!e(c),error:e(g)},{default:i(()=>[n(I,{class:"justify-content-center",style:{"margin-top":"8rem","margin-bottom":"7rem"}},{default:i(()=>[n(N,{md:"10",lg:"7",xl:"5"},{default:i(()=>[_("h4",J,[n(d,{icon:"search"}),l[0]||(l[0]=b(" Find a guild",-1))]),n(u,{value:y.value,onInput:w},null,8,["value"])],void 0,!0),_:1})],void 0,!0),_:1}),e(v)?(s(),r("div",z,[e(c)?(s(),r("div",K,[n(e(U),null,{default:i(()=>[n(e(V),{title:"Recently Active Guilds","data-testid":"active-guilds-list"},{default:i(()=>[e(c).length===0?(s(),m(e(B),{key:0,title:"No recently active guilds",variant:"neutral"},{default:i(()=>l[1]||(l[1]=[b("No guilds have been active since last server reboot.",-1)]),void 0,!0),_:1,__:[1]})):(s(),m(G,{key:1,class:"table-fixed-column",small:"",striped:"",hover:"",responsive:"",items:e(c),fields:k.value,"primary-key":"entityId","sort-by":"startAt","sort-desc":"","tbody-tr-class":C,onRowClicked:A},{"cell(entityId)":i(a=>[_("span",null,p(a.item.entityId),1)]),"cell(displayName)":i(a=>[a.item.phase==="Closed"?(s(),r("span",P,"☠️")):(s(),r("span",Q,p(a.item.displayName),1))]),"cell(numMembers)":i(a=>[_("span",null,p(a.item.numMembers),1)]),"cell(lastLoginAt)":i(a=>[e(F)(a.item.lastLoginAt)?(s(),r("span",X,"Closed")):(s(),m(e(R),{key:0,instant:e(j).fromISO(a.item.lastLoginAt),disableTooltip:"",showAs:"relativeSentenceCase"},null,8,["instant"]))]),_:1},8,["items","fields"]))],void 0,!0),_:1})],void 0,!0),_:1})])):(s(),r("div",H,[n(x,{class:"mt-5",label:"Loading..."})]))])):E("",!0),n(e(W),{data:e(c),label:"allActiveGuilds"},null,8,["data"])],void 0,!0),_:1},8,["is-loading","error"])}}});export{ae as default};
