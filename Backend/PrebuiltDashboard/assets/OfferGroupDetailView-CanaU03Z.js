import{d as te,E as H,c as g,e as w,o as a,f as e,w as t,j as i,a as r,k as s,B as M,A as I,t as c,ah as V,Q as ve,q as n,_ as S,e2 as le,y as q,D as E,U as D,z as y,r as C,v as ce,x as T,ad as z,b as me,F as pe,ae as ge,m as G,s as _e,by as he,c7 as X,H as we,e9 as ye,a6 as be,bx as xe,bj as Y,bg as Se}from"./index-jY1EWd09.js";import{_ as ke}from"./MetaAudienceSizeEstimate.vue_vue_type_script_setup_true_lang-wU-8cgN7.js";import{_ as Z}from"./MetaActivablePhaseBadge.vue_vue_type_script_setup_true_lang-SumaTD3C.js";import{_ as Oe}from"./PlayerConditionsCard.vue_vue_type_script_setup_true_lang-B5TAo8AR.js";import{_ as $e}from"./SegmentsCard.vue_vue_type_script_setup_true_lang-bDQVBVkC.js";import{c as ne,a as Te}from"./offers-DBtp9gqX.js";import{_ as re}from"./MTwoColumnLayout.vue_vue_type_script_setup_true_lang-B5zJm1QQ.js";import{a as se}from"./numberUtils-CkF0oMe2.js";import{M as P,a as B}from"./metaListUtils-B-xQ0HnD.js";import{_ as Me}from"./MTabLayout.vue_vue_type_script_setup_true_lang-B1ekLQtC.js";import{M as Ce}from"./MSingleColumnLayout-BSf_YwiY.js";import{_ as ae}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-Db7v8Vrj.js";import{_ as Ie,a as Ae}from"./MViewContainer.vue_vue_type_script_setup_true_lang-C_1W2rCL.js";import{_ as ee}from"./MAbbreviateNumber.vue_vue_type_script_setup_true_lang-C_9AAI8F.js";import{B as Fe,a as j}from"./progress-CmZZuji0.js";import"./players-Dfl1Givn.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-CqJL3vnO.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";const Pe={key:0,class:"tw-my-4"},De={key:0,class:"tw-text-center tw-text-neutral-400"},Ge={key:1,class:"tw-text-center tw-text-neutral-400"},Ne={key:2,class:"tw-text-center"},Be={key:3,class:"tw-text-neutral-400"},Ee={key:1,class:"tw-text-center tw-text-neutral-400"},Le={key:0,class:"tw-my-4"},Ue={key:0,class:"tw-text-center tw-text-neutral-400"},Re={key:2},Ve={class:"tw-text-neutral-400"},ze={style:{"font-size":"0.7rem"}},je={key:1,class:"tw-text-center tw-text-neutral-400"},qe={key:0},He={key:0,class:"tw-w-full"},Qe={class:"tw-divide-y tw-divide-neutral-200 *:*:tw-py-1.5"},Je={key:0,class:"text-right"},Ke={key:1,class:"text-right"},We={key:0,class:"text-right"},Xe={key:1,class:"text-right"},Ye={class:"text-right"},Ze={class:"text-right"},et={class:"text-right"},tt={class:"text-right"},it={key:0,class:"text-right tw-italic tw-text-neutral-400"},ot={key:1,class:"text-right"},st={class:"text-right"},at={key:0},lt={key:1},nt={class:"tw-text-neutral-400"},rt={style:{"font-size":"0.7rem"}},ut={key:1,class:"tw-text-center tw-text-neutral-400"},dt={class:"tw-w-full"},ft={class:"tw-divide-y tw-divide-neutral-200 *:*:tw-py-1.5"},vt={key:0,class:"text-right tw-italic tw-text-neutral-400"},ct={key:1,class:"text-right"},mt={key:0,class:"text-right tw-italic tw-text-neutral-400"},pt={key:1,class:"text-right"},gt={key:0,class:"text-right tw-italic tw-text-neutral-400"},_t={key:1,class:"text-right"},ht=te({__name:"OfferGroupScheduleCard",props:{offerGroupId:{}},setup(F){const A=F,{data:k}=H(()=>ne(A.offerGroupId)),l=g(()=>k.value.config.activableParams),d=g(()=>l.value.lifetime.$type.match(/Metaplay\.Core.Activables\.MetaActivableLifetimeSpec\+(.*)/)[1]),N=g(()=>l.value.schedule.$type.match(/Metaplay\.Core\.Schedule\.(.*)/)[1]),O=g(()=>l.value.cooldown.$type.match(/Metaplay\.Core\.Activables\.MetaActivableCooldownSpec\+(.*)/)[1]);return(v,f)=>(a(),w(e(re),null,{default:t(()=>[i(e(V),{title:"Lifetime",variant:!l.value.lifetime||d.value==="ScheduleBased"?"neutral":void 0,badge:!l.value.lifetime||d.value==="ScheduleBased"?"Off":"On","badge-variant":!l.value.lifetime||d.value==="ScheduleBased"?void 0:"success","data-testid":"offer-group-detail-lifetime-card"},{default:t(()=>[l.value.lifetime?(a(),r("div",Pe,[d.value==="ScheduleBased"?(a(),r("div",De,"This activable's lifetime follows the schedule.")):d.value==="Forever"?(a(),r("div",Ge,"This activable exists forever.")):d.value==="Fixed"?(a(),r("div",Ne,[f[0]||(f[0]=s("This activable's lifetime is ",-1)),i(e(M),{duration:e(I)(l.value.lifetime.duration)},null,8,["duration"]),f[1]||(f[1]=s(".",-1))])):(a(),r("div",Be,"Unknown lifetime type: "+c(d.value)+".",1))])):(a(),r("div",Ee,"No lifetime defined."))],void 0,!0),_:1},8,["variant","badge","badge-variant"]),i(e(V),{title:"Cooldown",variant:!l.value.cooldown||O.value==="ScheduleBased"||e(I)(l.value.cooldown.duration).toMillis()===0?"neutral":void 0,badge:!l.value.cooldown||O.value==="ScheduleBased"||e(I)(l.value.cooldown.duration).toMillis()===0?"Off":"On","badge-variant":!l.value.cooldown||O.value==="ScheduleBased"||e(I)(l.value.cooldown.duration).toMillis()===0?void 0:"success","data-testid":"offer-group-detail-cooldown-card"},{default:t(()=>[l.value.cooldown?(a(),r("div",Le,[O.value==="ScheduleBased"?(a(),r("div",Ue,"This activable's cooldown period follows the schedule.")):O.value==="Fixed"?(a(),r("div",{key:1,class:ve(["tw-text-center",{"tw-text-neutral-400":e(I)(l.value.cooldown.duration).as("seconds")===0}])},[f[2]||(f[2]=s("This activable's cooldown period is ",-1)),i(e(M),{duration:e(I)(l.value.cooldown.duration)},null,8,["duration"]),f[3]||(f[3]=s(".",-1))],2)):(a(),r("div",Re,[n("div",Ve,"Unknown cooldown type: "+c(O.value)+".",1),n("pre",ze,c(l.value.cooldown),1)]))])):(a(),r("div",je,"No cooldown defined."))],void 0,!0),_:1},8,["variant","badge","badge-variant"]),i(e(V),{title:"Schedule",variant:l.value.schedule?void 0:"neutral",badge:l.value.schedule?"On":"Off","badge-variant":l.value.schedule?"success":void 0,"data-testid":"offer-group-detail-schedule-card"},{default:t(()=>[l.value.schedule?(a(),r("div",qe,[N.value==="MetaRecurringCalendarSchedule"?(a(),r("table",He,[n("tbody",Qe,[n("tr",null,[f[4]||(f[4]=n("td",null,"Time mode",-1)),l.value.schedule.timeMode!=="Utc"?(a(),r("td",Je,[i(e(S),null,{default:t(()=>[s(c(l.value.schedule.timeMode),1)],void 0,!0),_:1})])):(a(),r("td",Ke,[i(e(S),null,{default:t(()=>[s(c(e(le)(l.value.schedule.timeMode)),1)],void 0,!0),_:1})]))]),n("tr",null,[f[5]||(f[5]=n("td",null,"Start",-1)),l.value.schedule.timeMode==="Utc"?(a(),r("td",We,[i(e(q),{instant:e(E).fromISO(l.value.schedule.start,{zone:"utc"}),"show-as":"dateTime"},null,8,["instant"])])):(a(),r("td",Xe,[i(e(D),{content:"The local start time of this schedule is local to the player's game time offset."},{default:t(()=>[s(c(e(E).fromISO(l.value.schedule.start).toFormat("ccc, DD, T"))+" local",1)],void 0,!0),_:1})]))]),n("tr",null,[f[6]||(f[6]=n("td",null,"Preview",-1)),n("td",Ye,[i(e(M),{duration:e(y).fromISO(l.value.schedule.preview),"show-as":"exactDuration"},null,8,["duration"])])]),n("tr",null,[f[7]||(f[7]=n("td",null,"Duration",-1)),n("td",Ze,[i(e(M),{duration:e(y).fromISO(l.value.schedule.duration),"show-as":"exactDuration"},null,8,["duration"])])]),n("tr",null,[f[8]||(f[8]=n("td",null,"Ending Soon",-1)),n("td",et,[i(e(M),{duration:e(y).fromISO(l.value.schedule.endingSoon),"show-as":"exactDuration"},null,8,["duration"])])]),n("tr",null,[f[9]||(f[9]=n("td",null,"Review",-1)),n("td",tt,[i(e(M),{duration:e(y).fromISO(l.value.schedule.review),"show-as":"exactDuration"},null,8,["duration"])])]),n("tr",null,[f[10]||(f[10]=n("td",null,"Repeats",-1)),l.value.schedule.numRepeats===null?(a(),r("td",it,"Unlimited")):(a(),r("td",ot,c(l.value.maxTotalConsumes),1))]),n("tr",null,[f[11]||(f[11]=n("td",null,"Recurrence",-1)),n("td",st,[l.value.schedule.recurrence===null?(a(),r("div",at,"Never")):(a(),w(e(M),{key:1,duration:e(y).fromISO(l.value.schedule.recurrence),"show-as":"exactDuration"},null,8,["duration"]))])])])])):(a(),r("div",lt,[n("div",nt,"Unknown schedule type: "+c(N.value)+".",1),n("pre",rt,c(l.value.schedule),1)]))])):(a(),r("div",ut,"No schedule defined."))],void 0,!0),_:1},8,["variant","badge","badge-variant"]),i(e(V),{title:"Activations","data-testid":"offer-group-detail-activations-card"},{default:t(()=>[n("table",dt,[n("tbody",ft,[n("tr",null,[f[12]||(f[12]=n("td",null,"Max Activations",-1)),l.value.maxActivations===null?(a(),r("td",vt,"Unlimited")):(a(),r("td",ct,c(l.value.maxActivations),1))]),n("tr",null,[f[13]||(f[13]=n("td",null,"Max Total Consumes",-1)),l.value.maxTotalConsumes===null?(a(),r("td",mt,"Unlimited")):(a(),r("td",pt,c(l.value.maxTotalConsumes),1))]),n("tr",null,[f[14]||(f[14]=n("td",null,"Max Consumed Per Activation",-1)),l.value.maxConsumesPerActivation===null?(a(),r("td",gt,"Unlimited")):(a(),r("td",_t,c(l.value.maxConsumesPerActivation),1))])])])],void 0,!0),_:1})],void 0,!0),_:1}))}}),wt={key:0,class:"tw-mt-0.5 tw-text-sm tw-text-neutral-500"},yt={key:0},bt={key:1,class:"tw-italic tw-text-neutral-400"},xt={key:0},St={key:1,class:"tw-italic tw-text-neutral-400"},kt=te({__name:"OfferGroupsOffersCard",props:{title:{default:"Offers"},offerGroupId:{},emptyMessage:{}},setup(F){const A=F,{data:k}=H(Te());function l(_){if(!A.offerGroupId)return;const u=_.config.offerId;return k.value.offerGroups[A.offerGroupId].perOfferStatistics[u]}const d=g(()=>{if(k.value){const _=k.value.offerGroups[A.offerGroupId].config.offers;return Object.values(k.value.offers??{}).filter(u=>_===null||_.includes(u.config.offerId)).map(u=>{const $=l(u),x=$.numPurchasedForFirstTime,m=$.numActivatedForFirstTime;return{...u,conversion:O(x,m),conversionTooltip:v(x,m)}})}else return});function N(_){return Object.values(k.value.offerGroups).some(u=>u.config.offers.includes(_.config.offerId))}function O(_,u){return u===0?0:_/u*100}function v(_,u){return u===0?"Not activated in this offer group by any players yet.":`In this offer group, activated by ${se(u)} players and purchased by ${se(_)}.`}const f=g(()=>[P.asUnsorted(),new P("Name","config.displayName",B.Ascending),new P("Name","config.displayName",B.Descending),new P("Conversion","conversion",B.Ascending),new P("Conversion","conversion",B.Descending),new P("Revenue","statistics.revenue",B.Ascending),new P("Revenue","statistics.revenue",B.Descending)]),L=["config.displayName","config.description"];return(_,u)=>{const $=C("meta-reward-badge"),x=C("meta-list-card");return a(),w(x,{title:F.title,icon:"tag",emptyMessage:F.emptyMessage,itemList:d.value,searchFields:L,sortOptions:f.value},{"item-card":t(m=>[i(e(_e),{extraMListItemMargin:""},{header:t(()=>[i(e(T),{noLeftPadding:""},{badge:t(()=>[m.item.referencePrice!==null?(a(),r("span",wt,c(m.item.referencePrice),1)):G("",!0),N(m.item)?G("",!0):(a(),w(e(S),{key:1,variant:"warning"},{default:t(()=>[...u[0]||(u[0]=[s("Unused",-1)])],void 0,!0),_:1}))]),"top-right":t(()=>[i(e(D),{content:m.item.conversionTooltip},{default:t(()=>[s(c(m.item.conversion.toFixed(0))+"% conversion",1)],void 0,!0),_:2},1032,["content"])]),"bottom-left":t(()=>[s(c(m.item.config.description),1)]),"bottom-right":t(()=>[i(e(ge),{to:`/offerGroups/offer/${m.item.config.offerId}`,"data-testid":"view-offer"},{default:t(()=>[...u[1]||(u[1]=[s("View offer",-1)])],void 0,!0),_:1},8,["to"])]),default:t(()=>[s(c(m.item.config.displayName),1)],void 0,!0),_:2},1024)]),default:t(()=>[i(e(ce),{showBorder:"",striped:""},{default:t(()=>[i(e(T),{condensed:""},{"top-right":t(()=>[s(c(e(z)(l(m.item).numActivatedForFirstTime,"player",!0)),1)]),default:t(()=>[i(e(D),{content:"Value in the context of this offer group."},{default:t(()=>[...u[2]||(u[2]=[s("Local",-1)])],void 0,!0),_:1}),u[3]||(u[3]=s(" Seen by",-1))],void 0,!0),_:2},1024),i(e(T),{condensed:""},{"top-right":t(()=>[s(c(e(z)(l(m.item).numPurchasedForFirstTime,"player",!0)),1)]),default:t(()=>[i(e(D),{content:"Value in the context of this offer group."},{default:t(()=>[...u[4]||(u[4]=[s("Local",-1)])],void 0,!0),_:1}),u[5]||(u[5]=s(" Purchased by",-1))],void 0,!0),_:2},1024),i(e(T),{condensed:""},{"top-right":t(()=>[s(c(e(z)(l(m.item).numActivated,"time",!0)),1)]),default:t(()=>[i(e(D),{content:"Value in the context of this offer group."},{default:t(()=>[...u[6]||(u[6]=[s("Local",-1)])],void 0,!0),_:1}),u[7]||(u[7]=s(" Total Seen Count",-1))],void 0,!0),_:2},1024),i(e(T),{condensed:""},{"top-right":t(()=>[s(c(e(z)(l(m.item).numPurchased,"time",!0)),1)]),default:t(()=>[i(e(D),{content:"Value in the context of this offer group."},{default:t(()=>[...u[8]||(u[8]=[s("Local",-1)])],void 0,!0),_:1}),u[9]||(u[9]=s(" Total Purchased Count",-1))],void 0,!0),_:2},1024),i(e(T),{condensed:""},{"top-right":t(()=>[s("$"+c(l(m.item).revenue.toFixed(2)),1)]),default:t(()=>[i(e(D),{content:"Value in the context of this offer group."},{default:t(()=>[...u[10]||(u[10]=[s("Local",-1)])],void 0,!0),_:1}),u[11]||(u[11]=s(" Total Revenue",-1))],void 0,!0),_:2},1024),i(e(T),{condensed:""},{"top-right":t(()=>[m.item.config.segments&&m.item.config.segments.length>0?(a(),r("div",yt,c(m.item.config.segments.length),1)):(a(),r("div",bt,"None"))]),default:t(()=>[u[12]||(u[12]=s("Segments",-1))],void 0,!0),_:2},1024),i(e(T),{condensed:""},{"top-right":t(()=>[m.item.config.additionalConditions&&m.item.config.additionalConditions.length>0?(a(),r("div",xt,c(m.item.config.additionalConditions.length),1)):(a(),r("div",St,"None"))]),default:t(()=>[u[13]||(u[13]=s("Additional Conditions",-1))],void 0,!0),_:2},1024),i(e(T),{condensed:""},{"top-right":t(()=>[n("div",null,[(a(!0),r(pe,null,me(m.item.config.rewards,U=>(a(),w($,{key:U.type,reward:U},null,8,["reward"]))),128))])]),default:t(()=>[u[14]||(u[14]=s("Rewards",-1))],void 0,!0),_:2},1024)],void 0,!0),_:2},1024)],void 0,!0),_:2},1024)]),_:1},8,["title","emptyMessage","itemList","sortOptions"])}}}),Ot={key:1},$t={class:"font-weight-bold tw-mb-1"},Tt={key:0},Mt={key:1},Ct={class:"font-weight-bold tw-mb-1"},It={class:"font-weight-bold tw-mb-1"},At={key:0},Ft={key:1},Pt={key:2,class:"text-danger"},Dt={key:0},Gt={key:0,class:"text-muted tw-italic"},Nt={key:1,class:"text-danger"},Bt={key:0},Et={key:1},Lt={key:2},Ut={class:"tw-w-full"},Rt={key:0,class:"small"},Vt={class:"tw-w-full"},zt={key:0,class:"small"},jt=te({__name:"OfferGroupDetailView",props:{kindId:{}},setup(F){const A=F,k=he();if(k.params.id===void 0)throw new Error("id route param is required.");const l=X(k.params.id),{data:d,error:N}=H(ne(l)),{data:O}=H(we()),v=g(()=>d.value.config.activableParams),f=g(()=>{if(!L.value)return;const h=L.value.kinds[A.kindId]?.gameSpecificConfigDataMembers;if(!h)throw new Error(`Activable kind '${A.kindId}' is not defined in the metadata!`);return h.map(o=>({key:o,value:d.value.config[o]}))}),L=g(()=>O.value?.activablesMetadata),_=g(()=>v.value.lifetime.$type.match(/Metaplay\.Core.Activables\.MetaActivableLifetimeSpec\+(.*)/)[1]),u=g(()=>v.value.cooldown.$type.match(/Metaplay\.Core\.Activables\.MetaActivableCooldownSpec\+(.*)/)[1]),$=g(()=>v.value.schedule?y.fromISO(v.value.schedule.preview).toMillis()+y.fromISO(v.value.schedule.duration).toMillis()+y.fromISO(v.value.schedule.review).toMillis():1),x=g(()=>{const h=d.value?.scheduleStatus;return h?h.currentPhase.phase:null}),m=g(()=>{const h=d.value?.scheduleStatus;return h?.nextPhase?h.nextPhase.phase:null}),U=g(()=>{const h=d.value.scheduleStatus;return h?.nextPhase?h.nextPhase.startTime:null}),R=g(()=>{const h=d.value.scheduleStatus;return h?h.relevantEnabledRange:null}),ue=g(()=>ye(d.value.statistics.numConsumedForFirstTime/d.value.statistics.numActivatedForFirstTime*100,2)),ie=g(()=>(d.value?.config.offers??[]).length>0),de=g(()=>v.value.segments!==null&&v.value.segments.length!==0),oe=g(()=>v.value.isEnabled);return(h,o)=>{const Q=C("fa-icon"),p=C("b-td"),b=C("b-tr"),J=C("b-tbody"),K=C("b-table-simple"),W=C("b-col"),fe=C("b-row");return a(),w(e(Ae),{permission:"api.activables.view","is-loading":!e(d),error:e(N),variant:ie.value?void 0:"warning","full-width":""},{overview:t(()=>[i(e(Ie),{title:e(d).config.displayName,subtitle:e(d).config.description,id:e(d).config.activableId,"data-testid":"offer-group-detail-overview-card"},{default:t(()=>[ie.value?(a(),r("div",Ot,[n("div",$t,[i(Q,{icon:"chart-bar"}),o[1]||(o[1]=s(" Overview",-1))]),i(K,{small:"",responsive:""},{default:t(()=>[i(J,null,{default:t(()=>[i(b,null,{default:t(()=>[i(p,null,{default:t(()=>[...o[2]||(o[2]=[s("Status",-1)])],void 0,!0),_:1}),i(p,{class:"text-right"},{default:t(()=>[oe.value?(a(),w(e(S),{key:0,variant:"success"},{default:t(()=>[...o[3]||(o[3]=[s("Enabled",-1)])],void 0,!0),_:1})):(a(),w(e(S),{key:1,variant:"danger"},{default:t(()=>[...o[4]||(o[4]=[s("Disabled",-1)])],void 0,!0),_:1}))],void 0,!0),_:1})],void 0,!0),_:1}),i(b,null,{default:t(()=>[i(p,null,{default:t(()=>[...o[5]||(o[5]=[s("Placement",-1)])],void 0,!0),_:1}),i(p,{class:"text-right"},{default:t(()=>[s(c(e(d).config.placement),1)],void 0,!0),_:1})],void 0,!0),_:1}),i(b,null,{default:t(()=>[i(p,null,{default:t(()=>[...o[6]||(o[6]=[s("Priority",-1)])],void 0,!0),_:1}),i(p,{class:"tw-text-right"},{default:t(()=>[e(d).config.priority>0?(a(),r("span",Tt,c(e(xe)(e(d).config.priority)),1)):(a(),r("span",Mt,c(e(d).config.priority),1))],void 0,!0),_:1})],void 0,!0),_:1}),i(b,null,{default:t(()=>[i(p,null,{default:t(()=>[...o[7]||(o[7]=[s("Audience Size Estimate",-1)])],void 0,!0),_:1}),i(p,{class:"text-right"},{default:t(()=>[i(ke,{sizeEstimate:de.value?e(d).audienceSizeEstimate:void 0},null,8,["sizeEstimate"])],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1}),n("div",Ct,[i(Q,{icon:"chart-line"}),o[8]||(o[8]=s(" Statistics",-1))]),i(K,{small:"",responsive:""},{default:t(()=>[i(J,null,{default:t(()=>[i(b,null,{default:t(()=>[i(p,null,{default:t(()=>[o[10]||(o[10]=s("Activated By",-1)),i(e(S),{class:"tw-ml-1",tooltip:"Number of players who have seen this group.",shape:"pill"},{default:t(()=>[...o[9]||(o[9]=[s("?",-1)])],void 0,!0),_:1})],void 0,!0),_:1}),i(p,{class:"text-right"},{default:t(()=>[i(e(ee),{number:e(d).statistics.numActivatedForFirstTime,unit:"player"},null,8,["number"])],void 0,!0),_:1})],void 0,!0),_:1}),i(b,null,{default:t(()=>[i(p,null,{default:t(()=>[o[12]||(o[12]=s("Consumed By",-1)),i(e(S),{class:"tw-ml-1",tooltip:"Number of players who have bought something from this group.",shape:"pill"},{default:t(()=>[...o[11]||(o[11]=[s("?",-1)])],void 0,!0),_:1})],void 0,!0),_:1}),i(p,{class:"text-right"},{default:t(()=>[i(e(ee),{number:e(d).statistics.numConsumedForFirstTime,unit:"player"},null,8,["number"])],void 0,!0),_:1})],void 0,!0),_:1}),i(b,null,{default:t(()=>[i(p,null,{default:t(()=>[o[14]||(o[14]=s("Conversion",-1)),i(e(S),{class:"tw-ml-1",tooltip:"The percentage of players who have bought something from this group after seeing it.",shape:"pill"},{default:t(()=>[...o[13]||(o[13]=[s("?",-1)])],void 0,!0),_:1})],void 0,!0),_:1}),e(d).statistics.numActivatedForFirstTime>0?(a(),w(p,{key:0,class:"text-right"},{default:t(()=>[s(c(ue.value)+"%",1)],void 0,!0),_:1})):(a(),w(p,{key:1,class:"text-right text-muted tw-italic"},{default:t(()=>[...o[15]||(o[15]=[s("None",-1)])],void 0,!0),_:1}))],void 0,!0),_:1}),i(b,null,{default:t(()=>[i(p,null,{default:t(()=>[o[17]||(o[17]=s("Total Consumes",-1)),i(e(S),{class:"tw-ml-1",tooltip:"Total number of purchases from this group.",shape:"pill"},{default:t(()=>[...o[16]||(o[16]=[s("?",-1)])],void 0,!0),_:1})],void 0,!0),_:1}),i(p,{class:"text-right"},{default:t(()=>[i(e(ee),{number:e(d).statistics.numConsumed,unit:"time"},null,8,["number"])],void 0,!0),_:1})],void 0,!0),_:1}),i(b,null,{default:t(()=>[i(p,null,{default:t(()=>[...o[18]||(o[18]=[s("Total Revenue",-1)])],void 0,!0),_:1}),i(p,{class:"text-right"},{default:t(()=>[s("$"+c(e(d).revenue.toFixed(2)),1)],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1}),n("div",It,[i(Q,{icon:"calendar-alt"}),o[19]||(o[19]=s(" Scheduling",-1))]),i(K,{small:"",responsive:""},{default:t(()=>[i(J,null,{default:t(()=>[i(b,null,{default:t(()=>[i(p,null,{default:t(()=>[...o[20]||(o[20]=[s("Activation Mode",-1)])],void 0,!0),_:1}),i(p,{class:"text-right"},{default:t(()=>[i(e(S),{variant:v.value.schedule?"neutral":"primary"},{default:t(()=>[s(c(v.value.schedule?"Scheduled":"Dynamic"),1)],void 0,!0),_:1},8,["variant"])],void 0,!0),_:1})],void 0,!0),_:1}),v.value.schedule?G("",!0):(a(),w(b,{key:0},{default:t(()=>[i(p,null,{default:t(()=>[...o[21]||(o[21]=[s("Lifetime After Activation",-1)])],void 0,!0),_:1}),i(p,{class:"text-right"},{default:t(()=>[_.value==="Forever"?(a(),r("span",At,"Forever")):_.value==="Fixed"?(a(),r("span",Ft,[i(e(M),{duration:e(I)(v.value.lifetime.duration),"show-as":"humanizedSentenceCase"},null,8,["duration"])])):(a(),r("span",Pt,"Unknown!"))],void 0,!0),_:1})],void 0,!0),_:1})),v.value.schedule?G("",!0):(a(),w(b,{key:1},{default:t(()=>[i(p,null,{default:t(()=>[...o[22]||(o[22]=[s("Cooldown After Deactivation",-1)])],void 0,!0),_:1}),i(p,{class:"text-right"},{default:t(()=>[u.value==="Fixed"?(a(),r("span",Dt,[e(I)(v.value.cooldown.duration).as("seconds")===0?(a(),r("span",Gt,"None")):(a(),w(e(M),{key:1,duration:e(I)(v.value.cooldown.duration),"show-as":"humanizedSentenceCase"},null,8,["duration"]))])):(a(),r("span",Nt,"Unknown!"))],void 0,!0),_:1})],void 0,!0),_:1})),v.value.schedule?(a(),w(b,{key:2},{default:t(()=>[i(p,{colspan:"2"},{default:t(()=>[i(fe,{class:"mx-0 tw-my-4"},{default:t(()=>[i(W,{class:"pl-0",md:""},{default:t(()=>[n("span",null,[o[23]||(o[23]=s("Time Mode:",-1)),i(e(S),{class:"tw-ml-1",tooltip:v.value.schedule.timeMode!=="Utc"?"Using UTC time to preview the schedule.":void 0},{default:t(()=>[s(c(e(le)(v.value.schedule.timeMode)),1)],void 0,!0),_:1},8,["tooltip"])])],void 0,!0),_:1}),i(W,{md:""},{default:t(()=>[n("span",null,[o[24]||(o[24]=s("Current Phase: ",-1)),i(Z,{activable:e(d)},null,8,["activable"])])],void 0,!0),_:1}),i(W,{md:"auto"},{default:t(()=>[oe.value?m.value?(a(),r("span",Et,[o[26]||(o[26]=s("Next Phase: ",-1)),i(Z,{activable:e(d),phase:m.value},null,8,["activable","phase"]),n("div",null,[i(e(q),{instant:e(E).fromISO(U.value)},null,8,["instant"])])])):(a(),r("span",Lt,"No longer occurring")):(a(),r("span",Bt,[o[25]||(o[25]=s("Next Phase: ",-1)),i(Z,{activable:e(d),phase:"Disabled"},null,8,["activable"])]))],void 0,!0),_:1})],void 0,!0),_:1}),n("div",Ut,[n("div",{class:"pb-3 pl-2 border-left border-dark",style:Y(`margin-left: ${e(y).fromISO(v.value.schedule.preview).toMillis()/$.value*100}%; position: relative; left: -1px`)},[o[27]||(o[27]=n("div",{class:"small font-weight-bold"},"Start",-1)),R.value?(a(),r("div",Rt,[i(e(q),{instant:e(E).fromISO(R.value.start)},null,8,["instant"])])):G("",!0)],4)]),i(e(Fe),{class:"font-weight-bold",max:$.value,height:"3rem",style:Y(x.value==="Inactive"?"filter: contrast(50%) brightness(130%)":"")},{default:t(()=>[i(e(j),{value:e(y).fromISO(v.value.schedule.preview).toMillis(),variant:"info",animated:x.value==="Preview"},{default:t(()=>[...o[28]||(o[28]=[s("Preview",-1)])],void 0,!0),_:1},8,["value","animated"]),i(e(j),{value:e(y).fromISO(v.value.schedule.duration).toMillis()-e(y).fromISO(v.value.schedule.endingSoon).toMillis(),variant:"success",animated:x.value==="Active"},{default:t(()=>[...o[29]||(o[29]=[s("Active",-1)])],void 0,!0),_:1},8,["value","animated"]),i(e(j),{value:e(y).fromISO(v.value.schedule.endingSoon).toMillis(),variant:"warning",animated:x.value==="EndingSoon"},{default:t(()=>[...o[30]||(o[30]=[s("Ending soon",-1)])],void 0,!0),_:1},8,["value","animated"]),i(e(j),{value:e(y).fromISO(v.value.schedule.review).toMillis(),variant:"info",animated:x.value==="Review"},{default:t(()=>[...o[31]||(o[31]=[s("Review",-1)])],void 0,!0),_:1},8,["value","animated"])],void 0,!0),_:1},8,["max","style"]),n("div",Vt,[n("div",{class:"pt-3 pr-2 pb-1 border-right border-dark text-right",style:Y(`margin-right: ${e(y).fromISO(v.value.schedule.review).toMillis()/$.value*100}%; position: relative; right: -1px`)},[o[32]||(o[32]=n("div",{class:"small font-weight-bold"},"End",-1)),R.value?(a(),r("div",zt,[i(e(q),{instant:e(E).fromISO(R.value.end)},null,8,["instant"])])):G("",!0)],4)])],void 0,!0),_:1})],void 0,!0),_:1})):G("",!0)],void 0,!0),_:1})],void 0,!0),_:1})])):(a(),w(e(be),{key:0,class:"tw-mt-3",title:"No Offers Found",variant:"warning"},{default:t(()=>[...o[0]||(o[0]=[n("div",null,"This offer group contains no offers and thus will not be visible in the game! Did you forget to configure the offers in the game configs?",-1)])],void 0,!0),_:1}))],void 0,!0),_:1},8,["title","subtitle","id"])]),default:t(()=>[i(e(Me),{tabs:[{label:"Offers"},{label:"Scheduling"},{label:"Targeting"}]},{"tab-0":t(()=>[i(kt,{"offer-group-id":e(X)(e(l)),"empty-message":"This offer group contains no offers and thus will not be visible in the game! Did you forget to configure the offers in the game configs?","data-testid":"offer-group-detail-offers-list-card"},null,8,["offer-group-id"])]),"tab-1":t(()=>[i(ht,{"offer-group-id":e(X)(e(l))},null,8,["offer-group-id"])]),"tab-2":t(()=>[i(e(re),null,{default:t(()=>[i($e,{segments:v.value.segments,"owner-title":"This offer group"},null,8,["segments"]),i(Oe,{"player-conditions":v.value.additionalConditions},null,8,["player-conditions"])],void 0,!0),_:1})]),_:1}),i(e(Ce),{class:"tw-max-w-6xl"},{default:t(()=>[i(e(ae),{data:e(d),label:"singleOfferGroupData"},null,8,["data"]),i(e(ae),{data:f.value,label:"gameSpecificInfo"},null,8,["data"])],void 0,!0),_:1})]),_:1},8,["is-loading","error","variant"])}}}),ui=Se(jt,[["__scopeId","data-v-e9ea50a9"]]);export{ui as default};
