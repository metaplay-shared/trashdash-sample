import{d as x,by as A,h as V,c as u,c7 as w,cj as F,r as d,e as p,o as m,w as t,j as r,f as l,a as I,m as f,q as _,k as s,t as g,y as h,B as P,_ as R}from"./index-jY1EWd09.js";import{_ as $}from"./EntityEventLogCard.vue_vue_type_script_setup_true_lang-8SFReNo_.js";import{_ as B,a as U}from"./MViewContainer.vue_vue_type_script_setup_true_lang-C_1W2rCL.js";import"./MetaEventStreamCard-BR93ljz-.js";import"./MInputSingleSelectSwitch.vue_vue_type_script_setup_true_lang-DPh05re_.js";import"./index-Dec9dGh3.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-CqJL3vnO.js";import"./MInputText.vue_vue_type_script_setup_true_lang-Wwv8TYAB.js";import"./debounce-DkFP0rfT.js";import"./isSymbol-B-tfGeoT.js";import"./MInputMultiSelectCheckbox.vue_vue_type_script_setup_true_lang-BmEacL49.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-Bzg4Lkt_.js";import"./apiPoller-BsS_UEVQ.js";import"./analyticsEvents-CULxlf4Q.js";const N={class:"tw-mb-1"},H={key:0},M={class:"tw-mb-1 tw-font-bold"},ie=x({__name:"EntityEventLogView",setup(j){const n=A(),o=V(null),c=u(()=>{if(n.params.type===void 0)throw new Error("id route param is required.");return w(n.params.type)}),y=u(()=>{if(n.params.id===void 0)throw new Error("id route param is required.");return w(n.params.id)}),b=u(()=>F(n.query,"search")),T=u(()=>{if(n.query.keywords){const i=n.query.keywords;if(typeof i=="string")return decodeURIComponent(i).split(",");if(Array.isArray(i))return i.map(e=>decodeURIComponent(String(e)))}return[]}),k=u(()=>{if(n.query.eventTypes){const i=n.query.eventTypes;if(typeof i=="string")return decodeURIComponent(i).split(",");if(Array.isArray(i))return i.map(e=>decodeURIComponent(String(e)))}return[]});function S(i){o.value=i}return(i,e)=>{const C=d("fa-icon"),a=d("b-td"),v=d("b-tr"),E=d("b-tbody"),q=d("b-table-simple");return m(),p(l(U),null,{overview:t(()=>[r(l(B),{title:c.value+" Event Timeline",id:y.value,"data-testid":"overview"},{subtitle:t(()=>[_("p",N,[e[0]||(e[0]=s("A timeline of most recent events for ",-1)),r(l(R),null,{default:t(()=>[s(g(y.value),1)],void 0,!0),_:1}),e[1]||(e[1]=s(".",-1))]),e[2]||(e[2]=_("p",null,"The amount of cached events on this page is limited to keep the database impact small. The full history of events has been sent to your analytics pipeline!",-1))]),default:t(()=>[o.value?(m(),I("div",H,[_("div",M,[r(C,{icon:"chart-line"}),e[3]||(e[3]=s(" Statistics",-1))]),r(q,{small:"",responsive:""},{default:t(()=>[r(E,null,{default:t(()=>[r(v,null,{default:t(()=>[r(a,null,{default:t(()=>[...e[4]||(e[4]=[s("Total events",-1)])],void 0,!0),_:1}),r(a,{class:"tw-text-right"},{default:t(()=>[s(g(o.value.numEvents),1)],void 0,!0),_:1})],void 0,!0),_:1}),o.value.newestEventTime?(m(),p(v,{key:0},{default:t(()=>[r(a,null,{default:t(()=>[...e[5]||(e[5]=[s("Most recent event",-1)])],void 0,!0),_:1}),r(a,{class:"tw-text-right"},{default:t(()=>[r(l(h),{instant:o.value.newestEventTime,showAs:"relativeSentenceCase"},null,8,["instant"])],void 0,!0),_:1})],void 0,!0),_:1})):f("",!0),o.value.oldestEventTime?(m(),p(v,{key:1},{default:t(()=>[r(a,null,{default:t(()=>[...e[6]||(e[6]=[s("Oldest event",-1)])],void 0,!0),_:1}),r(a,{class:"tw-text-right"},{default:t(()=>[r(l(h),{instant:o.value.oldestEventTime,showAs:"relativeSentenceCase"},null,8,["instant"])],void 0,!0),_:1})],void 0,!0),_:1})):f("",!0),o.value.duration?(m(),p(v,{key:2},{default:t(()=>[r(a,null,{default:t(()=>[...e[7]||(e[7]=[s("Range of events",-1)])],void 0,!0),_:1}),r(a,{class:"tw-text-right"},{default:t(()=>[r(l(P),{duration:o.value.duration,showAs:"humanizedSentenceCase"},null,8,["duration"])],void 0,!0),_:1})],void 0,!0),_:1})):f("",!0)],void 0,!0),_:1})],void 0,!0),_:1})])):f("",!0)],void 0,!0),_:1},8,["title","id"])]),default:t(()=>[r($,{class:"h-100",entityKind:c.value,entityId:y.value,searchPreHighlight:b.value,keywordPreFilters:T.value,eventTypePreFilters:k.value,utilitiesMode:"highlight",utilitiesCondition:"or",showViewMoreLink:!1,maxHeight:"inherit",onStats:S},null,8,["entityKind","entityId","searchPreHighlight","keywordPreFilters","eventTypePreFilters"])],void 0,!0),_:1})}}});export{ie as default};
