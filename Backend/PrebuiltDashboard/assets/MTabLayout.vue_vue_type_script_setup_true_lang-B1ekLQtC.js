import{d as R,by as A,af as P,c as $,K as C,h as Q,i as U,a as v,o as b,q as n,j as c,F as k,b as Z,e as q,U as j,Q as h,w as u,k as d,m as M,t as f,a7 as D,f as E,b7 as Y,_ as N,a6 as B}from"./index-jY1EWd09.js";import{_ as G}from"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-CqJL3vnO.js";import{M as S}from"./MSingleColumnLayout-BSf_YwiY.js";const H=["data-testid"],J=["disabled","aria-selected","onClick","data-testid"],K=["data-testid"],W=["data-testid"],X={class:"tw-mt-2 tw-rounded tw-border tw-border-neutral-300 tw-bg-neutral-50 tw-p-2 tw-text-xs"},at=R({__name:"MTabLayout",props:{tabs:{},currentTab:{default:0},id:{default:"tab"}},emits:["onTabChanged"],setup(o,{emit:z}){const w=A(),L=P(),{doesHavePermission:T}=Y(),l=o,g=z;function r(t){return T(t.permission)?t.disabledTooltip:`You need ${t.permission} to view this tab.`}async function y(t){await x(t),e.value=t,g("onTabChanged",t)}const m=$(()=>{if(w.query[l.id]){if(typeof w.query[l.id]=="string"){const t=Number(w.query[l.id]);if(!p(t))return t}console.warn(`Invalid route query tab parameter: ${JSON.stringify(w.query[l.id])}.`)}});C(m,t=>{t&&t!==e.value&&(e.value=t,g("onTabChanged",t))});function V(){if(m.value)return m.value;if(p(l.currentTab))return console.warn(`Invalid initial tab index: ${l.currentTab}.`),0;let t;const a=l.tabs[l.currentTab];return a&&!a.disabledTooltip?t=l.currentTab:(t=l.tabs.findIndex(s=>!r(s)),t===-1&&(console.warn("All tabs are disabled. Falling back to showing the first tab."),t=0)),t}function p(t){return t<0||t>=l.tabs.length}const e=Q(V());C(()=>l.currentTab,t=>{p(t)||y(t)}),U(async()=>{m.value||await x(e.value),g("onTabChanged",e.value)});async function x(t){await L.replace({path:w.path,query:{...w.query,[l.id]:t.toString()}})}const F=$(()=>l.tabs.map((t,a)=>({label:t.label,value:a,disabled:!!r(t)})));function O(t){return`MTabLayout(:tabs="tabs")
  template(#tab-${t})
    //- Your content here`}return(t,a)=>(b(),v(k,null,[n("div",{class:"tw-sticky tw-z-10 -tw-mx-1 tw-mb-10 tw-hidden tw-flex-row tw-flex-wrap tw-items-center tw-justify-center tw-space-x-1 tw-border-b tw-border-t tw-border-neutral-200 tw-bg-white tw-py-1 @sm:-tw-mx-4 @md:tw-flex",style:{top:"-1px"},"data-testid":o.id,"data-type":"MTabLayout"},[(b(!0),v(k,null,Z(o.tabs,(s,i)=>(b(),q(j,{key:i,content:r(s),"no-underline":"",class:h({"tw-cursor-not-allowed":!!r(s)}),"data-testid":`${o.id}-${i}-tooltip`},{default:u(()=>[n("button",{class:h(["tw-relative tw-rounded tw-px-4 tw-py-2 tw-font-semibold",{"tw-bg-blue-500 tw-text-white":e.value===i&&!r(s),"tw-text-blue-500 hover:tw-text-blue-600 active:tw-text-blue-700 hover:tw-bg-neutral-300 active:tw-bg-neutral-400":e.value!==i,"tw-bg-neutral-200 tw-text-neutral-400 tw-pointer-events-none":!!r(s)}]),role:"tab",disabled:!!r(s),"aria-selected":e.value===i,onClick:I=>y(i),"data-testid":`${o.id}-${i}`},[d(f(s.label),1),s.highlighted?(b(),v("div",{key:0,class:"tw-absolute tw-right-1 tw-top-1 tw-size-3 tw-rounded-full tw-bg-white","data-testid":`${o.id}-${i}-highlighted`},null,8,K)):M("",!0),s.highlighted?(b(),v("svg",{key:1,class:h(["tw-absolute tw-right-0.5 tw-top-0.5 tw-size-4",{"tw-fill-red-500":e.value!==i,"tw-fill-red-600":e.value===i}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[...a[1]||(a[1]=[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-8-5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-4.5A.75.75 0 0 1 10 5Zm0 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd"},null,-1)])],2)):M("",!0)],10,J)],void 0,!0),_:2},1032,["content","class","data-testid"]))),128))],8,H),c(G,{class:"tw-mb-10 tw-block @md:tw-hidden",label:"Current Tab","model-value":e.value,options:F.value,"onUpdate:modelValue":a[0]||(a[0]=s=>y(Number(s))),"data-testid":o.id+"-dropdown"},null,8,["model-value","options","data-testid"]),n("div",{class:"tw-mx-auto tw-max-w-6xl tw-@container","data-testid":`${o.id}-content`},[E(T)(o.tabs[e.value]?.permission)?D(t.$slots,`tab-${e.value}`,{key:e.value},()=>[c(S,null,{default:u(()=>[c(B,{class:"tw-mx-auto tw-max-w-xl",title:`${o.tabs[e.value]?.label} is empty`,variant:"neutral","data-testid":"default-content"},{default:u(()=>[n("p",null,[a[4]||(a[4]=d("Get going by adding content to the ",-1)),c(N,null,{default:u(()=>[d(f(o.tabs[e.value]?.label),1)],void 0,!0),_:1}),a[5]||(a[5]=d(" template slot.",-1))]),n("pre",X,[n("code",null,f(O(e.value)),1)])],void 0,!0),_:1},8,["title"])],void 0,!0),_:1})]):(b(),q(S,{key:0},{default:u(()=>[c(B,{class:"tw-mx-auto tw-my-3 tw-max-w-xl",title:"Not Authorized"},{default:u(()=>[n("p",null,[a[2]||(a[2]=d("Unfortunately, you do not have the ",-1)),c(N,{variant:"warning"},{default:u(()=>[d(f(o.tabs[e.value]?.permission),1)],void 0,!0),_:1}),a[3]||(a[3]=d(" permission to view this tab. Please contact your game admin for access.",-1))])],void 0,!0),_:1})],void 0,!0),_:1}))],8,W)],64))}});export{at as _};
