import{d as b,E as y,h as r,c as S,r as M,a as w,m as k,f as t,o as V,j as i,w as s,q as h,k as x,bs as N,bt as C}from"./index-B-VT6L6o.js";import{a as I}from"./players-CbfgGr44.js";import{_ as $}from"./MetaLanguageLabel.vue_vue_type_script_setup_true_lang-CHSNIYtl.js";import{_ as A}from"./MetaGeneratedForm.vue_vue_type_script_setup_true_lang-DQCVqnhW.js";import{_ as B}from"./MActionModalButton.vue_vue_type_script_setup_true_lang-CzHe6hW1.js";import"./utils-3nJB3c7R.js";import"./GeneratedUiFormDynamicComponent.vue_vue_type_script_setup_true_lang-DFWvQe41.js";import"./MInputMultiSelectCheckbox.vue_vue_type_script_setup_true_lang-DB0nHSfN.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-x_WXETV5.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CBCiJKqn.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-Dv81Anyh.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-DbjMhR13.js";import"./index-D9XvAc_V.js";const G={key:0},P={class:"tw-mr-32 tw-text-xs+ tw-text-neutral-500"},Q=b({__name:"PlayerActionSendMail",props:{playerId:{}},setup(d){const m=d,p=N(),{data:e,refresh:c}=y(I(m.playerId)),o=r({}),l=r(!1);function u(){o.value={},l.value=!1}const f=S(()=>o.value?l.value?void 0:"Some fields contain invalid data. Check that the fields are filled in correctly to proceed.":"Fill in the required fields to proceed."),{showSuccessNotification:g}=C();async function v(){await p.post(`/players/${e.value.id}/sendMail`,o.value),g(`In-game mail sent to ${e.value.model.playerName||"n/a"}.`),c()}return(q,a)=>{const _=M("fa-icon");return t(e)?(V(),w("div",G,[i(t(B),{"modal-title":"Send In-Game Mail",action:v,"trigger-button-label":"Send Mail","ok-button-label":"Send Mail","ok-button-disabled-tooltip":f.value,permission:"api.players.mail",onShow:u,"data-testid":"action-mail"},{"action-button-icon":s(()=>[i(_,{class:"mr-2",icon:"paper-plane"})]),"modal-subtitle":s(()=>[h("span",P,[a[2]||(a[2]=x("Player's language: ",-1)),i($,{language:t(e).model.language,variant:"badge"},null,8,["language"])])]),default:s(()=>[i(A,{class:"!tw-overflow-x-hidden",modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=n=>o.value=n),typeName:"Metaplay.Core.InGameMail.MetaInGameMail",forcedLocalization:t(e).model.language,page:"PlayerActionSendMail","logic-version":t(e).model.logicVersion,onStatus:a[1]||(a[1]=n=>l.value=n)},null,8,["modelValue","forcedLocalization","logic-version"])]),_:1},8,["ok-button-disabled-tooltip"])])):k("",!0)}}});export{Q as default};
