import{d as O,bz as R,af as A,c as $,K as C,h as P,i as Q,a as v,o as w,q as i,j as b,F as k,b as U,e as q,U as Z,Q as y,w as n,k as u,m as M,t as c,a7 as j,f as D,b7 as E,_ as N,a6 as _}from"./index-B-VT6L6o.js";import{_ as Y}from"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-Dv81Anyh.js";import{M as x}from"./MSingleColumnLayout-Bc4oHrRo.js";const G=["data-testid"],H=["disabled","aria-selected","onClick","data-testid"],J=["data-testid"],K=["data-testid"],W={class:"tw-mt-2 tw-rounded tw-border tw-border-neutral-300 tw-bg-neutral-50 tw-p-2 tw-text-xs"},at=O({__name:"MTabLayout",props:{tabs:{},currentTab:{default:0},id:{default:"tab"}},emits:["onTabChanged"],setup(z,{emit:B}){const d=R(),S=A(),{doesHavePermission:h}=E(),o=z,p=B;function r(t){return h(t.permission)?t.disabledTooltip:`You need ${t.permission} to view this tab.`}async function f(t){await T(t),e.value=t,p("onTabChanged",t)}const m=$(()=>{if(d.query[o.id]){if(typeof d.query[o.id]=="string"){const t=Number(d.query[o.id]);if(!g(t))return t}console.warn(`Invalid route query tab parameter: ${JSON.stringify(d.query[o.id])}.`)}});C(m,t=>{t&&t!==e.value&&(e.value=t,p("onTabChanged",t))});function L(){if(m.value)return m.value;if(g(o.currentTab))return console.warn(`Invalid initial tab index: ${o.currentTab}.`),0;let t;return o.tabs[o.currentTab].disabledTooltip?(t=o.tabs.findIndex(a=>!r(a)),t===-1&&(console.warn("All tabs are disabled. Falling back to showing the first tab."),t=0)):t=o.currentTab,t}function g(t){return t<0||t>=o.tabs.length}const e=P(L());C(()=>o.currentTab,t=>{g(t)||f(t)}),Q(async()=>{m.value||await T(e.value),p("onTabChanged",e.value)});async function T(t){await S.replace({path:d.path,query:{...d.query,[o.id]:t.toString()}})}const V=$(()=>o.tabs.map((t,a)=>({label:t.label,value:a,disabled:!!r(t)})));function F(t){return`MTabLayout(:tabs="tabs")
  template(#tab-${t})
    //- Your content here`}return(t,a)=>(w(),v(k,null,[i("div",{class:"tw-sticky tw-z-10 -tw-mx-1 tw-mb-10 tw-hidden tw-flex-row tw-flex-wrap tw-items-center tw-justify-center tw-space-x-1 tw-border-b tw-border-t tw-border-neutral-200 tw-bg-white tw-py-1 @sm:-tw-mx-4 @md:tw-flex",style:{top:"-1px"},"data-testid":t.id,"data-type":"MTabLayout"},[(w(!0),v(k,null,U(t.tabs,(l,s)=>(w(),q(Z,{key:s,content:r(l),"no-underline":"",class:y({"tw-cursor-not-allowed":!!r(l)}),"data-testid":`${t.id}-${s}-tooltip`},{default:n(()=>[i("button",{class:y(["tw-relative tw-rounded tw-px-4 tw-py-2 tw-font-semibold",{"tw-bg-blue-500 tw-text-white":e.value===s&&!r(l),"tw-text-blue-500 hover:tw-text-blue-600 active:tw-text-blue-700 hover:tw-bg-neutral-300 active:tw-bg-neutral-400":e.value!==s,"tw-bg-neutral-200 tw-text-neutral-400 tw-pointer-events-none":!!r(l)}]),role:"tab",disabled:!!r(l),"aria-selected":e.value===s,onClick:X=>f(s),"data-testid":`${t.id}-${s}`},[u(c(l.label),1),l.highlighted?(w(),v("div",{key:0,class:"tw-absolute tw-right-1 tw-top-1 tw-size-3 tw-rounded-full tw-bg-white","data-testid":`${t.id}-${s}-highlighted`},null,8,J)):M("",!0),l.highlighted?(w(),v("svg",{key:1,class:y(["tw-absolute tw-right-0.5 tw-top-0.5 tw-size-4",{"tw-fill-red-500":e.value!==s,"tw-fill-red-600":e.value===s}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},a[1]||(a[1]=[i("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-8-5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-4.5A.75.75 0 0 1 10 5Zm0 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd"},null,-1)]),2)):M("",!0)],10,H)],void 0,!0),_:2},1032,["content","class","data-testid"]))),128))],8,G),b(Y,{class:"tw-mb-10 tw-block @md:tw-hidden",label:"Current Tab","model-value":e.value,options:V.value,"onUpdate:modelValue":a[0]||(a[0]=l=>f(Number(l))),"data-testid":t.id+"-dropdown"},null,8,["model-value","options","data-testid"]),i("div",{class:"tw-mx-auto tw-max-w-6xl tw-@container","data-testid":`${t.id}-content`},[D(h)(t.tabs[e.value].permission)?j(t.$slots,`tab-${e.value}`,{key:e.value},()=>[b(x,null,{default:n(()=>[b(_,{class:"tw-mx-auto tw-max-w-xl",title:`${t.tabs[e.value].label} is empty`,variant:"neutral","data-testid":"default-content"},{default:n(()=>[i("p",null,[a[4]||(a[4]=u("Get going by adding content to the ",-1)),b(N,null,{default:n(()=>[u(c(t.tabs[e.value].label),1)],void 0,!0),_:1}),a[5]||(a[5]=u(" template slot.",-1))]),i("pre",W,[i("code",null,c(F(e.value)),1)])],void 0,!0),_:1},8,["title"])],void 0,!0),_:1})]):(w(),q(x,{key:0},{default:n(()=>[b(_,{class:"tw-mx-auto tw-my-3 tw-max-w-xl",title:"Not Authorized"},{default:n(()=>[i("p",null,[a[2]||(a[2]=u("Unfortunately, you do not have the ",-1)),b(N,{variant:"warning"},{default:n(()=>[u(c(t.tabs[e.value].permission),1)],void 0,!0),_:1}),a[3]||(a[3]=u(" permission to view this tab. Please contact your game admin for access.",-1))])],void 0,!0),_:1})],void 0,!0),_:1}))],8,K)],64))}});export{at as _};
