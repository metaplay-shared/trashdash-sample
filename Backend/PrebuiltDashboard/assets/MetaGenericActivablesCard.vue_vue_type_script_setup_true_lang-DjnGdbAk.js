import{d as N,E as h,H as O,c as g,e as v,o as s,f as t,w as i,j as l,x as p,k as r,a as o,y as x,D as L,B as y,A as _,t as u,v as P}from"./index-B-VT6L6o.js";import{M as d,a as m}from"./metaListUtils-B-xQ0HnD.js";import{g as M,a as T}from"./activables-CGldxvzu.js";import{_ as B}from"./MetaActivablePhaseBadge.vue_vue_type_script_setup_true_lang-CRWiJBnG.js";import{_ as R}from"./MetaActivablesBaseCard.vue_vue_type_script_setup_true_lang-B4qXSmal.js";const $={key:0,class:"tw-italic tw-text-neutral-400"},E={key:1,class:"tw-text-orange-500"},F={key:2},z={key:3,class:"tw-italic tw-text-neutral-400"},V={key:4,class:"tw-italic tw-text-neutral-400"},j={key:1,class:"tw-italic tw-text-neutral-400"},G={key:2,class:"tw-italic tw-text-neutral-400"},H={key:1,class:"tw-italic tw-text-neutral-400"},U={key:2,class:"tw-italic tw-text-neutral-400"},q={key:0},J={key:1,class:"tw-italic tw-text-neutral-400"},Z=N({__name:"MetaGenericActivablesCard",props:{title:{},category:{},emptyMessage:{},customEvaluationIsoDateTime:{},playerId:{},hideDisabled:{type:Boolean},hideConversion:{type:Boolean},longList:{type:Boolean},hideCollapse:{type:Boolean}},setup(w){const c=w,{data:b,refresh:C}=h(O()),{data:f}=h(()=>c.playerId?M(c.playerId,c.customEvaluationIsoDateTime):T(c.customEvaluationIsoDateTime)),D=g(()=>b.value?.activablesMetadata),A=g(()=>D.value?.categories[c.category].shortSingularDisplayName),S=["activable.config.displayName","activable.config.displayShortInfo","activable.config.description","phaseDisplayString"],k=g(()=>{const n=[d.asUnsorted(),new d("Phase","phaseSortOrder",m.Ascending),new d("Phase","phaseSortOrder",m.Descending),new d("Name","activable.config.displayName",m.Ascending),new d("Name","activable.config.displayName",m.Descending)];return c.hideConversion||(n.push(new d("Conversion","conversion",m.Ascending)),n.push(new d("Conversion","conversion",m.Descending))),n});return(n,a)=>(s(),v(R,{hideDisabled:n.hideDisabled,hideConversion:n.hideConversion,activables:t(f),playerId:n.playerId,category:n.category,longList:n.longList,emptyMessage:n.emptyMessage,title:n.title,hideCollapse:n.hideCollapse,searchFields:S,sortOptions:k.value,permission:"api.activables.view",onRefreshActivables:t(C)},{collapseContents:i(({item:e})=>[l(t(P),{striped:""},{default:i(()=>[l(t(p),{condensed:""},{"top-right":i(()=>[e.activable.config.activableParams.isEnabled?e.activable.debugState?(s(),o("span",E,"Debug override!")):e.nextPhase?(s(),o("span",F,[l(B,{activable:e.activable,phase:e.nextPhase,playerId:n.playerId,typeName:`${A.value?.toLocaleLowerCase()}`},null,8,["activable","phase","playerId","typeName"]),a[0]||(a[0]=r()),l(t(x),{instant:t(L).fromISO(e.nextPhaseStartTime)},null,8,["instant"])])):e.scheduleStatus?(s(),o("span",z,"None")):(s(),o("span",V,"No schedule")):(s(),o("span",$,"Disabled"))]),default:i(()=>[a[1]||(a[1]=r("Next Schedule Phase",-1))],void 0,!0),_:2,__:[1]},1024),l(t(p),{condensed:""},{"top-right":i(()=>[e.activable.state.hasOngoingActivation&&e.activable.state.activationRemaining!==null?(s(),v(t(y),{key:0,duration:t(_)(e.activable.state.activationRemaining),showAs:"humanizedSentenceCase"},null,8,["duration"])):e.activable.state.hasOngoingActivation?(s(),o("span",j,"Forever")):(s(),o("span",G,"n/a"))]),default:i(()=>[a[2]||(a[2]=r("Lifetime Left",-1))],void 0,!0),_:2,__:[2]},1024),l(t(p),{condensed:""},{"top-right":i(()=>[e.activable.state.isInCooldown&&e.activable.state.cooldownRemaining!==null?(s(),v(t(y),{key:0,duration:t(_)(e.activable.state.cooldownRemaining),showAs:"humanizedSentenceCase"},null,8,["duration"])):e.activable.state.isInCooldown?(s(),o("span",H,"Forever")):(s(),o("span",U,"n/a"))]),default:i(()=>[a[3]||(a[3]=r("Cooldown Left",-1))],void 0,!0),_:2,__:[3]},1024),l(t(p),{condensed:""},{"top-right":i(()=>[r(u(e.activable.state.numActivated)+"/"+u(e.activable.config.activableParams.maxActivations||"∞"),1)]),default:i(()=>[a[4]||(a[4]=r("Activations",-1))],void 0,!0),_:2,__:[4]},1024),l(t(p),{condensed:""},{"top-right":i(()=>[e.activable.state.hasOngoingActivation?(s(),o("span",q,u(e.activable.state.currentActivationNumConsumed)+"/"+u(e.activable.config.activableParams.maxConsumesPerActivation||"∞"),1)):(s(),o("span",J,"n/a"))]),default:i(()=>[a[5]||(a[5]=r("Consumes During Current Activation",-1))],void 0,!0),_:2,__:[5]},1024),l(t(p),{condensed:""},{"top-right":i(()=>[r(u(e.activable.state.totalNumConsumed)+"/"+u(e.activable.config.activableParams.maxTotalConsumes||"∞"),1)]),default:i(()=>[a[6]||(a[6]=r("Total Consumes",-1))],void 0,!0),_:2,__:[6]},1024)],void 0,!0),_:2},1024)]),_:1},8,["hideDisabled","hideConversion","activables","playerId","category","longList","emptyMessage","title","hideCollapse","sortOptions","onRefreshActivables"]))}});export{Z as _};
