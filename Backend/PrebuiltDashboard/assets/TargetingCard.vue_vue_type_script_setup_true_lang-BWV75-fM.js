import{d as h,E as k,cE as T,c as s,b7 as $,r as x,e as m,m as E,f as o,o as g,w as t,x as v,k as n,t as l,j as y,ae as M}from"./index-jY1EWd09.js";import{M as u,a as _}from"./metaListUtils-B-xQ0HnD.js";import{_ as z}from"./MetaAudienceSizeEstimate.vue_vue_type_script_setup_true_lang-wU-8cgN7.js";const q=h({__name:"TargetingCard",props:{targetCondition:{},ownerTitle:{default:"This entity"}},setup(c){const d=c,S=$(),{data:r}=k(T()),w=["info.displayName","info.description"],N=[u.asUnsorted(),new u("Name","info.displayName",_.Ascending),new u("Name","info.displayName",_.Descending)],A=s(()=>f.value?"ALL":"ANY"),f=s(()=>d.targetCondition?.requireAllSegments),C=s(()=>d.targetCondition?.requireAnySegment),p=s(()=>f.value??C.value),L=s(()=>S.doesHavePermission("api.segmentation.view")?r.value?p.value?p.value.map(i=>{const a=r.value?.segments.find(e=>e.info.segmentId===i);return a===void 0?{missing:{segment:i}}:a}):[]:void 0:[]);return(b,i)=>{const a=x("meta-list-card");return o(r)?(g(),m(a,{key:0,title:`Segments: match ${A.value}`,icon:"user-tag",itemList:L.value,searchFields:w,sortOptions:N,emptyMessage:`${c.ownerTitle} has no targeting.`,pageSize:8,permission:"api.segmentation.view","data-testid":"targeting-card"},{"item-card":t(e=>[e.item.missing?(g(),m(o(v),{key:1},{"bottom-left":t(()=>[...i[1]||(i[1]=[n("This segment is missing in the currently active game config.",-1)])]),default:t(()=>[n(l(e.item.missing.segment),1)],void 0,!0),_:2},1024)):(g(),m(o(v),{key:0},{"top-right":t(()=>[y(z,{sizeEstimate:e.item.sizeEstimate,small:""},null,8,["sizeEstimate"])]),"bottom-left":t(()=>[n(l(e.item.info.description),1)]),"bottom-right":t(()=>[y(o(M),{to:`/segments/${e.item.info.segmentId}`,permission:"api.segmentation.view"},{default:t(()=>[...i[0]||(i[0]=[n("View segment",-1)])],void 0,!0),_:1},8,["to"])]),default:t(()=>[n(l(e.item.info.displayName),1)],void 0,!0),_:2},1024))]),_:1},8,["title","itemList","emptyMessage"])):E("",!0)}}});export{q as _};
