import{d as g,E as w,c as O,D as n,r as I,e as y,o as D,w as s,j as o,f as e,s as j,x as v,k as r,t as p,q as u,y as L,B as M,_ as h,co as x}from"./index-B-VT6L6o.js";import{b as c,c as l,M as m,a as d}from"./metaListUtils-B-xQ0HnD.js";import{g as C}from"./scanJobs-ChMnmy4y.js";import{_ as $}from"./MetaGeneratedContent.vue_vue_type_script_setup_true_lang-mXgbxe8j.js";import{_ as A}from"./MAbbreviateNumber.vue_vue_type_script_setup_true_lang-B4a9hmVO.js";import"./numberUtils-CkF0oMe2.js";const V=g({__name:"PastScanJobsCard",setup(B){const{data:f}=w(C()),S=O(()=>[c.asDynamicFilterSet(f.value?.jobHistory,"title",t=>t.jobTitle),new c("phase",[new l("Stopped",t=>t.phase==="Stopped"),new l("Cancelled",t=>t.phase==="Cancelled"),new l("Other",t=>t.phase!=="Stopped"&&t.phase!=="Cancelled")]),new c("running-time",[new l("Fast",t=>n.fromISO(t.endTime).diff(n.fromISO(t.startTime)).hours<=1),new l("Slow",t=>n.fromISO(t.endTime).diff(n.fromISO(t.startTime)).hours>1)])]),_=[new m("Start time","startTime",d.Ascending),new m("Start time","startTime",d.Descending),new m("End time","endTime",d.Ascending),new m("End time","endTime",d.Descending),new m("Title","jobTitle",d.Ascending),new m("Title","jobTitle",d.Descending)];function b(t){return t.id}return(t,a)=>{const T=I("meta-list-card");return D(),y(T,{title:"Past Scan Jobs",icon:"clipboard-list",itemList:e(f).jobHistory,getItemKey:b,filterSets:S.value,sortOptions:_,defaultSortOption:1,emptyMessage:"No scan jobs yet.","data-testid":"past-scan-jobs-card"},{"item-card":s(i=>[o(e(j),{extraMListItemMargin:"","data-testid":"scan-jobs-entry"},{header:s(()=>[o(e(v),{noLeftPadding:""},{"top-right":s(()=>[o(e(h),null,{default:s(()=>[r(p(e(x)(i.item.phase)),1)],void 0,!0),_:2},1024)]),"bottom-left":s(()=>[u("span",null,[a[0]||(a[0]=r("Started ",-1)),o(e(L),{instant:e(n).fromISO(i.item.startTime)},null,8,["instant"]),a[1]||(a[1]=r(" and lasted for ",-1)),o(e(M),{duration:e(n).fromISO(i.item.endTime).diff(e(n).fromISO(i.item.startTime))},null,8,["duration"]),a[2]||(a[2]=r(".",-1))])]),"bottom-right":s(()=>[u("span",null,[a[3]||(a[3]=r("Items scanned: ",-1)),o(e(A),{number:i.item.scanStatistics.numItemsScanned},null,8,["number"])])]),default:s(()=>[r(p(i.item.jobTitle),1)],void 0,!0),_:2},1024)]),default:s(()=>[o($,{class:"tw-text-xs",value:i.item.scanStatistics},null,8,["value"])],void 0,!0),_:2},1024)]),_:1},8,["itemList","filterSets"])}}});export{V as default};
