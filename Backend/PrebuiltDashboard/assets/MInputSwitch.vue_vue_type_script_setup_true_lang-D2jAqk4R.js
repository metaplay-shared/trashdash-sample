import{a_ as F,an as c,a$ as H,b0 as O,ao as K,b1 as q,aE as B,b2 as M,b3 as R,b4 as L,aH as G,b5 as X,b6 as j,aN as A,d as U,c as u,b7 as Q,aj as Y,ak as J,K as W,a as I,o as m,q as b,e as D,m as V,n as g,j as Z,Q as _,k as x,t as k,w as P,_ as ee,U as te,al as ae}from"./index-jY1EWd09.js";import{_ as se}from"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";var ie=K("switch").parts("root","label","control","thumb"),p=ie.build(),z=e=>e.ids?.root??`switch:${e.id}`,N=e=>e.ids?.label??`switch:${e.id}:label`,re=e=>e.ids?.thumb??`switch:${e.id}:thumb`,de=e=>e.ids?.control??`switch:${e.id}:control`,S=e=>e.ids?.hiddenInput??`switch:${e.id}:input`,ne=e=>e.getById(z(e)),w=e=>e.getById(S(e));function le(e,a){const{context:t,send:i,prop:s,scope:n}=e,l=!!s("disabled"),v=!!s("readOnly"),C=!!s("required"),h=!!t.get("checked"),r=!l&&t.get("focused"),T=!l&&t.get("focusVisible"),E=!l&&t.get("active"),f={"data-active":c(E),"data-focus":c(r),"data-focus-visible":c(T),"data-readonly":c(v),"data-hover":c(t.get("hovered")),"data-disabled":c(l),"data-state":h?"checked":"unchecked","data-invalid":c(s("invalid")),"data-required":c(C)};return{checked:h,disabled:l,focused:r,setChecked(o){i({type:"CHECKED.SET",checked:o,isTrusted:!1})},toggleChecked(){i({type:"CHECKED.TOGGLE",checked:h,isTrusted:!1})},getRootProps(){return a.label({...p.root.attrs,...f,dir:s("dir"),id:z(n),htmlFor:S(n),onPointerMove(){l||i({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){l||i({type:"CONTEXT.SET",context:{hovered:!1}})},onClick(o){if(l)return;q(o)===w(n)&&o.stopPropagation(),B()&&w(n)?.focus()}})},getLabelProps(){return a.element({...p.label.attrs,...f,dir:s("dir"),id:N(n)})},getThumbProps(){return a.element({...p.thumb.attrs,...f,dir:s("dir"),id:re(n),"aria-hidden":!0})},getControlProps(){return a.element({...p.control.attrs,...f,dir:s("dir"),id:de(n),"aria-hidden":!0})},getHiddenInputProps(){return a.input({id:S(n),type:"checkbox",required:s("required"),defaultChecked:h,disabled:l,"aria-labelledby":N(n),"aria-invalid":s("invalid"),name:s("name"),form:s("form"),value:s("value"),style:H,onFocus(){const o=O();i({type:"CONTEXT.SET",context:{focused:!0,focusVisible:o}})},onBlur(){i({type:"CONTEXT.SET",context:{focused:!1,focusVisible:!1}})},onClick(o){if(v){o.preventDefault();return}const d=o.currentTarget.checked;i({type:"CHECKED.SET",checked:d,isTrusted:!0})}})}}}var{not:$}=M(),oe=F({props({props:e}){return{defaultChecked:!1,label:"switch",value:"on",...e}},initialState(){return"ready"},context({prop:e,bindable:a}){return{checked:a(()=>({defaultValue:e("defaultChecked"),value:e("checked"),onChange(t){e("onCheckedChange")?.({checked:t})}})),fieldsetDisabled:a(()=>({defaultValue:!1})),focusVisible:a(()=>({defaultValue:!1})),active:a(()=>({defaultValue:!1})),focused:a(()=>({defaultValue:!1})),hovered:a(()=>({defaultValue:!1}))}},computed:{isDisabled:({context:e,prop:a})=>a("disabled")||e.get("fieldsetDisabled")},watch({track:e,prop:a,context:t,action:i}){e([()=>a("disabled")],()=>{i(["removeFocusIfNeeded"])}),e([()=>t.get("checked")],()=>{i(["syncInputElement"])})},effects:["trackFormControlState","trackPressEvent","trackFocusVisible"],on:{"CHECKED.TOGGLE":[{guard:$("isTrusted"),actions:["toggleChecked","dispatchChangeEvent"]},{actions:["toggleChecked"]}],"CHECKED.SET":[{guard:$("isTrusted"),actions:["setChecked","dispatchChangeEvent"]},{actions:["setChecked"]}],"CONTEXT.SET":{actions:["setContext"]}},states:{ready:{}},implementations:{guards:{isTrusted:({event:e})=>!!e.isTrusted},effects:{trackPressEvent({computed:e,scope:a,context:t}){if(!e("isDisabled"))return j({pointerNode:ne(a),keyboardNode:w(a),isValidKey:i=>i.key===" ",onPress:()=>t.set("active",!1),onPressStart:()=>t.set("active",!0),onPressEnd:()=>t.set("active",!1)})},trackFocusVisible({computed:e,scope:a}){if(!e("isDisabled"))return X({root:a.getRootNode()})},trackFormControlState({context:e,send:a,scope:t}){return G(w(t),{onFieldsetDisabledChange(i){e.set("fieldsetDisabled",i)},onFormReset(){const i=e.initial("checked");a({type:"CHECKED.SET",checked:!!i,src:"form-reset"})}})}},actions:{setContext({context:e,event:a}){for(const t in a.context)e.set(t,a.context[t])},syncInputElement({context:e,scope:a}){const t=w(a);t&&L(t,!!e.get("checked"))},removeFocusIfNeeded({context:e,prop:a}){a("disabled")&&e.set("focused",!1)},setChecked({context:e,event:a}){e.set("checked",a.checked)},toggleChecked({context:e}){e.set("checked",!e.get("checked"))},dispatchChangeEvent({context:e,scope:a}){const t=w(a);R(t,{checked:e.get("checked")})}}}});A()(["checked","defaultChecked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]);const ce={class:"tw-m-0 tw-p-0"},ue=["data-testid"],he=["data-testid"],fe=["aria-disabled","aria-checked","data-testid"],ge=U({__name:"MInputSwitch",props:{modelValue:{type:Boolean},disabledTooltip:{default:void 0},variant:{default:"primary"},size:{default:"default"},name:{default:void 0},permission:{default:void 0},dataTestid:{default:void 0},label:{default:void 0},hintMessage:{default:void 0},badgeText:{default:void 0},badgeVariant:{default:"neutral"}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,{doesHavePermission:i}=Q(),s=u(()=>t.permission?!i(t.permission):!!t.disabledTooltip),n=u(()=>t.permission&&!i(t.permission)?`You need the '${t.permission}' permission to use this feature.`:t.disabledTooltip?t.disabledTooltip:void 0),l=a,v=Y("switch"),C=u(()=>({disabled:s.value,name:t.name,defaultChecked:t.modelValue,id:v,onCheckedChange:({checked:d})=>{l("update:modelValue",d)}})),h=J(oe,C),r=u(()=>le(h,ae));W(()=>t.modelValue,d=>{r.value.setChecked(d)});const T=u(()=>{const y={primary:{enabled:"tw-bg-blue-500 hover:tw-bg-blue-600 active:tw-bg-blue-700",disabled:"tw-bg-blue-200"},success:{enabled:"tw-bg-green-500 hover:tw-bg-green-600 active:tw-bg-green-700",disabled:"tw-bg-green-200"},warning:{enabled:"tw-bg-orange-500 hover:tw-bg-orange-600 active:tw-bg-orange-700",disabled:"tw-bg-orange-200"},danger:{enabled:"tw-bg-red-500 hover:tw-bg-red-600 active:tw-bg-red-700",disabled:"tw-bg-red-200"}}[t.variant];return s.value?r.value.checked?y.disabled:"tw-bg-neutral-200":r.value.checked?y.enabled:"tw-bg-neutral-300 hover:tw-bg-neutral-400 active:tw-bg-neutral-500"}),E=u(()=>t.size==="extraSmall"?"tw-w-6 tw-h-3":t.size==="small"?"tw-w-8 tw-h-[18px]":"tw-w-11 tw-h-6"),f=u(()=>{const d={extraSmall:{size:"tw-w-2 tw-h-2",translate:"tw-translate-x-3"},small:{size:"tw-w-3.5 tw-h-3.5",translate:"tw-translate-x-3.5"},default:{size:"tw-w-5 tw-h-5",translate:"tw-translate-x-5"}};return r.value.checked?`${d[t.size].size} ${d[t.size].translate}`:`${d[t.size].size} tw-translate-x-0`}),o=u(()=>t.size==="extraSmall"?"tw-text-xs tw-mt-[0.225rem]":t.size==="small"?"tw-text-xs+ tw-font-semibold":"tw-text-sm tw-font-semibold");return(d,y)=>(m(),I("div",ce,[b("label",g(r.value.getRootProps(),{class:"tw-flex tw-items-center tw-justify-between tw-gap-x-1"},{class:[{"tw-cursor-pointer":!s.value,"tw-cursor-not-allowed":s.value,"tw-ring-2":r.value.focused}],"data-testid":`${e.dataTestid}-label`}),[e.label||d.$slots.label||e.badgeText?(m(),I("span",{key:0,class:_(["tw-overflow-hidden tw-truncate",[o.value,{"tw-text-neutral-400":s.value}]])},[x(k(e.label),1),e.badgeText?(m(),D(ee,{key:0,class:"tw-ml-1 tw-flex-shrink-0",variant:e.badgeVariant,shape:"pill"},{default:P(()=>[x(k(e.badgeText),1)],void 0,!0),_:1},8,["variant"])):V("",!0)],2)):V("",!0),b("input",g(r.value.getHiddenInputProps(),{class:"tw-m-0 tw-p-0"},{"data-testid":`${e.dataTestid}-switch-input`}),null,16,he),Z(te,{content:n.value,"no-underline":""},{default:P(()=>[b("span",g(r.value.getControlProps(),{class:"tw-relative tw-inline-flex tw-flex-shrink-0 tw-rounded-full tw-border-2 tw-border-transparent tw-outline-none tw-ring-blue-500 tw-ring-offset-2 tw-transition-colors tw-duration-200 tw-ease-in-out"},{"aria-disabled":s.value,"aria-checked":r.value.checked,class:[T.value,E.value],"data-testid":`${e.dataTestid}-switch-control`}),[b("span",g(r.value.getThumbProps(),{class:"tw-pointer-events-none tw-inline-block tw-transform tw-rounded-full tw-bg-white tw-shadow tw-ring-0 tw-transition tw-duration-200 tw-ease-in-out"},{class:[f.value,{"tw-bg-neutral-300":s.value}]}),null,16)],16,fe)],void 0,!0),_:1},8,["content"]),b("span",g(r.value.getLabelProps(),{class:"tw-sr-only"}),[b("span",null,k(r.value.checked?"On":"Off"),1)],16)],16,ue),e.hintMessage?(m(),D(se,{key:0,variant:e.variant==="danger"?"danger":void 0},{default:P(()=>[x(k(e.hintMessage),1)],void 0,!0),_:1},8,["variant"])):V("",!0)]))}});export{ge as _};
