import{d as L,E,r as j,e as r,o as n,f as e,w as o,q as t,j as l,k as d,t as y,_ as S,bs as q,bt as z,by as U,c7 as G,c as b,D as f,z as u,ah as Y,m as _,a as v,y as g,B as k,bj as N}from"./index-jY1EWd09.js";import{_ as F}from"./MetaGeneratedContent.vue_vue_type_script_setup_true_lang-CONorDOA.js";import{_ as H}from"./PlayerListCard.vue_vue_type_script_setup_true_lang-i7ZvEU78.js";import{c as A,a as J}from"./liveOpsEvents-DY308ck4.js";import{_ as K}from"./MActionModalButton.vue_vue_type_script_setup_true_lang-CTycXHot.js";import{_ as M,a as Q}from"./LiveOpsEventFormModalButton.vue_vue_type_script_setup_true_lang-C21I4XN8.js";import{_ as W}from"./TargetingCard.vue_vue_type_script_setup_true_lang-BWV75-fM.js";import{C as X}from"./CoreUiPlacement-BNT2Q2Hu.js";import{l as x}from"./liveOpsEventUtils-Qop3BoOe.js";import{_ as Z}from"./MTwoColumnLayout.vue_vue_type_script_setup_true_lang-B5zJm1QQ.js";import{_ as ee}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-Db7v8Vrj.js";import{_ as te,a as se}from"./MViewContainer.vue_vue_type_script_setup_true_lang-C_1W2rCL.js";import{B as $,a as h}from"./progress-CmZZuji0.js";import"./MetaListCard-1ZrdC8ii.js";import"./metaListUtils-B-xQ0HnD.js";import"./utils-B01yCWQ7.js";import"./_baseIteratee-FGZghVLZ.js";import"./isSymbol-B-tfGeoT.js";import"./identity-DKeuBCMA.js";import"./MInputText.vue_vue_type_script_setup_true_lang-Wwv8TYAB.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";import"./debounce-DkFP0rfT.js";import"./MInputMultiSelectCheckbox.vue_vue_type_script_setup_true_lang-BmEacL49.js";import"./MInputCheckbox.vue_vue_type_script_setup_true_lang-Bzg4Lkt_.js";import"./MInputSingleSelectRadio-BM2VfYc3.js";import"./index-Dec9dGh3.js";import"./button-group-DH69WWlM.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-CihjvaoM.js";import"./index-qe4CXcF2.js";import"./MInputTextArea.vue_vue_type_script_setup_true_lang-BahEDGWU.js";import"./actionDebouncer-D31HA7Ay.js";import"./axiosActionHandler-Di1afWRT.js";import"./MetaGeneratedForm.vue_vue_type_script_setup_true_lang-C4tXbiPC.js";import"./GeneratedUiFormDynamicComponent.vue_vue_type_script_setup_true_lang-YgpMK99r.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-CqJL3vnO.js";import"./PlayerSegmentsInput.vue_vue_type_script_setup_true_lang-0j5ld439.js";import"./numberUtils-CkF0oMe2.js";import"./MInputToggleGroup.vue_vue_type_script_setup_true_lang-BfBi0Sfr.js";import"./MInputSwitch.vue_vue_type_script_setup_true_lang-D2jAqk4R.js";import"./MInputSingleSelectSwitch.vue_vue_type_script_setup_true_lang-DPh05re_.js";import"./MInputDuration.vue_vue_type_script_setup_true_lang-Cl7Z5XKO.js";import"./MInputNumber.vue_vue_type_script_setup_true_lang-B50CLeRK.js";import"./index-DtO9IDi2.js";import"./MInputDateTime.vue_vue_type_script_setup_true_lang-BJgw3K8v.js";import"./MetaAudienceSizeEstimate.vue_vue_type_script_setup_true_lang-wU-8cgN7.js";import"./MAbbreviateNumber.vue_vue_type_script_setup_true_lang-C_9AAI8F.js";const ie=L({__name:"LiveOpsEventActionConclude",props:{eventId:{}},setup(C){const P=q(),c=C,{data:i,refresh:I}=E(A(c.eventId)),{showSuccessNotification:D}=z();async function T(){await P.post(`/concludeLiveOpsEvent/${c.eventId}`),D("Event concluded."),I()}return(a,m)=>{const w=j("meta-no-seatbelts");return n(),r(e(K),{"modal-title":"Conclude Event",action:T,"trigger-button-label":"Conclude","trigger-button-disabled-tooltip":e(i)?.currentPhase==="Ended"?"This event has already ended.":void 0,"trigger-button-full-width":"",variant:"warning","ok-button-label":"Conclude",permission:"api.liveops_events.edit"},{default:o(()=>[t("p",null,[m[0]||(m[0]=d("Concluding ",-1)),l(e(S),null,{default:o(()=>[d(y(e(i)?.eventParams.displayName),1)],void 0,!0),_:1}),m[1]||(m[1]=d(" will force it to end immediately, regardless of its schedule.",-1))]),l(w)],void 0,!0),_:1},8,["trigger-button-disabled-tooltip"])}}}),ae={class:"tw-m-0 tw-mb-4 tw-divide-y tw-divide-neutral-200",role:"list"},ne={class:"tw-mb-1 tw-font-semibold"},le={class:"tw-block tw-py-1"},oe={class:"tw-flex tw-justify-between"},re={class:"tw-block tw-py-1"},ue={class:"tw-flex tw-justify-between"},de={class:"tw-m-0 tw-divide-y tw-divide-neutral-200",role:"list"},ve={class:"tw-mb-1 tw-font-semibold"},me={class:"tw-block tw-py-1"},pe={class:"tw-flex tw-justify-between"},ce={key:0,class:"tw-italic tw-text-neutral-500"},fe={class:"tw-block tw-py-1"},we={class:"tw-flex tw-justify-between"},_e={key:0,class:"tw-italic tw-text-neutral-500"},ye={class:"tw-block tw-py-1"},be={class:"tw-flex tw-justify-between"},ge={key:0,class:"tw-italic tw-text-neutral-500"},he={class:"tw-block tw-py-1"},Se={class:"tw-flex tw-justify-between"},Pe={key:0,class:"tw-italic tw-text-neutral-500"},Oe={class:"tw-block tw-py-1"},ke={class:"tw-flex tw-justify-between"},xe={key:0,class:"tw-italic tw-text-neutral-500"},Ie={class:"tw-block tw-py-1"},De={class:"tw-flex tw-justify-between"},Te={key:0,class:"tw-italic tw-text-neutral-500"},Ee={class:"tw-block tw-py-1"},Ce={class:"tw-flex tw-justify-between"},Ne={key:0,class:"tw-italic tw-text-neutral-500"},Me={key:0},$e={class:"tw-my-5"},Le={key:0,class:"tw-m-0 tw-divide-y tw-divide-neutral-200",role:"list"},je={class:"tw-flex tw-justify-between"},Ae={class:"small"},Be={key:0},Ve={class:"small"},Re={key:0},Mt=L({__name:"LiveOpsEventDetailView",setup(C){const P=U();if(P.params.id===void 0)throw new Error("id route param is required.");const c=G(P.params.id),{data:i,error:I,refresh:D}=E(A(c)),{data:T}=E(J()),a=b(()=>i.value?.eventParams.schedule??null),m=b(()=>{if(i.value?.eventParams.schedule){const p=f.fromISO(i.value.eventParams.schedule.enabledEndTime??"").diff(f.fromISO(i.value.eventParams.schedule.enabledStartTime??"")).toISO()??"PT0S";return u.fromISO(p).toMillis()}else return 0}),w=b(()=>i.value?.eventParams.schedule?u.fromISO(i.value.eventParams.schedule.previewDuration??"PT0S").toMillis()+m.value+u.fromISO(i.value.eventParams.schedule.reviewDuration??"PT0S").toMillis():0),B=b(()=>{const p=i.value?.eventParams.content.$type;return(T.value??[]).find(O=>{const R=O.contentClass.split(",")[0];return p===R})?.eventTypeName??p}),V=b(()=>{const p=[];return i.value?.currentPhase==="Ended"&&p.push({title:"Past Event",message:"You are currently viewing an event that has already ended.",variant:"neutral"}),p});return(p,s)=>{const O=j("fa-icon");return n(),r(e(se),{"is-loading":!e(i),"meta-api-error":e(I),alerts:V.value,permission:"api.liveops_events.view"},{overview:o(()=>[e(i)?(n(),r(e(te),{key:0,title:e(i).eventParams.displayName,subtitle:e(i).eventParams.description,id:e(c),"data-testid":"live-ops-event-detail-overview-card"},{buttons:o(()=>[l(ie,{eventId:e(c)},null,8,["eventId"]),l(M,{"form-mode":"edit","current-phase":e(i)?.currentPhase,"prefill-data":e(i)?.eventParams,"event-id":e(i)?.eventId,onRefresh:e(D)},null,8,["current-phase","prefill-data","event-id","onRefresh"]),l(M,{"form-mode":"duplicate","prefill-data":e(i)?.eventParams},null,8,["prefill-data"]),l(Q,{"prefill-text":e(i)?.eventId},null,8,["prefill-text"])]),default:o(()=>[t("ul",ae,[t("div",ne,[l(O,{icon:"bar-chart"}),s[0]||(s[0]=d(" Overview",-1))]),t("li",le,[t("span",oe,[s[1]||(s[1]=t("span",null,"Event Type",-1)),l(e(S),null,{default:o(()=>[d(y(B.value),1)],void 0,!0),_:1})])]),t("li",re,[t("span",ue,[s[2]||(s[2]=t("span",null,"Total Participants",-1)),t("span",null,y(e(i).participantCount),1)])])]),t("ul",de,[t("div",ve,[l(O,{icon:"calendar-alt"}),s[3]||(s[3]=d(" Scheduling",-1))]),t("li",me,[t("span",pe,[s[4]||(s[4]=t("span",null,"Time Mode",-1)),a.value?(n(),r(e(S),{key:1},{default:o(()=>[d(y(a.value.isPlayerLocalTime?"Player Local":"UTC"),1)],void 0,!0),_:1})):(n(),v("span",ce,"None"))])]),t("li",fe,[t("span",we,[s[5]||(s[5]=t("span",null,"Start Time",-1)),a.value?(n(),r(e(g),{key:1,instant:e(f).fromISO(a.value.enabledStartTime),"disable-tooltip":a.value?.isPlayerLocalTime,showAs:"dateTime"},null,8,["instant","disable-tooltip"])):(n(),v("span",_e,"None"))])]),t("li",ye,[t("span",be,[s[6]||(s[6]=t("span",null,"End Time",-1)),a.value?(n(),r(e(g),{key:1,instant:e(f).fromISO(a.value.enabledEndTime),"disable-tooltip":a.value?.isPlayerLocalTime,showAs:"dateTime"},null,8,["instant","disable-tooltip"])):(n(),v("span",ge,"None"))])]),t("li",he,[t("span",Se,[s[7]||(s[7]=t("span",null,"Preview Duration",-1)),!a.value||e(u).fromISO(a.value.previewDuration).toMillis()===0?(n(),v("span",Pe,"None")):(n(),r(e(k),{key:1,duration:e(u).fromISO(a.value.previewDuration),showAs:"exactDuration",hideMilliseconds:""},null,8,["duration"]))])]),t("li",Oe,[t("span",ke,[s[8]||(s[8]=t("span",null,"Ending Soon Duration",-1)),!a.value||e(u).fromISO(a.value.endingSoonDuration).toMillis()===0?(n(),v("span",xe,"None")):(n(),r(e(k),{key:1,duration:e(u).fromISO(a.value.endingSoonDuration),showAs:"exactDuration",hideMilliseconds:""},null,8,["duration"]))])]),t("li",Ie,[t("span",De,[s[9]||(s[9]=t("span",null,"Review Duration",-1)),!a.value||e(u).fromISO(a.value.reviewDuration).toMillis()===0?(n(),v("span",Te,"None")):(n(),r(e(k),{key:1,duration:e(u).fromISO(a.value?.reviewDuration),showAs:"exactDuration",hideMilliseconds:""},null,8,["duration"]))])]),t("li",Ee,[t("span",Ce,[s[10]||(s[10]=t("span",null,"Total Duration",-1)),a.value?(n(),r(e(k),{key:1,duration:e(u).fromObject({milliseconds:w.value}),showAs:"exactDuration",hideMilliseconds:""},null,8,["duration"])):(n(),v("span",Ne,"None"))])])]),a.value?.isPlayerLocalTime===!1&&e(i)?.currentPhase!=="Ended"?(n(),v("span",Me,[t("div",$e,[a.value?(n(),v("ul",Le,[t("div",je,[t("span",null,[s[11]||(s[11]=d("Current Phase:",-1)),e(i)?.currentPhase?(n(),r(e(S),{key:0,class:"tw-ml-0.5",variant:e(x)[e(i).currentPhase].badgeVariant},{default:o(()=>[d(y(e(x)[e(i).currentPhase].displayString),1)],void 0,!0),_:1},8,["variant"])):_("",!0)]),t("span",null,[s[12]||(s[12]=d("Next Phase:",-1)),e(i)?.nextPhase?(n(),r(e(S),{key:0,class:"tw-ml-0.5",variant:e(x)[e(i).nextPhase].badgeVariant},{default:o(()=>[d(y(e(x)[e(i).nextPhase].displayString),1)],void 0,!0),_:1},8,["variant"])):_("",!0),e(i)?.nextPhaseTime?(n(),r(e(g),{key:1,class:"tw-ml-1",instant:e(f).fromISO(e(i).nextPhaseTime)},null,8,["instant"])):_("",!0)])])])):_("",!0)]),t("div",{class:"pb-3 pl-2 border-left border-dark",style:N(`margin-left: ${e(u).fromISO(a.value?.previewDuration).toMillis()/w.value*100}%; position: relative; left: -1px`)},[s[13]||(s[13]=t("div",{class:"small font-weight-bold"},"Start",-1)),t("div",Ae,[a.value===null?(n(),v("span",Be,"No schedule")):(n(),r(e(g),{key:1,instant:e(f).fromISO(a.value.enabledStartTime)},null,8,["instant"]))])],4),a.value?(n(),r(e($),{key:0,class:"font-weight-bold",max:w.value,height:"3rem"},{default:o(()=>[l(e(h),{value:e(u).fromISO(a.value?.previewDuration).toMillis(),variant:"info"},{default:o(()=>[...s[14]||(s[14]=[d("Preview",-1)])],void 0,!0),_:1},8,["value"]),l(e(h),{value:a.value.endingSoonDuration?m.value-e(u).fromISO(a.value.endingSoonDuration).toMillis():m.value,variant:"success"},{default:o(()=>[...s[15]||(s[15]=[d("Active",-1)])],void 0,!0),_:1},8,["value"]),l(e(h),{value:e(u).fromISO(a.value.endingSoonDuration).toMillis(),variant:"warning"},{default:o(()=>[...s[16]||(s[16]=[d("Ending soon",-1)])],void 0,!0),_:1},8,["value"]),l(e(h),{value:e(u).fromISO(a.value.reviewDuration).toMillis(),variant:"info"},{default:o(()=>[...s[17]||(s[17]=[d("Review",-1)])],void 0,!0),_:1},8,["value"])],void 0,!0),_:1},8,["max"])):(n(),r(e($),{key:1,class:"font-weight-bold",max:1,height:"3rem"},{default:o(()=>[l(e(h),{value:1,variant:"success"},{default:o(()=>[...s[18]||(s[18]=[d("Active",-1)])],void 0,!0),_:1})],void 0,!0),_:1})),t("div",{class:"pt-3 pr-2 pb-1 border-right border-dark text-right",style:N(`margin-right: ${e(u).fromISO(a.value?.reviewDuration).toMillis()/w.value*100}%; position: relative; right: -1px`)},[s[19]||(s[19]=t("div",{class:"small font-weight-bold"},"End",-1)),t("div",Ve,[a.value===null?(n(),v("span",Re,"No schedule")):(n(),r(e(g),{key:1,instant:e(f).fromISO(a.value.enabledEndTime)},null,8,["instant"]))])],4)])):_("",!0)],void 0,!0),_:1},8,["title","subtitle","id"])):_("",!0)]),default:o(()=>[l(e(Z),null,{default:o(()=>[l(e(Y),{title:"Event Configuration","data-testid":"live-ops-event-detail-configuration-card"},{default:o(()=>[l(F,{value:e(i)?.eventParams.content,"is-targeting-multiple-players":""},null,8,["value"])],void 0,!0),_:1}),l(W,{targetCondition:e(i)?.eventParams.targetCondition??null,ownerTitle:"This event"},null,8,["targetCondition"]),l(H,{playerIds:e(i)?.eventParams.targetPlayers??[],title:"Individual Players",emptyMessage:"No individual players targeted."},null,8,["playerIds"])],void 0,!0),_:1}),l(X,{placementId:"LiveOpsEvents/Details",liveOpsEventId:e(c)},null,8,["liveOpsEventId"]),l(e(ee),{data:e(i),label:"singleLiveOpsEventData"},null,8,["data"])],void 0,!0),_:1},8,["is-loading","meta-api-error","alerts"])}}});export{Mt as default};
