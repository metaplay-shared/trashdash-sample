import{d as $,by as h,c as d,c7 as k,h as x,i as D,bs as E,e as l,o as i,w as a,m as V,j as n,f as t,ah as T,v as B,a as v,F as N,b as P,s as C,t as m,bl as S,x as R,k as u,_ as p,q as j,bJ as q}from"./index-jY1EWd09.js";import{_ as A}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-Db7v8Vrj.js";import{_ as F,a as I}from"./MViewContainer.vue_vue_type_script_setup_true_lang-C_1W2rCL.js";const L={key:0},O=$({__name:"PlayerDetailRawView",setup(z){const _=E(),c=h(),f=d(()=>{if(c.params.id===void 0)throw new Error("id route param is required.");return k(c.params.id)}),s=x();D(async()=>{const r=await _.get(`/players/${f.value}/raw`);s.value=Object.values(r.data)});const y=d(()=>s.value?.reduce((r,e)=>r+(e.error?1:0),0)??0),w=d(()=>{if(s.value){for(const[r,e]of s.value.entries())if(e.error)return r}return-1});function g(r){const e=new q(r.error.title,"");return r.error?.details&&e.addDetail("Details",r.error.details),e}return(r,e)=>(i(),l(t(I),{"is-loading":!s.value},{overview:a(()=>[n(t(F),{title:"Raw Player Details",subtitle:`There were a total of ${y.value} errors encountered when trying to retrieve this player's details.`,id:f.value,"data-testid":"raw-player-overview-card"},{default:a(()=>[...e[0]||(e[0]=[j("p",{class:"tw-text-sm tw-text-neutral-500"},"This page allows you to inspect a player's details even when the server is unable to correctly deserialize the player's data.",-1)])],void 0,!0),_:1},8,["subtitle","id"])]),default:a(()=>[s.value?(i(),l(t(T),{key:0,title:"Technical Details",noBodyPadding:"","data-testid":"raw-player-technical-details-card"},{default:a(()=>[n(t(B),null,{default:a(()=>[(i(!0),v(N,null,P(s.value,(o,b)=>(i(),l(t(C),{key:o.title,"is-open-by-default":w.value===b,"extra-m-list-item-margin":""},{header:a(()=>[n(t(R),{noLeftPadding:""},{badge:a(()=>[o.data?(i(),l(t(p),{key:0,variant:"success"},{default:a(()=>[...e[1]||(e[1]=[u("Valid",-1)])],void 0,!0),_:1})):(i(),l(t(p),{key:1,variant:"danger"},{default:a(()=>[...e[2]||(e[2]=[u("Not valid",-1)])],void 0,!0),_:1}))]),default:a(()=>[u(m(o.title),1)],void 0,!0),_:2},1024)]),default:a(()=>[o.data?(i(),v("pre",L,m(o.data),1)):(i(),l(t(S),{key:1,error:g(o)},null,8,["error"]))],void 0,!0),_:2},1032,["is-open-by-default"]))),128))],void 0,!0),_:1})],void 0,!0),_:1})):V("",!0),n(t(A),{data:s.value,label:"detailEntries"},null,8,["data"])],void 0,!0),_:1},8,["is-loading"]))}});export{O as default};
