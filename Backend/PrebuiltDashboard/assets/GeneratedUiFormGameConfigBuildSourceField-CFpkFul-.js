import{d as k,N as G,O,E as U,H as E,P as $,h as v,c as l,K as j,i as w,a as d,o as r,j as c,m as g,q as z,w as H,k as L,t as S,f as s}from"./index-B-VT6L6o.js";import{_ as q}from"./LabelWithLogicVersion.vue_vue_type_script_setup_true_lang-D14uXKK6.js";import{_ as A}from"./GeneratedUiFormAbstractField.vue_vue_type_script_setup_true_lang-9Nzz34UE.js";import{_ as D}from"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-Dv81Anyh.js";import"./GeneratedUiFormDynamicComponent.vue_vue_type_script_setup_true_lang-DFWvQe41.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CBCiJKqn.js";const K={key:0,class:"text-muted small"},R=["data-testid"],J={key:1,class:"mt-2 border p-2 rounded bg-light"},y="Custom Source",ee=k({__name:"GeneratedUiFormGameConfigBuildSourceField",props:{...O,value:{type:Object,default:void 0}},emits:G,setup(h,{emit:C}){const{data:m}=U(E()),a=h,N=C,{displayName:b,displayHint:f,update:o,dataTestid:_}=$(a,N);function M(e){e.displayName===y?(i=!0,o(t.value)):(i=!1,o(e))}function T(e){t.value=e,i&&o(e)}let i=!1;const p={displayName:y},t=v(),n=l(()=>{let e=null;return a.page==="GameConfigBuildCard"?e=m.value?.gameConfigBuildInfo:a.page==="LocalizationsBuildCard"&&(e=m.value?.localizationsBuildInfo),e?.slotToAvailableSourcesMapping[a.fieldInfo.fieldName??""]??[]}),V=l(()=>n.value.concat(p)),B=l(()=>i?p:{...a.value,displayName:a.value?.name}),F=l(()=>V.value.map(e=>({label:e.displayName,value:e}))),P=l(()=>n.value[0]),I=l(()=>a.value);return j(I,(e,u)=>{e||setTimeout(()=>{o(P.value)},0)},{immediate:!0}),w(()=>{a.value&&(n.value.find(u=>u.displayName===a.value?.displayName)||(i=!0,t.value=a.value,o(t.value)))}),v(),(e,u)=>(r(),d("div",null,[c(q,{fieldInfo:e.fieldInfo,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers},{default:H(()=>[L(S(s(b)),1)],void 0,!0),_:1},8,["fieldInfo","isTargetingMultiplePlayers"]),s(f)?(r(),d("div",K,S(s(f)),1)):g("",!0),z("div",{class:"tw-mt-1","data-testid":s(_)+"source-slot"},[c(s(D),{"model-value":B.value,options:F.value,placeholder:"Select a source...",disabled:e.disabled,"onUpdate:modelValue":M},null,8,["model-value","options","disabled"])],8,R),s(i)?(r(),d("div",J,[c(A,{typeName:"Metaplay.Core.Config.GameConfigBuildSource",value:t.value,"field-info":e.fieldInfo,"field-schema":e.fieldSchema,"server-validation-results":e.serverValidationResults,"logic-version":e.logicVersion,disabled:e.disabled,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers,onInput:T},null,8,["value","field-info","field-schema","server-validation-results","logic-version","disabled","isTargetingMultiplePlayers"])])):g("",!0)]))}});export{ee as default};
