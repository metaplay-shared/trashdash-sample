import{d as x,h as S,K as V,r as c,e as i,o,w as e,f as l,x as m,k as s,t as r,j as n,ae as u,q as _,D as P,y as $,m as v,U as g,aP as D,bs as h}from"./index-B-VT6L6o.js";const C={class:"tw-flex"},N=x({__name:"PlayerListCard",props:{playerIds:{},title:{default:"Players"},emptyMessage:{default:"No players."}},setup(I){const k=h(),y=I,p=S();V(()=>y.playerIds,async(d,t)=>{D(d,t)||await b()},{deep:!0,immediate:!0});async function b(){const d=await k.post("players/bulkValidate",{PlayerIds:y.playerIds});p.value=d.data.filter(t=>t.validId).map(t=>t.playerData)}return(d,t)=>{const f=c("fa-icon"),w=c("meta-list-card");return o(),i(w,{title:d.title,icon:"user",emptyMessage:d.emptyMessage,searchFields:["name","id"],itemList:p.value,"data-testid":"player-list-card"},{"item-card":e(({item:a})=>[a?.deserializedSuccessfully?a?.deletionStatus.startsWith("Deleted")?(o(),i(l(m),{key:1,class:"text-danger"},{"top-right":e(()=>[s(r(a.id),1)]),"bottom-left":e(()=>t[2]||(t[2]=[s("Player deleted",-1)])),"bottom-right":e(()=>[n(l(u),{to:`/players/${a.id}`},{default:e(()=>t[3]||(t[3]=[s("View player",-1)]),void 0,!0),_:2,__:[3]},1032,["to"])]),default:e(()=>[s("â˜ ï¸ "+r(a.name),1)],void 0,!0),_:2},1024)):(o(),i(l(m),{key:2},{badge:e(()=>[_("div",C,[a?.totalIapSpend>0?(o(),i(l(g),{key:0,content:"Total IAP spend: $"+a.totalIapSpend.toFixed(2),noUnderline:""},{default:e(()=>[n(f,{class:"text-muted",icon:"money-check-alt",size:"sm"})],void 0,!0),_:2},1032,["content"])):v("",!0),a?.isDeveloper?(o(),i(l(g),{key:1,content:"This player is a developer.",noUnderline:""},{default:e(()=>[n(f,{class:"text-muted",icon:"user-astronaut",size:"sm"})],void 0,!0),_:1})):v("",!0)])]),"top-right":e(()=>[s(r(a?.id),1)]),"bottom-left":e(()=>[s("Level "+r(a?.level),1)]),"bottom-right":e(()=>[_("div",null,[t[4]||(t[4]=s("Joined ",-1)),n(l($),{instant:l(P).fromISO(a.createdAt)},null,8,["instant"])]),n(l(u),{to:`/players/${a.id}`},{default:e(()=>t[5]||(t[5]=[s("View player",-1)]),void 0,!0),_:2,__:[5]},1032,["to"])]),default:e(()=>[s(r(a?.name),1)],void 0,!0),_:2},1024)):(o(),i(l(m),{key:0,class:"text-danger"},{"top-right":e(()=>[s(r(a?.id),1)]),"bottom-left":e(()=>t[0]||(t[0]=[s("Failed to load player!",-1)])),"bottom-right":e(()=>[n(l(u),{to:`/players/${a.id}`},{default:e(()=>t[1]||(t[1]=[s("View player",-1)]),void 0,!0),_:2,__:[1]},1032,["to"])]),default:e(()=>[s("ðŸ›‘ "+r(a?.name),1)],void 0,!0),_:2},1024))]),_:1},8,["title","emptyMessage","itemList"])}}});export{N as _};
