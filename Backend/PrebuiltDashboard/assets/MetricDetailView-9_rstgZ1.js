import{d as E,by as V,h as r,D as p,c as g,c7 as q,E as h,K as B,e as O,o as R,w as d,j as n,f as a,q as b,t as C}from"./index-jY1EWd09.js";import{g as W,b as j,_ as A,a as D}from"./MetricCard.vue_vue_type_script_setup_true_lang-BKnfkWX-.js";import{_ as F}from"./MetricsControls.vue_vue_type_script_setup_true_lang-DL6pUGg3.js";import{_ as U}from"./MTwoColumnLayout.vue_vue_type_script_setup_true_lang-B5zJm1QQ.js";import{_ as K}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-Db7v8Vrj.js";import{_ as z,a as G}from"./MViewContainer.vue_vue_type_script_setup_true_lang-C_1W2rCL.js";import"./numberUtils-CkF0oMe2.js";import"./MPlot.vue_vue_type_script_setup_true_lang-BKfTeSAz.js";import"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-CqJL3vnO.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";import"./MInputSingleSelectRadio-BM2VfYc3.js";import"./index-Dec9dGh3.js";import"./MInputDuration.vue_vue_type_script_setup_true_lang-Cl7Z5XKO.js";import"./MInputNumber.vue_vue_type_script_setup_true_lang-B50CLeRK.js";import"./index-DtO9IDi2.js";import"./MInputSwitch.vue_vue_type_script_setup_true_lang-D2jAqk4R.js";import"./MInputDateTime.vue_vue_type_script_setup_true_lang-BJgw3K8v.js";import"./MInputSingleSelectSwitch.vue_vue_type_script_setup_true_lang-DPh05re_.js";const H={class:"tw-mb-2"},J={class:"tw-mb-4 tw-text-sm tw-text-neutral-500"},pe=E({__name:"MetricDetailView",setup(L){const _=V(),M=r("liveUpdate"),c=r("60d"),f=r("Daily"),l=r(p.utc()),u=r(p.utc().minus({days:60})),m=r(void 0),v=r(void 0),I=r(),i=g(()=>{if(_.params.id===void 0)throw new Error("id route param is required.");return q(_.params.id)});async function y(o){m.value=o,await I.value?.selectCohort(o)}function S(){return!s.value||!i.value?"":D(i.value,s.value)?.dashboardInfo?.name??"Metric Name Not Found"}function $(){return!s.value||!i.value?"":D(i.value,s.value)?.dashboardInfo?.purposeDescription??""}function x(){return!s.value||!i.value?"":D(i.value,s.value)?.dashboardInfo?.implementationDescription??""}const{data:s,error:T}=h(()=>W()),{data:N,error:P}=h(()=>{if(i.value)return j(i.value,f.value??"Daily",u.value??p.utc().minus({days:60}),l.value??p.utc())}),w=r();B([N],([o],[e])=>{o&&(w.value=o)},{immediate:!0});const k=g(()=>M.value==="liveUpdate"?c.value==="4h"?4*60:c.value==="3d"?3*24:c.value==="60d"?60:Math.ceil((l.value.toMillis()-u.value.toMillis())/(1e3*60*60*24)):Math.ceil((l.value.toMillis()-u.value.toMillis())/(1e3*60*60*24)));return(o,e)=>(R(),O(a(G),{"full-width":"",permission:"api.metrics.view",error:a(T)||a(P),"is-loading":!a(s)},{overview:d(()=>[n(a(z),{title:S()},{default:d(()=>[b("p",H,C($()),1),b("p",J,C(x()),1),n(F,{ref_key:"metricsControls",ref:I,"metric-id":i.value,"metrics-info-data":a(s),"metric-data":w.value,"onUpdate:startTime":e[0]||(e[0]=t=>u.value=t),"onUpdate:endTime":e[1]||(e[1]=t=>l.value=t),"onUpdate:resolution":e[2]||(e[2]=t=>f.value=t),"onUpdate:selectedCohort":e[3]||(e[3]=t=>m.value=t),"onUpdate:cohortDate":e[4]||(e[4]=t=>v.value=t),"onUpdate:timeWindowMode":e[5]||(e[5]=t=>M.value=t),"onUpdate:timePreset":e[6]||(e[6]=t=>c.value=t)},null,8,["metric-id","metrics-info-data","metric-data"])],void 0,!0),_:1},8,["title"])]),default:d(()=>[n(a(U),null,{default:d(()=>[n(A,{class:"tw-max-w-[120rem]","metric-id":i.value,"time-series-resolution":f.value,"start-time":u.value,"end-time":l.value,"cohort-date":v.value,"selected-cohort":m.value,badge:m.value!==void 0?`Cohort D${m.value}`:v.value!==void 0?`Cohorts on ${v.value}`:void 0,"fill-with-nulls":k.value,"link-mode":"none","hide-description":"",onCohortSelected:e[7]||(e[7]=t=>y(t))},null,8,["metric-id","time-series-resolution","start-time","end-time","cohort-date","selected-cohort","badge","fill-with-nulls"])],void 0,!0),_:1}),n(a(U),null,{default:d(()=>[n(a(K),{class:"tw-max-w-[120rem]",data:w.value,label:"metricsData"},null,8,["data"])],void 0,!0),_:1})]),_:1},8,["error","is-loading"]))}});export{pe as default};
