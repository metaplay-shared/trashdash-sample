import{d as F,bz as M,c5 as C,bH as R,E as w,c as h,cK as D,r as _,e as v,o,w as t,j as a,f as e,a as T,m as l,ag as j,x as q,k as i,t as u,ae as k,y as I,D as g,q as $,B as z}from"./index-B-VT6L6o.js";import{_ as H}from"./LeagueProgressCard.vue_vue_type_script_setup_true_lang-G7btB-rp.js";import{C as K}from"./CoreUiPlacement-CjMnxsui.js";import{a as G,b as J,d as Q}from"./leagues-xzCOBK0Z.js";import{M as W}from"./MSingleColumnLayout-Bc4oHrRo.js";import{_ as x}from"./MRawDataCard.vue_vue_type_script_setup_true_lang-DhJnJrxb.js";import{_ as X,a as Z}from"./MViewContainer.vue_vue_type_script_setup_true_lang-sbviMV0h.js";import"./leagueUtils-BqF6ffxm.js";import"./progress-Bi_Kliux.js";const ee={key:0},te={class:"mt-2"},ae={class:"font-weight-bold tw-mb-1"},se={key:0,class:"tw-mt-3"},_e=F({__name:"LeagueSeasonDetailView",setup(re){const b=M(),{isDeveloperUiEnabled:N}=j(),d=C(b.params.leagueId),p=Number(C(b.params.seasonId)),S=isFinite(p)?void 0:new R("Invalid season ID",`Season ID must be a number, not '${b.params.seasonId.toString()}'.`),{data:m}=w(G(d)),{data:s,error:L}=w(()=>S?void 0:J(d,p)),{data:E}=w(()=>S?void 0:Q(d,p)),O=h(()=>S??L.value),A=h(()=>{const c=[];return D(m.value)&&D(s.value)&&(s.value.isCurrent===!1&&c.push({title:"Past Season",message:V.value,variant:"neutral"}),s.value.isCurrent===!0&&m.value.state.currentSeason.endedEarly===!0&&c.push({title:"Season Ended Early",message:"This season ended before its configured schedule.",variant:"warning"}),s.value.isCurrent===!0&&m.value.state.currentSeason.startedEarly===!0&&c.push({title:"Season Started Early",message:"This season started before its configured schedule.",variant:"warning"})),c}),V=h(()=>s.value?.startedEarly===!0&&s.value?.endedEarly===!1?"You are currently viewing a season that has already ended. This season started before its configured schedule.":s.value?.startedEarly===!1&&s.value?.endedEarly===!0?"You are currently viewing a season that has already ended. This season ended before its configured schedule.":s.value?.startedEarly===!0&&s.value?.endedEarly===!0?"You are currently viewing a season that has already ended. This season started and ended before its configured schedule.":"You are currently viewing a season that has already ended.");return(c,r)=>{const B=_("fa-icon"),n=_("b-td"),f=_("b-tr"),P=_("b-tbody"),U=_("b-table-simple"),Y=_("meta-list-card");return o(),v(e(Z),{"is-loading":!e(s),error:O.value,alerts:A.value,permission:"api.leagues.view"},{overview:t(()=>[a(e(X),{title:e(s).displayName,"data-testid":"league-season-detail-overview-card"},{subtitle:t(()=>[e(m)?(o(),T("div",ee,[a(e(k),{to:`/leagues/${e(d)}`},{default:t(()=>[i(u(e(m).details.leagueDisplayName),1)],void 0,!0),_:1},8,["to"]),i(" / "+u(e(s).displayName),1)])):l("",!0),$("p",te,u(e(s).description),1)]),default:t(()=>[$("div",ae,[a(B,{icon:"chart-bar"}),r[0]||(r[0]=i(" Overview",-1))]),a(U,{small:""},{default:t(()=>[a(P,null,{default:t(()=>[e(s).isCurrent?l("",!0):(o(),v(f,{key:0},{default:t(()=>[a(n,null,{default:t(()=>r[1]||(r[1]=[i("Start",-1)]),void 0,!0),_:1,__:[1]}),a(n,{class:"tw-text-right"},{default:t(()=>[a(e(I),{instant:e(g).fromISO(e(s).startTime),showAs:"dateTime"},null,8,["instant"])],void 0,!0),_:1})],void 0,!0),_:1})),e(s).isCurrent?l("",!0):(o(),v(f,{key:1},{default:t(()=>[a(n,null,{default:t(()=>r[2]||(r[2]=[i("End",-1)]),void 0,!0),_:1,__:[2]}),a(n,{class:"tw-text-right"},{default:t(()=>[a(e(I),{instant:e(g).fromISO(e(s).endTime),showAs:"dateTime"},null,8,["instant"])],void 0,!0),_:1})],void 0,!0),_:1})),e(s).isCurrent?l("",!0):(o(),v(f,{key:2},{default:t(()=>[a(n,null,{default:t(()=>r[3]||(r[3]=[i("Duration",-1)]),void 0,!0),_:1,__:[3]}),a(n,{class:"tw-text-right"},{default:t(()=>[a(e(z),{duration:e(g).fromISO(e(s).endTime).diff(e(g).fromISO(e(s).startTime)),showAs:"exactDuration"},null,8,["duration"])],void 0,!0),_:1})],void 0,!0),_:1})),a(f,null,{default:t(()=>[a(n,null,{default:t(()=>r[4]||(r[4]=[i("Total participants",-1)]),void 0,!0),_:1,__:[4]}),a(n,{class:"text-right"},{default:t(()=>[i(u(e(s).totalParticipantCount),1)],void 0,!0),_:1})],void 0,!0),_:1}),a(f,null,{default:t(()=>[a(n,null,{default:t(()=>r[5]||(r[5]=[i("First-time participants",-1)]),void 0,!0),_:1,__:[5]}),a(n,{class:"text-right"},{default:t(()=>[i(u(e(s).newParticipantCount),1)],void 0,!0),_:1})],void 0,!0),_:1}),e(s).isCurrent?l("",!0):(o(),v(f,{key:3},{default:t(()=>[a(n,null,{default:t(()=>r[6]||(r[6]=[i("Dropped at season's end",-1)]),void 0,!0),_:1,__:[6]}),a(n,{class:"text-right"},{default:t(()=>[i(u(e(s).numDropped),1)],void 0,!0),_:1})],void 0,!0),_:1})),e(s).isCurrent?(o(),v(f,{key:4},{default:t(()=>[a(n,{colspan:"2"},{default:t(()=>[e(m)&&e(m).enabled?(o(),v(H,{key:0,leagueId:e(d)},null,8,["leagueId"])):l("",!0)],void 0,!0),_:1})],void 0,!0),_:1})):l("",!0)],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1},8,["title"])]),default:t(()=>[a(e(W),null,{default:t(()=>[a(K,{placementId:"Leagues/Season/Details",leagueId:e(d),seasonId:e(p)},null,8,["leagueId","seasonId"]),e(N)?(o(),T("div",se,[a(Y,{title:"Recently Active Divisions","item-list":e(E),"empty-message":"No recently active divisions in this season.",description:"This card is only visible in the developer UI mode."},{"item-card":t(({item:y})=>[a(e(q),null,{"bottom-left":t(()=>[r[7]||(r[7]=i("Created ",-1)),a(e(I),{instant:e(g).fromISO(y.createdAt)},null,8,["instant"]),r[8]||(r[8]=i(".",-1))]),"top-right":t(()=>[i(u(y.participants)+" participants",1)]),"bottom-right":t(()=>[a(e(k),{link:"",to:`/leagues/${e(d)}/${e(p)}/${y.entityId}`,permission:"api.leagues.view"},{default:t(()=>r[9]||(r[9]=[i("View division",-1)]),void 0,!0),_:2,__:[9]},1032,["to"])]),default:t(()=>[i(u(y.displayName),1)],void 0,!0),_:2},1024)]),_:1},8,["item-list"])])):l("",!0)],void 0,!0),_:1}),a(e(x),{data:e(s),label:"singleLeagueSeasonData"},null,8,["data"]),a(e(x),{data:e(E),label:"activeDivisionsData"},null,8,["data"])],void 0,!0),_:1},8,["is-loading","error","alerts"])}}});export{_e as default};
