import{d as S,C as w,E as l,h,a8 as L,c,e as x,m as C,f as a,o as k,w as _,q as r,j as N,bs as O,bt as $}from"./index-jY1EWd09.js";import{a as B}from"./players-Dfl1Givn.js";import{M as I}from"./MInputSingleSelectRadio-BM2VfYc3.js";import{_ as R}from"./MActionModalButton.vue_vue_type_script_setup_true_lang-CTycXHot.js";import"./index-Dec9dGh3.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";import"./MActionModal.vue_vue_type_script_setup_true_lang-CihjvaoM.js";import"./index-qe4CXcF2.js";const U={class:"tw-flex tw-justify-between"},G=S({__name:"PlayerActionUpdateLogicVersion",props:{playerId:{}},setup(p){const{showSuccessNotification:u}=$(),d=p,s=w(),g=O(),{data:e,refresh:m}=l(B(d.playerId)),o=h(e.value.model.logicVersion),{data:n}=l(L());function v(){o.value=e.value.model.logicVersion}const f=c(()=>o.value!==e.value.model.logicVersion),V=c(()=>s.supportedLogicVersionOptions?n.value?s.supportedLogicVersionOptions.filter(t=>n.value.clientCompatibilitySettings.activeLogicVersionRange.minVersion<=t&&n.value.clientCompatibilitySettings.activeLogicVersionRange.maxVersion>=t||t===e.value.model.logicVersion).map(t=>({label:t===e.value.model.logicVersion?`${t} (current)`:String(t),value:t,disabled:t<e.value.model.logicVersion})):[]:[]);async function b(){await g.post(`/players/${e.value.id}/updateLogicVersion`,{newLogicVersion:o.value}),u(`${e.value.model.playerName||"n/a"} update to ${o.value}.`),m()}return(t,i)=>a(e)?(k(),x(a(R),{key:0,"modal-title":"Update Logic Version",action:b,"trigger-button-label":"Update Logic Version",variant:"warning","ok-button-label":"Save Settings","ok-button-disabled-tooltip":f.value?void 0:"Select a different logic version to update the player.","trigger-button-disabled-tooltip":a(e).model.logicVersion==a(s).supportedLogicVersions.maxVersion?"Player is already at the highest active logic version.":void 0,permission:"api.players.update_logic_version",onShow:v,"data-testid":"action-update-logic-version-player"},{default:_(()=>[r("div",U,[i[1]||(i[1]=r("span",{class:"tw-font-semibold"},"Logic Version",-1)),N(a(I),{class:"tw-relative","model-value":o.value,name:"logicVersionInput",size:"small",options:V.value,"onUpdate:modelValue":i[0]||(i[0]=y=>o.value=y),"data-testid":"player-logic-version-input"},null,8,["model-value","options"])]),i[2]||(i[2]=r("span",{class:"tw-text-xs+ tw-text-neutral-500"},"Changing the player's logic version will disconnect the player and force them to update to a newer version of the game client before they can reconnect.",-1))],void 0,!0),_:1},8,["ok-button-disabled-tooltip","trigger-button-disabled-tooltip"])):C("",!0)}});export{G as default};
