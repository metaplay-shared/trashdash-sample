import{d as L,c as p,h as b,z as x,K as C,aj as k,a as i,o as a,Q as c,m as y,t as D,j as f,q as n,e as q,f as u,D as F,w as U,bh as G,k as K}from"./index-B-VT6L6o.js";import{_ as $}from"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CBCiJKqn.js";import{_ as E}from"./MInputNumber.vue_vue_type_script_setup_true_lang-CZUuOOV2.js";import{_ as A}from"./MInputSwitch.vue_vue_type_script_setup_true_lang-jCyUDcM1.js";const Q={key:0,class:"tw-flex tw-items-center tw-justify-between"},W={key:1},J={key:1},P={class:"tw-flex tw-flex-1 tw-items-baseline tw-space-x-2"},R=["for"],X={class:"tw-flex tw-flex-1 tw-items-baseline tw-space-x-2"},Y=["for"],Z={class:"tw-flex tw-flex-1 tw-items-baseline tw-space-x-2"},ee=["for"],te={key:0,class:"tw-text-xs tw-text-red-500"},ae={key:1,class:"tw-text-xs tw-text-neutral-400","data-testid":"duration-preview"},le={key:2,class:"tw-m-0 tw-text-xs tw-text-neutral-400"},ne=L({__name:"MInputDuration",props:{modelValue:{},referenceDateTime:{default:void 0},allowEmpty:{type:Boolean},label:{default:void 0},disabled:{type:Boolean},hintMessage:{default:void 0},variant:{default:"default"},showGameTimeHint:{type:Boolean,default:!0}},emits:["update:modelValue","isValid"],setup(j,{emit:z}){const l=j,s=z,V=p(()=>l.referenceDateTime?.toUTC()),h=b(l.modelValue!==void 0);function H(e){h.value=e,e?(s("update:modelValue",M.value),s("isValid",M.value!==void 0)):(s("update:modelValue",void 0),s("isValid",!0))}const g=p(()=>typeof l.modelValue=="string"?x.fromISO(l.modelValue).shiftTo("days","hours","minutes","seconds","milliseconds"):l.modelValue?.shiftTo("days","hours","minutes","seconds","milliseconds")),M=b(g.value),r=b(g.value?.days),m=b(g.value?.hours),v=b(g.value?.minutes);C(()=>l.modelValue,e=>{typeof e=="string"&&(e=x.fromISO(e)),r.value=e?.days!==void 0&&e.days!==0?e.days:void 0,m.value=e?.hours!==void 0&&e.hours!==0?e.hours:void 0;const t=e?Number(e.minus({days:e.days,hours:e.hours}).as("minutes").toFixed(3)):void 0;v.value=t!==0?t:void 0},{immediate:!0});const w=p(()=>{const e={};return r.value&&(e.days=r.value),m.value&&(e.hours=m.value),v.value&&(e.minutes=v.value),x.fromObject(e)});C(()=>w.value,e=>{e.toMillis()<=0?(s("update:modelValue",void 0),s("isValid",l.allowEmpty&&!h.value)):(M.value=e,s("update:modelValue",e),s("isValid",!0))});function _(){const e=w.value.toMillis();if(e<=0)return;const t=e/(1e3*60),o=Math.floor(t/(60*24)),I=Math.floor(t%(60*24)/60),N=t%60;r.value=o===0?void 0:o,m.value=I===0?void 0:I,v.value=N===0?void 0:N}const d=p(()=>w.value>x.fromObject({minutes:0})),T=k("days"),B=k("hours"),S=k("minutes"),O=p(()=>{switch(l.variant){case"danger":return"tw-ring-red-400 tw-text-red-400";case"success":return"tw-ring-green-500";default:return"tw-ring-neutral-300"}});return(e,t)=>(a(),i("div",{class:c(["tw-space-y-1 tw-@container",{"tw-bg-neutral-100 tw-rounded-md tw-border tw-border-neutral-200 tw-p-3":e.allowEmpty}])},[e.label||e.allowEmpty?(a(),i("div",Q,[e.label?(a(),i("label",{key:0,class:c(["tw-block tw-text-sm tw-font-bold tw-leading-6",{"tw-text-neutral-400":e.disabled,"tw-text-neutral-900":!e.disabled}])},D(e.label),3)):y("",!0),e.allowEmpty?(a(),i("div",W,[f(A,{class:"tw-text-neutral-500","model-value":h.value,"disabled-tooltip":e.disabled?"Disabled":void 0,label:"Enable",size:"small","onUpdate:modelValue":H},null,8,["model-value","disabled-tooltip"])])):y("",!0)])):y("",!0),!e.allowEmpty||h.value?(a(),i("div",J,[n("div",{class:c(["tw-flex tw-flex-col tw-space-y-2 @sm:tw-flex-row @sm:tw-space-x-4 @sm:tw-space-y-0",O.value])},[n("div",P,[n("label",{for:`number-input:${u(T)}:input`,class:c(["tw-text-sm",{"tw-text-red-500":!d.value,"tw-text-neutral-400":e.disabled}])},"Days:",10,R),f(E,{class:"tw-grow",name:"days",id:u(T),"model-value":r.value,min:0,variant:e.variant==="default"?d.value?"default":"danger":e.variant,disabled:e.disabled,placeholder:"0-365","clear-on-zero":"","onUpdate:modelValue":t[0]||(t[0]=o=>r.value=Number(o)),onBlur:_},null,8,["id","model-value","variant","disabled"])]),n("div",X,[n("label",{for:`number-input:${u(B)}:input`,class:c(["tw-text-sm",{"tw-text-red-500":!d.value,"tw-text-neutral-400":e.disabled}])},"Hours:",10,Y),f(E,{class:"tw-grow",name:"hours",id:u(B),"model-value":m.value,min:0,variant:e.variant==="default"?d.value?"default":"danger":e.variant,disabled:e.disabled,placeholder:"0-23","clear-on-zero":"","onUpdate:modelValue":t[1]||(t[1]=o=>m.value=Number(o)),onBlur:_},null,8,["id","model-value","variant","disabled"])]),n("div",Z,[n("label",{for:`number-input:${u(S)}:input`,class:c(["tw-text-sm",{"tw-text-red-500":!d.value,"tw-text-neutral-400":e.disabled}])},"Minutes:",10,ee),f(E,{class:"tw-grow",name:"minutes",id:u(S),"model-value":v.value,min:0,variant:e.variant==="default"?d.value?"default":"danger":e.variant,disabled:e.disabled,placeholder:"0-59","clear-on-zero":"","onUpdate:modelValue":t[2]||(t[2]=o=>v.value=Number(o)),onBlur:_},null,8,["id","model-value","variant","disabled"])])],2),d.value?w.value&&V.value?(a(),i("div",ae,"Selected duration lasts until "+D(V.value.plus(w.value).toLocaleString(u(F).DATETIME_FULL_WITH_SECONDS)),1)):y("",!0):(a(),i("div",te,"Enter a valid duration.")),e.showGameTimeHint?(a(),q($,{key:2},{default:U(()=>[f(G)],void 0,!0),_:1})):y("",!0),f($,{variant:e.variant},{default:U(()=>[K(D(e.hintMessage),1)],void 0,!0),_:1},8,["variant"])])):(a(),i("p",le,D(e.hintMessage),1))],2))}});export{ne as _};
