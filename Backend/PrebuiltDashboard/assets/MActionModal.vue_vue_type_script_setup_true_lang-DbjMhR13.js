import{d as D,h as y,c as g,bn as E,ak as M,aj as N,e as C,o as s,aW as V,j as r,bG as x,w as n,a as o,m as u,n as v,q as a,t as B,a7 as w,bl as I,T as p,k as c,bm as q,I as G,bH as H,al as U}from"./index-B-VT6L6o.js";import{m as A,c as K}from"./index-D9XvAc_V.js";const W={key:0,class:"tw-pointer-events-auto tw-fixed tw-inset-0 tw-z-50 tw-overflow-y-auto tw-@container"},F=["data-testid"],J={class:"tw-overflow-hidden tw-overflow-ellipsis tw-font-bold tw-text-neutral-900",role:"heading"},Q={key:0,class:"tw-my-14 tw-flex tw-animate-bounce tw-justify-center tw-italic tw-text-neutral-500"},R={key:1},X={class:"tw-flex tw-justify-end"},Y={key:2},Z={key:0,class:"tw-mt-4 tw-flex tw-justify-end"},tt={key:3},et={class:"tw-relative tw-z-10 tw-mb-4 tw-gap-8 tw-space-y-8 @4xl:tw-flex @4xl:tw-space-y-0"},at={class:"@4xl:tw-flex-1"},st={key:0,class:"@4xl:tw-flex-1"},ot={key:0,class:"tw-pb-3 @4xl:tw-flex-1"},lt={class:"tw-mr-1"},rt=D({__name:"MActionModal",props:{title:{},action:{},variant:{default:"primary"},okButtonLabel:{default:"Ok"},okButtonDisabledTooltip:{default:void 0},disableSafetyLock:{type:Boolean,default:!1},modalSize:{default:"default"},dataTestid:{default:void 0},okButtonDisabled:{default:void 0}},emits:["ok","cancel","show","hide"],setup(P,{expose:$,emit:L}){const h=P,k=y(!1),b=g(()=>f.value?"loading":i.value?"error":k.value?"success":"default"),m=L;function S(){f.value=!1,i.value=void 0,k.value=!1,l.value.setOpen(!0),m("show")}function d(){l.value.setOpen(!1)}$({open:S,close:d});const T=E(),_=g(()=>{const t={default:"tw-max-w-lg",large:"tw-max-w-5xl"};return T["right-panel"]?t.large:t[h.modalSize]}),f=y(!1),i=y();async function z(){f.value=!0;try{k.value=!0;const t=h.action();t instanceof Promise&&await t,f.value=!1,m("ok"),T["result-panel"]||d()}catch(t){f.value=!1,t instanceof H||t instanceof Error?i.value=t:i.value=new Error("Unknown error"),console.error(t)}}function j(){m("cancel"),d()}const O=M(A,{id:N("modal"),closeOnInteractOutside:!1,onOpenChange:t=>{t.open||m("hide")}}),l=g(()=>K(O,U));return(t,e)=>(s(),C(V,{to:"body"},[r(x,{name:"backdrop-fade"},{default:n(()=>[l.value.open?(s(),o("div",v({key:0},l.value.getBackdropProps(),{class:"tw-pointer-events-none tw-fixed tw-inset-0 tw-z-50"}),null,16)):u("",!0)],void 0,!0),_:1}),r(x,{name:"modal-fade"},{default:n(()=>[l.value.open?(s(),o("div",W,[a("div",v(l.value.getPositionerProps(),{class:"tw-relative tw-p-1 @md:tw-mb-32 @md:tw-px-5"},{"data-testid":t.dataTestid}),[a("div",v(l.value.getContentProps(),{class:"tw-mx-auto tw-rounded-lg tw-bg-white tw-p-4 tw-shadow-xl tw-transition-transform tw-duration-1000 tw-@container @md:tw-mt-24 @md:tw-w-full @md:tw-px-5 @md:tw-pt-3.5"},{class:_.value}),[a("div",v(l.value.getTitleProps(),{class:"tw-mb-2 tw-flex tw-justify-between"}),[a("span",J,B(t.title),1),a("span",null,[w(t.$slots,"modal-subtitle")]),a("button",{class:"tw-relative -tw-top-0.5 tw-inline-flex tw-h-7 tw-w-7 tw-shrink-0 tw-items-center tw-justify-center tw-rounded tw-font-semibold hover:tw-bg-neutral-100 active:tw-bg-neutral-200",onClick:d},e[0]||(e[0]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"tw-w-6 tw-h-6"},[a("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"})],-1)]))],16),e[8]||(e[8]=a("div",{class:"tw-mb-3 tw-border-b tw-border-neutral-200 @md:-tw-mx-5"},null,-1)),b.value==="loading"?(s(),o("div",Q,"Loading, please hold...")):b.value==="error"?(s(),o("div",R,[e[2]||(e[2]=a("p",null,"Oh snap, something went wrong while trying to perform the action. Here's what we know:",-1)),i.value?(s(),C(I,{key:0,class:"tw-my-4",error:i.value},null,8,["error"])):u("",!0),a("div",X,[r(p,{variant:"neutral",onClick:d},{default:n(()=>e[1]||(e[1]=[c("Close",-1)]),void 0,!0),_:1,__:[1]})])])):b.value==="success"?(s(),o("div",Y,[w(t.$slots,"result-panel",{},()=>[e[3]||(e[3]=a("p",{class:"tw-my-14 tw-flex tw-justify-center tw-italic tw-text-neutral-500"},"Success!",-1))]),t.$slots["result-panel"]?(s(),o("div",Z,[r(p,v(t.$attrs,{variant:"neutral",onClick:d,"data-testid":t.dataTestid?t.dataTestid+"-close":void 0}),{default:n(()=>e[4]||(e[4]=[c("Close",-1)]),void 0,!0),_:1,__:[4]},16,["data-testid"])])):u("",!0)])):(s(),o("div",tt,[a("div",et,[a("div",at,[w(t.$slots,"default",{},()=>[e[5]||(e[5]=c("Default modal content goes here...",-1))])]),t.$slots["right-panel"]?(s(),o("div",st,[w(t.$slots,"right-panel")])):u("",!0)]),t.$slots["bottom-panel"]?(s(),o("div",ot,[w(t.$slots,"bottom-panel")])):u("",!0),e[7]||(e[7]=a("div",{class:"tw-mb-2 tw-border-b tw-border-neutral-200 @md:-tw-mx-5"},null,-1)),r(q,{class:"tw-relative tw-z-0"},{default:n(()=>[r(p,{variant:t.variant,"disabled-tooltip":t.okButtonDisabledTooltip,safetyLock:!t.disableSafetyLock,onClick:z,"data-testid":t.dataTestid?t.dataTestid+"-ok-button":void 0},G({default:n(()=>[c(B(t.okButtonLabel),1)]),_:2},[t.$slots["ok-button-icon"]?{name:"icon",fn:n(()=>[a("span",lt,[w(t.$slots,"ok-button-icon")])]),key:"0"}:void 0]),1032,["variant","disabled-tooltip","safetyLock","data-testid"]),r(p,{variant:"neutral",onClick:j,"data-testid":t.dataTestid?t.dataTestid+"-cancel-button":void 0},{default:n(()=>e[6]||(e[6]=[c("Cancel",-1)]),void 0,!0),_:1,__:[6]},8,["data-testid"])],void 0,!0),_:3})]))],16)],16,F)])):u("",!0)],void 0,!0),_:3})]))}});export{rt as _};
