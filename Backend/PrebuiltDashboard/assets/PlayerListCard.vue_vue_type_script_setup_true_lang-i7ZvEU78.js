import{d as w,h as I,K as S,r as V,e as i,o as r,f as l,w as t,x as u,q as f,j as d,k as s,ae as m,t as o,D as P,y as $,m as c,U as x,aP as D,bs as z}from"./index-jY1EWd09.js";import C from"./MetaListCard-1ZrdC8ii.js";const M={class:"tw-flex"},T=w({__name:"PlayerListCard",props:{playerIds:{},title:{default:"Players"},emptyMessage:{default:"No players."}},setup(y){const b=z(),p=y,v=I();S(()=>p.playerIds,async(n,e)=>{D(n,e)||await k()},{deep:!0,immediate:!0});async function k(){const n=await b.post("players/bulkValidate",{PlayerIds:p.playerIds});v.value=n.data.filter(e=>e.validId).map(e=>e.playerData)}return(n,e)=>{const g=V("fa-icon");return r(),i(l(C),{title:y.title,icon:"user",emptyMessage:y.emptyMessage,searchFields:["name","id"],itemList:v.value,"data-testid":"player-list-card"},{"item-card":t(({item:a})=>[a?.lifecycleStatus==="Uninitialized"?(r(),i(l(u),{key:0,class:"text-danger"},{"top-right":t(()=>[s(o(a.id),1)]),"bottom-left":t(()=>[...e[0]||(e[0]=[s("Player not initialized!",-1)])]),"bottom-right":t(()=>[d(l(m),{to:`/players/${a.id}`},{default:t(()=>[...e[1]||(e[1]=[s("View player",-1)])],void 0,!0),_:1},8,["to"])]),default:t(()=>[e[2]||(e[2]=f("span",{class:"tw-text-neutral-500"},"ðŸš« Uninitialized",-1))],void 0,!0),_:2},1024)):a?.lifecycleStatus==="Deleted"?(r(),i(l(u),{key:1,class:"text-danger"},{"top-right":t(()=>[s(o(a.id),1)]),"bottom-left":t(()=>[...e[3]||(e[3]=[s("Player deleted",-1)])]),"bottom-right":t(()=>[d(l(m),{to:`/players/${a.id}`},{default:t(()=>[...e[4]||(e[4]=[s("View player",-1)])],void 0,!0),_:1},8,["to"])]),default:t(()=>[e[5]||(e[5]=s("â˜ ï¸ Deleted",-1))],void 0,!0),_:2},1024)):a?.deserializedSuccessfully?(r(),i(l(u),{key:3},{badge:t(()=>[f("div",M,[a?.totalIapSpend>0?(r(),i(l(x),{key:0,content:"Total IAP spend: $"+a.totalIapSpend.toFixed(2),noUnderline:""},{default:t(()=>[d(g,{class:"text-muted",icon:"money-check-alt",size:"sm"})],void 0,!0),_:1},8,["content"])):c("",!0),a?.isDeveloper?(r(),i(l(x),{key:1,content:"This player is a developer.",noUnderline:""},{default:t(()=>[d(g,{class:"text-muted",icon:"user-astronaut",size:"sm"})],void 0,!0),_:1})):c("",!0)])]),"top-right":t(()=>[s(o(a?.id),1)]),"bottom-left":t(()=>[s("Level "+o(a?.level),1)]),"bottom-right":t(()=>[f("div",null,[e[8]||(e[8]=s("Joined ",-1)),d(l($),{instant:l(P).fromISO(a.createdAt)},null,8,["instant"])]),d(l(m),{to:`/players/${a.id}`},{default:t(()=>[...e[9]||(e[9]=[s("View player",-1)])],void 0,!0),_:1},8,["to"])]),default:t(()=>[s(o(a?.name),1)],void 0,!0),_:2},1024)):(r(),i(l(u),{key:2,class:"text-danger"},{"top-right":t(()=>[s(o(a?.id),1)]),"bottom-left":t(()=>[...e[6]||(e[6]=[s("Failed to load player!",-1)])]),"bottom-right":t(()=>[d(l(m),{to:`/players/${a.id}`},{default:t(()=>[...e[7]||(e[7]=[s("View player",-1)])],void 0,!0),_:1},8,["to"])]),default:t(()=>[s("ðŸ›‘ "+o(a?.name),1)],void 0,!0),_:2},1024))]),_:1},8,["title","emptyMessage","itemList"])}}});export{T as _};
