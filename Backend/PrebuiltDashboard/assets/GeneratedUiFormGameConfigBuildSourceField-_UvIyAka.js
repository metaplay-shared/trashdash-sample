import{d as k,N as G,O,E as U,H as E,P as $,h as n,c as l,K as j,i as w,a as d,o as r,j as c,m as g,q as z,w as H,k as L,t as S,f as t}from"./index-jY1EWd09.js";import{_ as q}from"./LabelWithLogicVersion.vue_vue_type_script_setup_true_lang-MAfXkVYS.js";import{_ as A}from"./GeneratedUiFormAbstractField.vue_vue_type_script_setup_true_lang-B3TdKeO2.js";import{_ as D}from"./MInputSingleSelectDropdown.vue_vue_type_script_setup_true_lang-CqJL3vnO.js";import"./GeneratedUiFormDynamicComponent.vue_vue_type_script_setup_true_lang-YgpMK99r.js";import"./MInputHintMessage.vue_vue_type_script_setup_true_lang-CYiRxbPX.js";const K={key:0,class:"text-muted small"},R=["data-testid"],J={key:1,class:"mt-2 border p-2 rounded bg-light"},y="Custom Source",ee=k({__name:"GeneratedUiFormGameConfigBuildSourceField",props:{...O,value:{type:Object,default:void 0}},emits:G,setup(h,{emit:C}){const{data:m}=U(E()),a=h,N=C,{displayName:b,displayHint:f,update:s,dataTestid:_}=$(a,N);function M(e){e.displayName===y?(i.value=!0,s(o.value)):(i.value=!1,s(e))}function T(e){o.value=e,i.value&&s(e)}const i=n(!1),p={displayName:y},o=n(),u=l(()=>{let e=null;return a.page==="GameConfigBuildCard"?e=m.value?.gameConfigBuildInfo:a.page==="LocalizationsBuildCard"&&(e=m.value?.localizationsBuildInfo),e?.slotToAvailableSourcesMapping[a.fieldInfo.fieldName??""]??[]}),B=l(()=>u.value.concat(p)),F=l(()=>i.value?p:{...a.value,displayName:a.value?.name}),P=l(()=>B.value.map(e=>({label:e.displayName,value:e}))),V=l(()=>u.value[0]),I=l(()=>a.value);return j(I,e=>{e||setTimeout(()=>{s(V.value)},0)},{immediate:!0}),w(()=>{a.value&&(u.value.find(v=>v.displayName===a.value?.displayName)||(i.value=!0,o.value=a.value,s(o.value)))}),n(),(e,v)=>(r(),d("div",null,[c(q,{fieldInfo:e.fieldInfo,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers},{default:H(()=>[L(S(t(b)),1)],void 0,!0),_:1},8,["fieldInfo","isTargetingMultiplePlayers"]),t(f)?(r(),d("div",K,S(t(f)),1)):g("",!0),z("div",{class:"tw-mt-1","data-testid":t(_)+"source-slot"},[c(t(D),{"model-value":F.value,options:P.value,placeholder:"Select a source...",disabled:e.disabled,"onUpdate:modelValue":M},null,8,["model-value","options","disabled"])],8,R),i.value?(r(),d("div",J,[c(A,{typeName:"Metaplay.Core.Config.GameConfigBuildSource",value:o.value,"field-info":e.fieldInfo,"field-schema":e.fieldSchema,"server-validation-results":e.serverValidationResults,"logic-version":e.logicVersion,disabled:e.disabled,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers,onInput:T},null,8,["value","field-info","field-schema","server-validation-results","logic-version","disabled","isTargetingMultiplePlayers"])])):g("",!0)]))}});export{ee as default};
